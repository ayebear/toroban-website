!function(){"use strict";function e(e,t){if(e&&"function"==typeof e[t]){for(var n,r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return(n=e[t]).call.apply(n,[e].concat(i))}}function t(e){return"function"==typeof e}function n(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function r(e,t){return t={exports:{}},e(t,t.exports),t.exports}function i(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function o(e){var t=Ln.call(e,jn),n=e[jn];try{e[jn]=void 0;var r=!0}catch(e){}var i=En.call(e);return r&&(t?e[jn]=n:delete e[jn]),i}function a(e){return Mn.call(e)}function s(e){return null==e?void 0===e?Rn:Bn:Fn&&Fn in Object(e)?zn(e):Dn(e)}function u(e){return null!=e&&"object"==(void 0===e?"undefined":qt(e))}function l(e){return Gn(e)&&Nn(e)==qn}function c(e){return Yn(e)||Kn(e)||!!(Qn&&e&&e[Qn])}function d(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=Jn),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?d(s,t-1,n,r,i):kn(i,s):r||(i[i.length]=s)}return i}function f(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function h(){this.__data__=[],this.size=0}function p(e,t){return e===t||e!==e&&t!==t}function v(e,t){for(var n=e.length;n--;)if(nr(e[n][0],t))return n;return-1}function _(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():or.call(t,n,1),--this.size,!0)}function y(e){var t=this.__data__,n=rr(t,e);return n<0?void 0:t[n][1]}function m(e){return rr(this.__data__,e)>-1}function g(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function b(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function k(){this.__data__=new cr,this.size=0}function w(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function x(e){return this.__data__.get(e)}function A(e){return this.__data__.has(e)}function S(e){var t=void 0===e?"undefined":qt(e);return null!=e&&("object"==t||"function"==t)}function T(e){if(!vr(e))return!1;var t=Nn(e);return t==yr||t==mr||t==_r||t==gr}function P(e){return!!xr&&xr in e}function O(e){if(null!=e){try{return Tr.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function I(e){return!(!vr(e)||Ar(e))&&(br(e)?Cr:Ir).test(Pr(e))}function L(e,t){return null==e?void 0:e[t]}function E(e,t){var n=Dr(e,t);return Mr(n)?n:void 0}function j(){this.__data__=Gr?Gr(null):{},this.size=0}function z(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function C(e){var t=this.__data__;if(Gr){var n=t[e];return n===Vr?void 0:n}return Wr.call(t,e)?t[e]:void 0}function M(e){var t=this.__data__;return Gr?void 0!==t[e]:$r.call(t,e)}function D(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Gr&&void 0===t?Qr:t,this}function B(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function R(){this.size=0,this.__data__={hash:new Zr,map:new(Fr||cr),string:new Zr}}function F(e){var t=void 0===e?"undefined":qt(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function N(e,t){var n=e.__data__;return ti(t)?n["string"==typeof t?"string":"hash"]:n.map}function G(e){var t=ni(this,e).delete(e);return this.size-=t?1:0,t}function q(e){return ni(this,e).get(e)}function H(e){return ni(this,e).has(e)}function V(e,t){var n=ni(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function X(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function W(e,t){var n=this.__data__;if(n instanceof cr){var r=n.__data__;if(!Fr||r.length<ui-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new si(r)}return n.set(e,t),this.size=n.size,this}function U(e){var t=this.__data__=new cr(e);this.size=t.size}function K(e){return this.__data__.set(e,di),this}function $(e){return this.__data__.has(e)}function Y(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new si;++t<n;)this.add(e[t])}function Q(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function J(e,t){return e.has(t)}function Z(e,t,n,r,i,o){var a=n&yi,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(e);if(l&&o.get(t))return l==t;var c=-1,d=!0,f=n&mi?new pi:void 0;for(o.set(e,t),o.set(t,e);++c<s;){var h=e[c],p=t[c];if(r)var v=a?r(p,h,c,t,e,o):r(h,p,c,e,t,o);if(void 0!==v){if(v)continue;d=!1;break}if(f){if(!vi(t,function(e,t){if(!_i(f,t)&&(h===e||i(h,e,n,r,o)))return f.push(t)})){d=!1;break}}else if(h!==p&&!i(h,p,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function ee(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function te(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function ne(e,t,n,r,i,o,a){switch(n){case Di:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Mi:return!(e.byteLength!=t.byteLength||!o(new ki(e),new ki(t)));case Ti:case Pi:case Li:return nr(+e,+t);case Oi:return e.name==t.name&&e.message==t.message;case Ei:case zi:return e==t+"";case Ii:var s=wi;case ji:var u=r&Ai;if(s||(s=xi),e.size!=t.size&&!u)return!1;var l=a.get(e);if(l)return l==t;r|=Si,a.set(e,t);var c=gi(s(e),s(t),r,i,o,a);return a.delete(e),c;case Ci:if(Ri)return Ri.call(e)==Ri.call(t)}return!1}function re(e,t,n){var r=t(e);return Yn(e)?r:kn(r,n(e))}function ie(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function oe(){return[]}function ae(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function se(){return!1}function ue(e,t){var n=void 0===e?"undefined":qt(e);return!!(t=null==t?Qi:t)&&("number"==n||"symbol"!=n&&Ji.test(e))&&e>-1&&e%1==0&&e<t}function le(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=eo}function ce(e){return Gn(e)&&to(e.length)&&!!no[Nn(e)]}function de(e){return function(t){return e(t)}}function fe(e,t){var n=Yn(e),r=!n&&Kn(e),i=!n&&!r&&Yi(e),o=!n&&!r&&!i&&uo(e),a=n||r||i||o,s=a?Ki(e.length,String):[],u=s.length;for(var l in e)!t&&!co.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Zi(l,u))||s.push(l);return s}function he(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ho)}function pe(e,t){return function(n){return e(t(n))}}function ve(e){if(!po(e))return yo(e);var t=[];for(var n in Object(e))go.call(e,n)&&"constructor"!=n&&t.push(n);return t}function _e(e){return null!=e&&to(e.length)&&!br(e)}function ye(e){return ko(e)?fo(e):bo(e)}function me(e){return Ni(e,wo,Ui)}function ge(e,t,n,r,i,o){var a=n&Ao,s=xo(e),u=s.length;if(u!=xo(t).length&&!a)return!1;for(var l=u;l--;){var c=s[l];if(!(a?c in t:To.call(t,c)))return!1}var d=o.get(e);if(d&&o.get(t))return d==t;var f=!0;o.set(e,t),o.set(t,e);for(var h=a;++l<u;){c=s[l];var p=e[c],v=t[c];if(r)var _=a?r(v,p,c,t,e,o):r(p,v,c,e,t,o);if(!(void 0===_?p===v||i(p,v,n,r,o):_)){f=!1;break}h||(h="constructor"==c)}if(f&&!h){var y=e.constructor,m=t.constructor;y!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof m&&m instanceof m)&&(f=!1)}return o.delete(e),o.delete(t),f}function be(e,t,n,r,i,o){var a=Yn(e),s=Yn(t),u=a?Xo:qo(e),l=s?Xo:qo(t);u=u==Vo?Wo:u,l=l==Vo?Wo:l;var c=u==Wo,d=l==Wo,f=u==l;if(f&&Yi(e)){if(!Yi(t))return!1;a=!0,c=!1}if(f&&!c)return o||(o=new ci),a||uo(e)?gi(e,t,n,r,i,o):Fi(e,t,u,n,r,i,o);if(!(n&Ho)){var h=c&&Ko.call(e,"__wrapped__"),p=d&&Ko.call(t,"__wrapped__");if(h||p){var v=h?e.value():e,_=p?t.value():t;return o||(o=new ci),i(v,_,n,r,o)}}return!!f&&(o||(o=new ci),Po(e,t,n,r,i,o))}function ke(e,t,n,r,i){return e===t||(null==e||null==t||!Gn(e)&&!Gn(t)?e!==e&&t!==t:$o(e,t,n,r,ke,i))}function we(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){s=n[i];var u=s[0],l=e[u],c=s[1];if(a&&s[2]){if(void 0===l&&!(u in e))return!1}else{var d=new ci;if(r)var f=r(l,c,u,e,t,d);if(!(void 0===f?Yo(c,l,Qo|Jo,r,d):f))return!1}}return!0}function xe(e){return e===e&&!vr(e)}function Ae(e){for(var t=wo(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,ea(i)]}return t}function Se(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function Te(e){var t=ta(e);return 1==t.length&&t[0][2]?na(t[0][0],t[0][1]):function(n){return n===e||Zo(n,e,t)}}function Pe(e){return"symbol"==(void 0===e?"undefined":qt(e))||Gn(e)&&Nn(e)==ia}function Oe(e,t){if(Yn(e))return!1;var n=void 0===e?"undefined":qt(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!oa(e))||(sa.test(e)||!aa.test(e)||null!=t&&e in Object(t))}function Ie(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(la);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ie.Cache||si),n}function Le(e){var t=ca(e,function(e){return n.size===da&&n.clear(),e}),n=t.cache;return t}function Ee(e){if("string"==typeof e)return e;if(Yn(e))return er(e,Ee)+"";if(oa(e))return ga?ga.call(e):"";var t=e+"";return"0"==t&&1/e==-ya?"-0":t}function je(e){return null==e?"":ba(e)}function ze(e,t){return Yn(e)?e:ua(e,t)?[e]:_a(ka(e))}function Ce(e){if("string"==typeof e||oa(e))return e;var t=e+"";return"0"==t&&1/e==-xa?"-0":t}function Me(e,t){t=wa(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[Aa(t[n++])];return n&&n==r?e:void 0}function De(e,t,n){var r=null==e?void 0:Sa(e,t);return void 0===r?n:r}function Be(e,t){return null!=e&&t in Object(e)}function Re(e,t,n){t=wa(t,e);for(var r=-1,i=t.length,o=!1;++r<i;){var a=Aa(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&to(i)&&Zi(a,i)&&(Yn(e)||Kn(e))}function Fe(e,t){return null!=e&&Oa(e,t,Pa)}function Ne(e,t){return ua(e)&&ea(t)?na(Aa(e),t):function(n){var r=Ta(n,e);return void 0===r&&r===t?Ia(n,e):Yo(t,r,La|Ea)}}function Ge(e){return e}function qe(e){return function(t){return null==t?void 0:t[e]}}function He(e){return function(t){return Sa(t,e)}}function Ve(e){return ua(e)?Ca(Aa(e)):Ma(e)}function Xe(e){return"function"==typeof e?e:null==e?za:"object"==(void 0===e?"undefined":qt(e))?Yn(e)?ja(e[0],e[1]):ra(e):Da(e)}function We(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}function Ue(e,t){return e&&Na(e,t,wo)}function Ke(e,t){return function(n,r){if(null==n)return n;if(!ko(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Object(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function $e(e,t){var n=-1,r=ko(e)?Array(e.length):[];return Va(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function Ye(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function Qe(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e===e,o=oa(e),a=void 0!==t,s=null===t,u=t===t,l=oa(t);if(!s&&!l&&!o&&e>t||o&&a&&u&&!s&&!l||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!l&&e<t||l&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function Je(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var u=Ua(i[r],o[r]);if(u){if(r>=s)return u;return u*("desc"==n[r]?-1:1)}}return e.index-t.index}function Ze(e,t,n){var r=-1;t=er(t.length?t:[za],io(Ba));var i=Xa(e,function(e,n,i){return{criteria:er(t,function(t){return t(e)}),index:++r,value:e}});return Wa(i,function(e,t){return Ka(e,t,n)})}function et(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function tt(e,t,n){return t=Qa(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=Qa(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),Ya(e,this,s)}}function nt(e){return function(){return e}}function rt(e){var t=0,n=0;return function(){var r=as(),i=os-(r-n);if(n=r,i>0){if(++t>=is)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function it(e,t){return ls(Ja(e,t,za),e+"")}function ot(e,t,n){if(!vr(n))return!1;var r=void 0===t?"undefined":qt(t);return!!("number"==r?ko(n)&&Zi(t,n.length):"string"==r&&t in n)&&nr(n[t],e)}function at(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function st(e){return e&&e.length?ps(e,za):0}function ut(e){return(e.x||0)+","+(e.y||0)}function lt(e){var t=e.split(",");return t.length=2,{x:parseInt(t[0])||0,y:parseInt(t[1])||0}}function ct(e){e.children.sort(function(e,t){return e.zIndex=e.zIndex||0,t.zIndex=t.zIndex||0,e.zIndex-t.zIndex})}function dt(e,t){if(e&&"debug"in e&&console.log("invoke("+t+"): "+e.debug),e&&"function"==typeof e[t]){for(var n,r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return(n=e[t]).call.apply(n,[e].concat(i))}}function ft(e){if("function"==typeof e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}}function ht(e,t){return(e%t+t)%t}function pt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;return{x:e.x+(t.x-e.x)*n,y:e.y+(t.y-e.y)*n}}function vt(e){var t=void 0;return e.text?(t=new PIXI.Text(e.text,e.style),console.warn("Memory leak will occur soon, do not use PIXI.Text objects...")):e.texture?(t=new PIXI.Sprite(e.texture),t.anchor.x=e.anchor.x,t.anchor.y=e.anchor.y,t.tint=e.tint):t=new PIXI.Container,t.x=e.x,t.y=e.y,t.scale.x=e.scale.x,t.scale.y=e.scale.y,t.zIndex=e.zIndex,t.alpha=e.alpha,t.visible=e.visible,t.rotation=e.rotation,t}function _t(e){var t=vt(e);if(e.children){var n=!0,r=!1,i=void 0;try{for(var o,a=e.children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t.addChild(_t(s))}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}return t}function yt(e,t){return Math.floor(Math.random()*(t-e))+e}function mt(e){if(e.length)return e[yt(0,e.length)]}function gt(e){return e.has("sprite")?e.get("sprite").zIndex||0:0}function bt(e){return hs(e,function(e){return gt(e)})}function kt(e){return e?new PIXI.Sprite(PIXI.utils.TextureCache[e+".png"]):new PIXI.Sprite}function wt(e,t){var n=e.get("sprite");if(n){var r=n.sprite,i=kt(t);if(i)return i.anchor.set(.5),r.addChild(i),t}}function xt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 16711680*((e&_s.r)>>2)+65280*((e&_s.g)>>1)+255*(e&_s.b)}function At(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new Set(e.split("").filter(function(e){return e in _s}));return vs([].concat(Qt(t)).map(function(e){return _s[e]}))}function St(e,t){return e.x*t.y>e.y*t.x}function Tt(e){if(!e)return!1;var t=e.get("life");return t&&t.points>0}function Pt(e,t,n){var r={x:Math.floor(n.x/e.width),y:Math.floor(n.y/e.height)},i={x:n.x-e.width*r.x- -t.x*r.y,y:n.y-e.height*r.y- -t.y*r.x};return i.x<0||i.y<0||i.x>=e.width||i.y>=e.height?0===t.x||0===t.y?{x:ht(i.x,e.width),y:ht(i.y,e.height)}:null:i}function Ot(e){return Boolean(e&&e.valid()&&e.has("timeImmune"))}function It(e){e.has("render")&&e.set("toRender")}function Lt(e){var t="dead";return Tt(e)&&(t=wu[ut(e.get("direction"))]||wu.default),"player_"+t}function Et(e){return Su[2+e.x+2*e.y]||Su[0]}function jt(e){var t=null,n=Gs.find(e,void 0,"receivingLaser");if(n){var r=n.get("receivingLaser");r&&(t=r.color3)}return t}function zt(e){return e&&e.get("primary")===e.get("secondary")}function Ct(e){return"post_"+(e.get("colorPost").down?"down":"up")}function Mt(e){return e>0?"positive":e<0?"negative":"zero"}function Dt(e){var t=e.get("axis");return"block_offset_"+t+"_"+Mt(bs.offset[t])}function Bt(){PIXI.settings.SCALE_MODE=PIXI.SCALE_MODES.NEAREST,document.body.appendChild(Bs.view),PIXI.loader.add("textures","data/textures-1.json").load(Rt)}function Rt(e,t){Ds.initialize(),Bs.ticker.add(function(e){var t=Bs.ticker.elapsedMS/1e3;Ds.run(t)})}var Ft=e,Nt=t,Gt={invoke:Ft,isFunction:Nt},qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ht=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Vt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wt=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Ut=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Kt=function e(t,n,r,i){var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);null!==a&&e(a,n,r,i)}else if("value"in o&&o.writable)o.value=r;else{var s=o.set;void 0!==s&&s.call(i,r)}return r},$t=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Yt=function(e){return Array.isArray(e)?e:Array.from(e)},Qt=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},Jt=Gt.invoke,Zt=function(){function e(t,n){Ht(this,e),this.world=t,this._id=n,this.data={}}return Vt(e,[{key:"has",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.every(function(t){return t in e.data})}},{key:"get",value:function(e){return this.data[e]}},{key:"access",value:function(e){if(!this.has(e)){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.set.apply(this,[e].concat(n))}return this.data[e]}},{key:"set",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.valid()&&e in this.world.components?this.data[e]=new(Function.prototype.bind.apply(this.world.components[e],[null].concat([this],n))):n.length>0?this.data[e]=n[0]:this.data[e]={},this.valid()&&this.world.index.add(this,e),Jt.apply(void 0,[this.data[e],"onCreate",this].concat(n)),this}},{key:"update",value:function(e,t){var n=this.access(e);for(var r in t)n[r]=t[r];return this}},{key:"remove",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;u in this.data&&(Jt(this.data[u],"onRemove"),this.valid()&&this.world.index.remove(this,u),delete this.data[u])}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this}},{key:"removeAll",value:function(){if(this.remove.apply(this,Qt(this.components)),this.components.length>0)throw new Error("Failed to remove all components. Components must have been added during the removeAll().");return this}},{key:"destroy",value:function(){this.removeAll(),this.valid()&&(this.world.entities.delete(this._id),this._id=void 0)}},{key:"valid",value:function(){return this.world&&void 0!==this._id}},{key:"toString",value:function(){return String(this._id)}},{key:"toJSON",value:function(){return JSON.stringify(this.data)}},{key:"fromJSON",value:function(e){var t=JSON.parse(e);for(var n in t){var r=this.access(n);"function"==typeof r.fromJSON?r.fromJSON(t[n]):this.update(n,t[n])}return this}},{key:"attach",value:function(e){if(e&&!this.valid()){var t;this.world=e,this._id=this.world.idCounter++,this.world.entities.set(this._id,this),(t=this.world.index).add.apply(t,[this].concat(Qt(this.components)))}}},{key:"detach",value:function(){if(this.valid()){var e;(e=this.world.index).remove.apply(e,[this].concat(Qt(this.components))),this.world.entities.delete(this._id),this._id=void 0,this.world=void 0}}},{key:"id",get:function(){return this._id},set:function(e){throw new Error("Cannot set entity id")}},{key:"components",get:function(){return Object.keys(this.data)},set:function(e){throw new Error("Cannot set components in this way. See entity.set().")}}]),e}(),en=Zt,tn={Entity:en},nn=r(function(e){!function(t){function n(e,t,n,r){var o=t&&t.prototype instanceof i?t:i,a=Object.create(o.prototype),s=new h(r||[]);return a._invoke=l(e,n,s),a}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function a(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function u(e){function t(n,i,o,a){var s=r(e[n],e,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"===(void 0===l?"undefined":qt(l))&&m.call(l,"__await")?Promise.resolve(l.__await).then(function(e){t("next",e,o,a)},function(e){t("throw",e,o,a)}):Promise.resolve(l).then(function(e){u.value=e,o(u)},a)}a(s.arg)}function n(e,n){function r(){return new Promise(function(r,i){t(e,n,r,i)})}return i=i?i.then(r,r):r()}var i;this._invoke=n}function l(e,t,n){var i=A;return function(o,a){if(i===T)throw new Error("Generator is already running");if(i===P){if("throw"===o)throw a;return v()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=c(s,n);if(u){if(u===O)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===A)throw i=P,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=T;var l=r(e,t,n);if("normal"===l.type){if(i=n.done?P:S,l.arg===O)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=P,n.method="throw",n.arg=l.arg)}}}function c(e,t){var n=e.iterator[t.method];if(n===_){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=_,c(e,t),"throw"===t.method))return O;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return O}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,O;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=_),t.delegate=null,O):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,O)}function d(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(d,this),this.reset(!0)}function p(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(m.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=_,t.done=!0,t};return r.next=r}}return{next:v}}function v(){return{value:_,done:!0}}var _,y=Object.prototype,m=y.hasOwnProperty,g="function"==typeof Symbol?Symbol:{},b=g.iterator||"@@iterator",k=g.asyncIterator||"@@asyncIterator",w=g.toStringTag||"@@toStringTag",x=t.regeneratorRuntime;if(x)return void(e.exports=x);x=t.regeneratorRuntime=e.exports,x.wrap=n;var A="suspendedStart",S="suspendedYield",T="executing",P="completed",O={},I={};I[b]=function(){return this};var L=Object.getPrototypeOf,E=L&&L(L(p([])));E&&E!==y&&m.call(E,b)&&(I=E);var j=a.prototype=i.prototype=Object.create(I);o.prototype=j.constructor=a,a.constructor=o,a[w]=o.displayName="GeneratorFunction",x.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},x.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,w in e||(e[w]="GeneratorFunction")),e.prototype=Object.create(j),e},x.awrap=function(e){return{__await:e}},s(u.prototype),u.prototype[k]=function(){return this},x.AsyncIterator=u,x.async=function(e,t,r,i){var o=new u(n(e,t,r,i));return x.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},s(j),j[w]="Generator",j[b]=function(){return this},j.toString=function(){return"[object Generator]"},x.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},x.values=p,h.prototype={constructor:h,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=_,this.done=!1,this.delegate=null,this.method="next",this.arg=_,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&m.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=_)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=_),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=m.call(i,"catchLoc"),s=m.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,O):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),O},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),f(n),O}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;f(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:p(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=_),O}}}(function(){return this}()||Function("return this")())}),rn=function(){return this}()||Function("return this")(),on=rn.regeneratorRuntime&&Object.getOwnPropertyNames(rn).indexOf("regeneratorRuntime")>=0,an=on&&rn.regeneratorRuntime;rn.regeneratorRuntime=void 0;var sn=nn;if(on)rn.regeneratorRuntime=an;else try{delete rn.regeneratorRuntime}catch(e){rn.regeneratorRuntime=void 0}var un=sn,ln=function(e,t,n,r){return t<r[e]?n:e},cn=function(){function e(t){Ht(this,e),this.world=t,this.clear()}return Vt(e,[{key:"clear",value:function(){this.index={}}},{key:"access",value:function(e){return this.index[e]||(this.index[e]=new Map)}},{key:"query",value:un.mark(function e(){for(var t=this,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o,a,s,u,l,c,d,f;return un.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==r.length){e.next=3;break}return e.delegateYield(this.world.entities.values(),"t0",2);case 2:return e.abrupt("return");case 3:o=r.map(function(e){return t.access(e).size}).reduce(ln,0),a=r[o],s=!0,u=!1,l=void 0,e.prev=8,c=this.index[a].values()[Symbol.iterator]();case 10:if(s=(d=c.next()).done){e.next=18;break}if(f=d.value,!f.has.apply(f,r)){e.next=15;break}return e.next=15,f;case 15:s=!0,e.next=10;break;case 18:e.next=24;break;case 20:e.prev=20,e.t1=e.catch(8),u=!0,l=e.t1;case 24:e.prev=24,e.prev=25,!s&&c.return&&c.return();case 27:if(e.prev=27,!u){e.next=30;break}throw l;case 30:return e.finish(27);case 31:return e.finish(24);case 32:case"end":return e.stop()}},e,this,[[8,20,24,32],[25,,27,31]])})},{key:"add",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=!0,o=!1,a=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;this.access(l).set(e.id,e)}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}}},{key:"remove",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=!0,o=!1,a=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;this.access(l).delete(e.id)}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}}}]),e}(),dn=cn,fn={SimpleIndex:dn},hn=Gt.invoke,pn=Gt.isFunction,vn=tn.Entity,_n=fn.SimpleIndex,yn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_n;Ht(this,e),this.systems=[],this.entities=new Map,this.components={},this.entityTemplates={},this.idCounter=1,this.index=new t(this)}return Vt(e,[{key:"clear",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.entities[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value,a=$t(o,2),s=(a[0],a[1]);for(var u in s.data){var l=s.data[u];hn(l,"onRemove")}}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}this.entities=new Map,this.index.clear()}},{key:"component",value:function(e,t){if(pn(t))return this.components[e]=t,e}},{key:"entity",value:function(e){var t=this.idCounter++,n=new vn(this,t);if(e&&e in this.entityTemplates){var r=this.entityTemplates[e];for(var i in r){var o=JSON.parse(r[i]);n.update(i,o)}}return this.entities.set(t,n),n}},{key:"system",value:function(){for(var e=[],t=void 0,n=void 0,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];if(Array.isArray(i[0])?(e=i[0],t=i[1],n=i.slice(2)):(t=i[0],n=i.slice(1)),pn(t)){var a=new(Function.prototype.bind.apply(t,[null].concat(Qt(n))));return a.components=e,this.systems.push(a)-1}}},{key:"initialize",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=this.systems[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;hn.apply(void 0,[u,"initialize"].concat(t))}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}},{key:"run",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=this.systems[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;hn.apply(void 0,[u,"pre"].concat(t)),pn(u.every)&&this.every.apply(this,[u.components,u.every.bind(u)].concat(t)),hn.apply(void 0,[u,"post"].concat(t))}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}},{key:"every",value:function(e,t){var n,r=(n=this.index).query.apply(n,Qt(e));if(!pn(t))return r;for(var i=arguments.length,o=Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];var s=!0,u=!1,l=void 0;try{for(var c,d=r[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var f=c.value;if("break"===function(n){var r=e.map(function(e){return n.get(e)});if(!1===t.apply(void 0,Qt(r).concat([n],o)))return"break"}(f))break}}catch(e){u=!0,l=e}finally{try{!s&&d.return&&d.return()}finally{if(u)throw l}}}},{key:"get",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return[].concat(Qt(this.every(t)))}},{key:"prototype",value:function(e){var t=0;if("string"==typeof e&&(e=JSON.parse(e)),"object"===(void 0===e?"undefined":qt(e)))for(var n in e){var r=e[n],i={};for(var o in r)i[o]=JSON.stringify(r[o]);this.entityTemplates[n]=i,++t}
return t}}]),e}(),mn=yn,gn={World:mn},bn=(function(){function e(t){Ht(this,e),this.world=t,this.clear()}Vt(e,[{key:"clear",value:function(){this.index={}}},{key:"query",value:un.mark(function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i;return un.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=3;break}return e.delegateYield(this.world.entities.values(),"t0",2);case 2:return e.abrupt("return");case 3:if(!((i=this.hashComponents(n))in this.index)){e.next=7;break}return e.delegateYield(this.index[i].entities.values(),"t1",6);case 6:return e.abrupt("return");case 7:return e.delegateYield(this.build(i,n).entities.values(),"t2",8);case 8:case"end":return e.stop()}},e,this)})},{key:"hashComponents",value:function(e){return JSON.stringify(e.sort())}},{key:"build",value:function(e,t){var n=new Map,r=!0,i=!1,o=void 0;try{for(var a,s=this.world.entities[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,l=$t(u,2),c=(l[0],l[1]);c.has.apply(c,Qt(t))&&n.set(c.id,c)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.index[e]={components:new Set(t),entities:n}}},{key:"add",value:function(e){for(var t in this.index){var n=this.index[t];e.has.apply(e,Qt(n.components))&&n.entities.set(e.id,e)}}},{key:"remove",value:function(e){for(var t=this,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o in this.index)!function(n){var i=t.index[n];r.some(function(e){return i.components.has(e)})&&i.entities.delete(e.id)}(o)}}])}(),gn.World),kn=i,wn="object"==("undefined"==typeof global?"undefined":qt(global))&&global&&global.Object===Object&&global,xn=wn,An="object"==("undefined"==typeof self?"undefined":qt(self))&&self&&self.Object===Object&&self,Sn=xn||An||Function("return this")(),Tn=Sn,Pn=Tn.Symbol,On=Pn,In=Object.prototype,Ln=In.hasOwnProperty,En=In.toString,jn=On?On.toStringTag:void 0,zn=o,Cn=Object.prototype,Mn=Cn.toString,Dn=a,Bn="[object Null]",Rn="[object Undefined]",Fn=On?On.toStringTag:void 0,Nn=s,Gn=u,qn="[object Arguments]",Hn=l,Vn=Object.prototype,Xn=Vn.hasOwnProperty,Wn=Vn.propertyIsEnumerable,Un=Hn(function(){return arguments}())?Hn:function(e){return Gn(e)&&Xn.call(e,"callee")&&!Wn.call(e,"callee")},Kn=Un,$n=Array.isArray,Yn=$n,Qn=On?On.isConcatSpreadable:void 0,Jn=c,Zn=d,er=f,tr=h,nr=p,rr=v,ir=Array.prototype,or=ir.splice,ar=_,sr=y,ur=m,lr=g;b.prototype.clear=tr,b.prototype.delete=ar,b.prototype.get=sr,b.prototype.has=ur,b.prototype.set=lr;var cr=b,dr=k,fr=w,hr=x,pr=A,vr=S,_r="[object AsyncFunction]",yr="[object Function]",mr="[object GeneratorFunction]",gr="[object Proxy]",br=T,kr=Tn["__core-js_shared__"],wr=kr,xr=function(){var e=/[^.]+$/.exec(wr&&wr.keys&&wr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ar=P,Sr=Function.prototype,Tr=Sr.toString,Pr=O,Or=/[\\^$.*+?()[\]{}|]/g,Ir=/^\[object .+?Constructor\]$/,Lr=Function.prototype,Er=Object.prototype,jr=Lr.toString,zr=Er.hasOwnProperty,Cr=RegExp("^"+jr.call(zr).replace(Or,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Mr=I,Dr=L,Br=E,Rr=Br(Tn,"Map"),Fr=Rr,Nr=Br(Object,"create"),Gr=Nr,qr=j,Hr=z,Vr="__lodash_hash_undefined__",Xr=Object.prototype,Wr=Xr.hasOwnProperty,Ur=C,Kr=Object.prototype,$r=Kr.hasOwnProperty,Yr=M,Qr="__lodash_hash_undefined__",Jr=D;B.prototype.clear=qr,B.prototype.delete=Hr,B.prototype.get=Ur,B.prototype.has=Yr,B.prototype.set=Jr;var Zr=B,ei=R,ti=F,ni=N,ri=G,ii=q,oi=H,ai=V;X.prototype.clear=ei,X.prototype.delete=ri,X.prototype.get=ii,X.prototype.has=oi,X.prototype.set=ai;var si=X,ui=200,li=W;U.prototype.clear=dr,U.prototype.delete=fr,U.prototype.get=hr,U.prototype.has=pr,U.prototype.set=li;var ci=U,di="__lodash_hash_undefined__",fi=K,hi=$;Y.prototype.add=Y.prototype.push=fi,Y.prototype.has=hi;var pi=Y,vi=Q,_i=J,yi=1,mi=2,gi=Z,bi=Tn.Uint8Array,ki=bi,wi=ee,xi=te,Ai=1,Si=2,Ti="[object Boolean]",Pi="[object Date]",Oi="[object Error]",Ii="[object Map]",Li="[object Number]",Ei="[object RegExp]",ji="[object Set]",zi="[object String]",Ci="[object Symbol]",Mi="[object ArrayBuffer]",Di="[object DataView]",Bi=On?On.prototype:void 0,Ri=Bi?Bi.valueOf:void 0,Fi=ne,Ni=re,Gi=ie,qi=oe,Hi=Object.prototype,Vi=Hi.propertyIsEnumerable,Xi=Object.getOwnPropertySymbols,Wi=Xi?function(e){return null==e?[]:(e=Object(e),Gi(Xi(e),function(t){return Vi.call(e,t)}))}:qi,Ui=Wi,Ki=ae,$i=se,Yi=r(function(e,t){var n=t&&!t.nodeType&&t,r=n&&!0&&e&&!e.nodeType&&e,i=r&&r.exports===n,o=i?Tn.Buffer:void 0,a=o?o.isBuffer:void 0,s=a||$i;e.exports=s}),Qi=9007199254740991,Ji=/^(?:0|[1-9]\d*)$/,Zi=ue,eo=9007199254740991,to=le,no={};no["[object Float32Array]"]=no["[object Float64Array]"]=no["[object Int8Array]"]=no["[object Int16Array]"]=no["[object Int32Array]"]=no["[object Uint8Array]"]=no["[object Uint8ClampedArray]"]=no["[object Uint16Array]"]=no["[object Uint32Array]"]=!0,no["[object Arguments]"]=no["[object Array]"]=no["[object ArrayBuffer]"]=no["[object Boolean]"]=no["[object DataView]"]=no["[object Date]"]=no["[object Error]"]=no["[object Function]"]=no["[object Map]"]=no["[object Number]"]=no["[object Object]"]=no["[object RegExp]"]=no["[object Set]"]=no["[object String]"]=no["[object WeakMap]"]=!1;var ro=ce,io=de,oo=r(function(e,t){var n=t&&!t.nodeType&&t,r=n&&!0&&e&&!e.nodeType&&e,i=r&&r.exports===n,o=i&&xn.process,a=function(){try{var e=r&&r.require&&r.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=a}),ao=oo&&oo.isTypedArray,so=ao?io(ao):ro,uo=so,lo=Object.prototype,co=lo.hasOwnProperty,fo=fe,ho=Object.prototype,po=he,vo=pe,_o=vo(Object.keys,Object),yo=_o,mo=Object.prototype,go=mo.hasOwnProperty,bo=ve,ko=_e,wo=ye,xo=me,Ao=1,So=Object.prototype,To=So.hasOwnProperty,Po=ge,Oo=Br(Tn,"DataView"),Io=Oo,Lo=Br(Tn,"Promise"),Eo=Lo,jo=Br(Tn,"Set"),zo=jo,Co=Br(Tn,"WeakMap"),Mo=Co,Do=Pr(Io),Bo=Pr(Fr),Ro=Pr(Eo),Fo=Pr(zo),No=Pr(Mo),Go=Nn;(Io&&"[object DataView]"!=Go(new Io(new ArrayBuffer(1)))||Fr&&"[object Map]"!=Go(new Fr)||Eo&&"[object Promise]"!=Go(Eo.resolve())||zo&&"[object Set]"!=Go(new zo)||Mo&&"[object WeakMap]"!=Go(new Mo))&&(Go=function(e){var t=Nn(e),n="[object Object]"==t?e.constructor:void 0,r=n?Pr(n):"";if(r)switch(r){case Do:return"[object DataView]";case Bo:return"[object Map]";case Ro:return"[object Promise]";case Fo:return"[object Set]";case No:return"[object WeakMap]"}return t});var qo=Go,Ho=1,Vo="[object Arguments]",Xo="[object Array]",Wo="[object Object]",Uo=Object.prototype,Ko=Uo.hasOwnProperty,$o=be,Yo=ke,Qo=1,Jo=2,Zo=we,ea=xe,ta=Ae,na=Se,ra=Te,ia="[object Symbol]",oa=Pe,aa=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sa=/^\w*$/,ua=Oe,la="Expected a function";Ie.Cache=si;var ca=Ie,da=500,fa=Le,ha=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pa=/\\(\\)?/g,va=fa(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ha,function(e,n,r,i){t.push(r?i.replace(pa,"$1"):n||e)}),t}),_a=va,ya=1/0,ma=On?On.prototype:void 0,ga=ma?ma.toString:void 0,ba=Ee,ka=je,wa=ze,xa=1/0,Aa=Ce,Sa=Me,Ta=De,Pa=Be,Oa=Re,Ia=Fe,La=1,Ea=2,ja=Ne,za=Ge,Ca=qe,Ma=He,Da=Ve,Ba=Xe,Ra=We,Fa=Ra(),Na=Fa,Ga=Ue,qa=Ke,Ha=qa(Ga),Va=Ha,Xa=$e,Wa=Ye,Ua=Qe,Ka=Je,$a=Ze,Ya=et,Qa=Math.max,Ja=tt,Za=nt,es=function(){try{var e=Br(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),ts=es,ns=ts?function(e,t){return ts(e,"toString",{configurable:!0,enumerable:!1,value:Za(t),writable:!0})}:za,rs=ns,is=800,os=16,as=Date.now,ss=rt,us=ss(rs),ls=us,cs=it,ds=ot,fs=cs(function(e,t){if(null==e)return[];var n=t.length;return n>1&&ds(e,t[0],t[1])?t=[]:n>2&&ds(t[0],t[1],t[2])&&(t=[t[0]]),$a(e,Zn(t,1),[])}),hs=fs,ps=at,vs=st;Array.prototype.top=function(){if(this.length>=1)return this[this.length-1]};var _s={r:4,g:2,b:1},ys=function(){function e(){Ht(this,e),this.gameSize=this.getGameSize()}return Vt(e,[{key:"clear",value:function(){this.bounds=void 0}},{key:"update",value:function(){this.gameSize=this.getGameSize(),this.bounds=this.getBounds(),this.levelCenter=this.getLevelCenter(this.bounds),this.levelSize=this.getLevelSize(this.bounds)}},{key:"getGameSize",value:function(){return{width:window.innerWidth,height:window.innerHeight}}},{key:"getBounds",value:function(){var e={};return e.upperLeft={x:1/0,y:1/0},e.bottomRight={x:-1/0,y:-1/0},Ds.every(["partOfLayer","position"],function(t,n){e.upperLeft.x=Math.min(e.upperLeft.x,n.x),e.upperLeft.y=Math.min(e.upperLeft.y,n.y),e.bottomRight.x=Math.max(e.bottomRight.x,n.x),e.bottomRight.y=Math.max(e.bottomRight.y,n.y)}),e.size={width:1+e.bottomRight.x-e.upperLeft.x,height:1+e.bottomRight.y-e.upperLeft.y},e}},{key:"getLevelCenter",value:function(e){return qs.getVisualPosition({x:(e.bottomRight.x+e.upperLeft.x)/2,y:(e.bottomRight.y+e.upperLeft.y)/2})}},{key:"getLevelSize",value:function(e){var t=qs.getVisualPosition(this.bounds.upperLeft),n=qs.getVisualPosition({x:this.bounds.bottomRight.x+1,y:this.bounds.bottomRight.y+1});return{width:n.x-t.x,height:n.y-t.y}}},{key:"getZeroPosition",value:function(e){return{x:e.x-this.bounds.upperLeft.x,y:e.y-this.bounds.upperLeft.y}}},{key:"getFullPosition",value:function(e){return{x:e.x+this.bounds.upperLeft.x,y:e.y+this.bounds.upperLeft.y}}}]),e}(),ms=new ys,gs=function(){function e(){Ht(this,e),this._offset={x:0,y:0}}return Vt(e,[{key:"applyOffsetEffects",value:function(){Gs.offset=this._offset,Hs.offset=this._offset,Hs.fullUpdate=!0,Hs.update(),Ds.every(["wall"],function(e,t){t.set("computeWallShape")}),Ds.every(["offsetBlock"],function(e,t){t.set("toRender")})}},{key:"setOffset",value:function(e,t,n){var r={x:ms.bounds.size.width,y:ms.bounds.size.height},i=this._offset[t]>0||0===this._offset[t]&&n<0?-r[e]:r[e];this._offset[e]=ht(n,i),this.applyOffsetEffects()}},{key:"offset",set:function(e){e.x===this._offset.x&&e.y===this._offset.y||(this._offset={x:e.x,y:e.y},this.applyOffsetEffects())},get:function(){return this._offset}},{key:"offsetX",set:function(e){this.setOffset("x","y",e)},get:function(){return this._offset.x}},{key:"offsetY",set:function(e){this.setOffset("y","x",e)},get:function(){return this._offset.y}}]),e}(),bs=new gs,ks=function(){function e(){Ht(this,e),this.clear()}return Vt(e,[{key:"clear",value:function(){this.index={},this.previous={},this.offset={x:0,y:0}}},{key:"update",value:function(e){var t=!1,n=e.get("position");if(n&&e.valid()){t=this.wrap(n);var r=ut(n);r in this.index||(this.index[r]=new Map),this.index[r].has(e.id)||(this.index[r].set(e.id,e),e.id in this.previous&&this.index[this.previous[e.id]].delete(e.id),this.previous[e.id]=r)}return t}},{key:"get",value:function(e){if(e){var t=this.getWrapped(e);if(t){var n=this.index[ut(t)];if(n)return n}}return new Map}},{key:"getSorted",value:function(e){var t=this.get(e);return bt([].concat(Qt(t.values())))}},{key:"remove",value:function(e){var t=e.get("position");if(t){var n=ut(t);n in this.index&&this.index[n].delete(e.id),delete this.previous[e.id]}}},{key:"has",value:function(e){for(var t=this.get(e),n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=!0,a=!1,s=void 0;try{for(var u,l=t.values()[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;if(c.has.apply(c,r))return!0}}catch(e){a=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw s}}return!1}},{key:"find",value:function(e,t){for(var n=this.getSorted(e),r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];var a=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var d=l.value;if(d.has.apply(d,i)&&(!t||t.id!==d.id))return d}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},{key:"every",value:function(e,t,n){var r=this.getSorted(e),i=!0,o=!1,a=void 0;try{for(var s,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;!function(e){if(e.has.apply(e,Qt(t))){var r=t.map(function(t){return e.get(t)});n.apply(void 0,Qt(r).concat([e]))}}(l)}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}}},{key:"count",value:function(e){for(var t=0,n=this.get(e),r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=!0,s=!1,u=void 0;try{for(var l,c=n.values()[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var d=l.value;d.has.apply(d,i)&&++t}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}return t}},{key:"getWrapped",value:function(e){if(ms.bounds&&e){var t=ms.getZeroPosition(e),n=Pt(ms.bounds.size,this.offset,t);if(!n)return n;if(n.x!==t.x||n.y!==t.y)return ms.getFullPosition(n)}return e}},{key:"wrap",value:function(e){if(e){var t=this.getWrapped(e);if(t&&(e._x!==t.x||e._y!==t.y))return e._x=t.x,e._y=t.y,!0}return!1}}]),e}(),ws=function(){function e(){Ht(this,e),this.loaders={},this.loadTile=this.loadTile.bind(this),this.middlewares=[]}return Vt(e,[{key:"setData",value:function(e){this.levels=e.levels,this.options={tileSize:e.tileSize,idToName:e.idToName,nameToId:e.nameToId}}},{key:"middleware",value:function(e){"function"==typeof e&&this.middlewares.push(e)}},{key:"register",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s in this.loaders?this.loaders[s].push(t):this.loaders[s]=[t]}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}},{key:"invokeLoaders",value:function(e,t){if(e.name in this.loaders){var n=!0,r=!1,i=void 0;try{for(var o,a=this.loaders[e.name][Symbol.iterator]();!(n=(o=a.next()).done);n=!0){(0,o.value)(t,e)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}}},{key:"loadTile",value:function(e,t){var n=this.createEntity(e,t);return this.invokeLoaders(e,n),n}},{key:"loadTiles",value:function(e){ms.clear(),this.clearEntities(),this.forEachTile(this.levels[e],this.loadTile),ms.update()}},{key:"forEachTile",value:function(e,t){this.level=e;for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];for(var o in e.data){var a=e.data[o],s=0,u=!0,l=!1,c=void 0;try{for(var d,f=a[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var h=d.value;if(h in this.options.idToName){var p={id:o,name:this.options.idToName[h],position:lt(o),spritePosition:this.getVisualPosition(lt(o)),layerLevel:s};t.apply(void 0,[p].concat(r))}++s}}catch(e){l=!0,c=e}finally{try{!u&&f.return&&f.return()}finally{if(l)throw c}}}}},{key:"getVisualPosition",value:function(e){return{x:e.x*this.options.tileSize.width,y:e.y*this.options.tileSize.height}}},{key:"createEntity",value:function(e,t){t=t||e.layerLevel+1;var n=Ds.entity().set("position",e.position.x,e.position.y).set("sprite",Ns,e.name,t,e.spritePosition).set("partOfLayer",e.layer),r=!0,i=!1,o=void 0;try{for(var a,s=this.middlewares[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){(0,a.value)({entity:n,tile:e,loaders:this.loaders})}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}},{key:"clearEntities",value:function(){Ds.every(["partOfLayer"],function(e,t){t.destroy()})}}]),e}(),xs=function(){function e(){Ht(this,e),this.buckets=new PIXI.Container,this.index=new Map,this.toUpdate=new Set}return Vt(e,[{key:"clear",value:function(){this.buckets.removeChildren(),this.index.clear(),this.toUpdate.clear()}},{key:"addChild",value:function(e){var t=parseInt(e.zIndex)||0;e.zIndex=t,this.index.has(t)||this.addBucket(t),this.getBucket(t).addChild(e),this.toUpdate.add(t)}},{key:"removeChild",value:function(e){var t=parseInt(e.zIndex)||0;this.index.has(t)&&(this.getBucket(t).removeChild(e),this.toUpdate.add(t))}},{key:"getBucket",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.buckets.children[this.index.get(e)]}},{key:"addBucket",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new PIXI.Container;t.zIndex=e,this.buckets.addChild(t),ct(this.buckets),this.index=this.build(this.buckets)}},{key:"build",value:function(e){var t=new Map;return e.children.forEach(function(e,n){t.set(e.zIndex,n)}),t}}]),e}(),As=function(){function e(){Ht(this,e),this.data={}}return Vt(e,[{key:"exists",value:function(e){return this.data[e]&&this.data[e].length>0}},{key:"count",value:function(e){return e in this.data?this.data[e].length:0}},{key:"send",value:function(e,t){e in this.data||(this.data[e]=[]),this.data[e].push(t)}},{key:"replace",value:function(e,t){this.clear(e),this.send(e,t)}},{key:"first",value:function(e,t){if(e in this.data){var n=this.data[e],r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){return a.value}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}return t}},{key:"loop",value:function(e,t){if(e in this.data){var n=this.data[e],r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){t(a.value)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}}},{key:"process",value:function(e,t){this.loop(e,t),this.clear(e)}},{key:"clear",value:function(e){delete this.data[e]}},{key:"clearAll",value:function(){this.data={}}}]),e}(),Ss=new As,Ts=function(){function e(t,n,r){Ht(this,e),this.stage=t.buckets,this.buckets=t,this.app=n,this.outputStage=r,this.gridSize={},this.offset={x:0,y:0}}return Vt(e,[{key:"generateSprites",value:function(e){var t=new PIXI.Container;t.zIndex=e.zIndex;var n=!0,r=!1,i=void 0;try{for(var o,a=this.levelPositions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=_t(e);u.x=s.x,u.y=s.y,t.addChild(u)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return t}},{key:"runFullUpdate",value:function(){this.outputStage.removeChildren();var e=!0,t=!1,n=void 0;try{for(var r,i=this.stage.children[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value,a=this.generateSprites(o);this.outputStage.addChild(a)}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}},{key:"runSmartUpdate",value:function(){for(var e=0;e<this.outputStage.children.length;){var t=this.outputStage.children[e].zIndex;this.buckets.toUpdate.has(t)?this.outputStage.removeChildAt(e):++e}var n=!0,r=!1,i=void 0;try{for(var o,a=this.stage.children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(this.buckets.toUpdate.has(s.zIndex)){var u=this.generateSprites(s);this.outputStage.addChild(u)}}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}ct(this.outputStage)}},{key:"renderLayers",value:function(){this.fullUpdate||this.outputStage.children.length!==this.stage.children.length?(this.runFullUpdate(),this.fullUpdate=void 0):this.runSmartUpdate(),this.buckets.toUpdate.clear()}},{key:"generateLevelPositions",value:function(e,t,n){for(var r=[],i=new PIXI.Rectangle(-e.x/t/2-this.bounds.x-this.bounds.width,-e.y/t/2-this.bounds.y-this.bounds.height,e.x/t+2*this.bounds.width,e.y/t+2*this.bounds.height),o=-this.gridSize.y;o<=this.gridSize.y;++o)for(var a=-this.gridSize.x;a<=this.gridSize.x;++a){var s={x:a*ms.bounds.size.width+-this.offset.x*o,y:o*ms.bounds.size.height+-this.offset.y*a},u={x:s.x*qs.options.tileSize.width-this.bounds.x,y:s.y*qs.options.tileSize.height-this.bounds.y};i.contains(u.x,u.y)&&r.push(u)}return r}},{key:"update",value:function(e){if(this.bounds=e||this.bounds,!this.bounds)return void console.warn("this.bounds is not defined, skipping this update");var t={x:this.app.renderer.width,y:this.app.renderer.height},n={x:Math.ceil(t.x/(this.bounds.width*this.scale))+1,y:Math.ceil(t.y/(this.bounds.height*this.scale))+1};this.gridSize.x===n.x&&this.gridSize.y===n.y||(this.gridSize=n,this.fullUpdate=!0),this.fullUpdate&&(this.levelPositions=this.generateLevelPositions(t,this.scale,ms.bounds.size)),this.renderLayers()}},{key:"scale",get:function(){return this.outputStage.scale.x},set:function(e){e=Math.max(Math.min(e,8),.5),this.outputStage.scale.x=e,this.outputStage.scale.y=e,Ss.send("updateCamera")}}]),e}(),Ps={74:"floor",84:"level_start",112:"wall",141:"floor_laser",144:"block_goal",181:"block_mirror_ur_dl",182:"block_mirror_ul_dr",183:"block_mirror_dl",184:"block_mirror_ur",185:"block_mirror_dr",186:"block_mirror_ul",197:"offset_placeholder_positive",198:"offset_placeholder_negative",199:"color",200:"color_rgb",201:"color_rb",202:"color_gb",203:"color_rg",204:"color_b",205:"color_g",206:"color_r",208:"level_goal",209:"block_mirror_bu",210:"block_mirror_bl",211:"block_mirror_bd",212:"block_mirror_br",213:"wall_laser",214:"wall_player",215:"time_immune_changer",216:"heart",217:"post_up"},Os=[{data:{"1,1":[112],"1,2":[112],"1,3":[112],"1,4":[112],"2,1":[74,0,0,84],"2,2":[74],"2,3":[74],"2,4":[112],"3,1":[74],"3,2":[74],"3,3":[74],"3,4":[112],"4,1":[112],"4,2":[112],"4,3":[214],"4,4":[112],"5,1":[74],"5,2":[74],"5,3":[74],"5,4":[112],"6,1":[74,208],"6,2":[74],"6,3":[74],"6,4":[112]},name:"Placeholder 2,1",start:"2,1"},{data:{"10,1":[74],"10,2":[74],"10,3":[74],"10,4":[112],"11,1":[74],"11,2":[74,0,0,144,204],"11,3":[74],"11,4":[112],"12,1":[74],"12,2":[74,0,0,84],"12,3":[74,141,204],"12,4":[112],"13,1":[112],"13,2":[112],"13,3":[112],"13,4":[112],"8,1":[74,208],"8,2":[74,217,204],"8,3":[74],"8,4":[112],"9,1":[112],"9,2":[112],"9,3":[74],"9,4":[112]},name:"Placeholder 12,2",start:"12,2"},{data:{"15,1":[112],"15,2":[74],"15,3":[112],"15,4":[74],"16,1":[112],"16,2":[74],"16,3":[112],"16,4":[74,208],"17,1":[112],"17,2":[74],"17,3":[112],"17,4":[112],"18,1":[74,141,206],"18,2":[74],"18,3":[74],"18,4":[112],"19,1":[112],"19,2":[112],"19,3":[74],"19,4":[112],"20,1":[112],"20,2":[74],"20,3":[74,0,0,144,206],"20,4":[74,0,0,84],"21,1":[112],"21,2":[74],"21,3":[74],"21,4":[74],"22,1":[112],"22,2":[74],"22,3":[112],"22,4":[74,217,206]},name:"Placeholder 20,4",start:"20,4"},{data:{"24,1":[112],"24,2":[74],"24,3":[74],"24,4":[74],"25,1":[112],"25,2":[74],"25,3":[112],"25,4":[112],"26,1":[112],"26,2":[74],"26,3":[74],"26,4":[74],"27,1":[112],"27,2":[74],"27,3":[112],"27,4":[74],"28,1":[112],"28,2":[74,0,0,144,205],"28,3":[112],"28,4":[74],"29,1":[112],"29,2":[74,84],"29,3":[112],"29,4":[74],"30,1":[112],"30,2":[74,141,205],"30,3":[112],"30,4":[74],"31,1":[112],"31,2":[74,208],"31,3":[112],"31,4":[74],"32,1":[112],"32,2":[74,217,205],"32,3":[112],"32,4":[74]},name:"Placeholder 29,2",start:"29,2"},{data:{"34,1":[112],"34,2":[74],"34,3":[112],"34,4":[74,217,202],"35,1":[112],"35,2":[74],"35,3":[74,217,202],"35,4":[74,217,202],"36,1":[112],"36,2":[74],"36,3":[112],"36,4":[112],"37,1":[74],"37,2":[74],"37,3":[74,0,0,84],"37,4":[74],"38,1":[112],"38,2":[74,141,202],"38,3":[74,0,0,144,202],"38,4":[112],"39,1":[112],"39,2":[74],"39,3":[74],"39,4":[112],"40,1":[112],"40,2":[74],"40,3":[112],"40,4":[74,208]},name:"Placeholder 37,3",start:"37,3"},{data:{"42,1":[112],"42,2":[74],"42,3":[74],"42,4":[74],"42,5":[74],"42,6":[74],"43,1":[112],"43,2":[74,0,0,84],"43,3":[74],"43,4":[74],"43,5":[74],"43,6":[74],"44,1":[112],"44,2":[112],"44,3":[74],"44,4":[74],"44,5":[74],"44,6":[112],"45,1":[112],"45,2":[74],"45,3":[74],"45,4":[112],"45,5":[74],"45,6":[74],"46,1":[112],"46,2":[74],"46,3":[74,0,0,144,201],"46,4":[112],"46,5":[74,0,0,144,203],"46,6":[74],"47,1":[112],"47,2":[74],"47,3":[74],"47,4":[112],"47,5":[74],"47,6":[74],"48,1":[112],"48,2":[112],"48,3":[74,141,203],"48,4":[112],"48,5":[74,141,201],"48,6":[112],"49,1":[112],"49,2":[74,208],"49,3":[74,217,203],"49,4":[74],"49,5":[74,217,201],"49,6":[74],"50,1":[112],"50,2":[112],"50,3":[112],"50,4":[112],"50,5":[112],"50,6":[74]},name:"Placeholder 43,2",start:"43,2"},{data:{"52,1":[74],"52,2":[74],"52,3":[74],"52,4":[74,217,204],"52,5":[74,208],"52,6":[112],"53,1":[74],"53,2":[112],"53,3":[74],"53,4":[112],"53,5":[112],"53,6":[112],"54,1":[74],"54,2":[112],"54,3":[74],"54,4":[74,0,0,144,204],"54,5":[74,0,0,84],"54,6":[112],"55,1":[74],"55,2":[112],"55,3":[74,0,0,144,204],"55,4":[74,0,0,144,204],"55,5":[74],"55,6":[112],"56,1":[74],"56,2":[74],"56,3":[74],"56,4":[74],"56,5":[74],"56,6":[112],"57,1":[74],"57,2":[112],"57,3":[112],"57,4":[214],"57,5":[112],"57,6":[112],"58,1":[74],"58,2":[74],"58,3":[74],"58,4":[74],"58,5":[74],"58,6":[74],"59,1":[74],"59,2":[74],"59,3":[74,141,204],"59,4":[74,141,204],"59,5":[74,141,204],"59,6":[74],"60,1":[112],"60,2":[112],"60,3":[112],"60,4":[112],"60,5":[112],"60,6":[112]},name:"Placeholder 54,5",start:"54,5"},{data:{"62,1":[112],"62,2":[74,141,200],"62,3":[74],"62,4":[74,0,0,144,199],"62,5":[74],"62,6":[74,0,0,144,203],"62,7":[74],"63,1":[112],"63,2":[74,141,206],"63,3":[74,0,0,144,206],"63,4":[74],"63,5":[74,0,0,144,202],"63,6":[74],"63,7":[74,0,0,144,199],"64,1":[112],"64,2":[74,141,205],"64,3":[74],"64,4":[74,0,0,144,205],"64,5":[74],"64,6":[74,0,0,144,200],"64,7":[74],"65,1":[112],"65,2":[74,141,204],"65,3":[74,0,0,144,204],"65,4":[74],"65,5":[74,0,0,144,201],"65,6":[74],"65,7":[74,0,0,144,199],"66,1":[112],"66,2":[74,141,203],"66,3":[74],"66,4":[74,0,0,144,199],"66,5":[74],"66,6":[74,0,0,144,199],"66,7":[74],"67,1":[112],"67,2":[74,141,202],"67,3":[74],"67,4":[74],"67,5":[74],"67,6":[74],"67,7":[74],"68,1":[112],"68,2":[74,141,201],"68,3":[74],"68,4":[74,217,200],"68,5":[74,217,200],"68,6":[74,217,200],"68,7":[74],"69,1":[112],"69,2":[74,141,204],"69,3":[74,0,0,84],"69,4":[74,217,200],"69,5":[74,208],"69,6":[74,217,200],"69,7":[74],"70,1":[112],"70,2":[74,141,205],"70,3":[74],"70,4":[74,217,200],"70,5":[74,217,200],"70,6":[74,217,200],"70,7":[74],"71,1":[112],"71,2":[74,141,206],"71,3":[74],"71,4":[74],"71,5":[74],"71,6":[74],"71,7":[74]},name:"Placeholder 69,3",start:"69,3"},{data:{"73,1":[112],"73,10":[112],"73,11":[112],"73,2":[74],"73,3":[74],"73,4":[112],"73,5":[112],"73,6":[112],"73,7":[74],"73,8":[74],"73,9":[74],"74,1":[112],"74,10":[74],"74,11":[74],"74,2":[74,0,0,144,206],"74,3":[74],"74,4":[74],"74,5":[74],"74,6":[74],"74,7":[74],"74,8":[112],"74,9":[112],"75,1":[112],"75,10":[74],"75,11":[74],"75,2":[74],"75,3":[112],"75,4":[74],"75,5":[112],"75,6":[74],"75,7":[74],"75,8":[74],"75,9":[112],"76,1":[112],"76,10":[74],"76,11":[74],"76,2":[74],"76,3":[112],"76,4":[74],"76,5":[112],"76,6":[74],"76,7":[74],"76,8":[74],"76,9":[112],"77,1":[112],"77,10":[74],"77,11":[112],"77,2":[74],"77,3":[112],"77,4":[74],"77,5":[112],"77,6":[74],"77,7":[112],"77,8":[74],"77,9":[112],"78,1":[112],"78,10":[74],"78,11":[74,141,204],"78,2":[74],"78,3":[112],"78,4":[74],"78,5":[112],"78,6":[74],"78,7":[74],"78,8":[74],"78,9":[74,0,0,84],"79,1":[112],"79,10":[74],"79,11":[112],"79,2":[74],"79,3":[112],"79,4":[74],"79,5":[112],"79,6":[112],"79,7":[112],"79,8":[112],"79,9":[74,141,206],"80,1":[112],"80,10":[74],"80,11":[74,141,205],"80,2":[74],"80,3":[112],"80,4":[74],"80,5":[112],"80,6":[112],"80,7":[112],"80,8":[112],"80,9":[74],"81,1":[214],"81,10":[74],"81,11":[74],"81,2":[74],"81,3":[112],"81,4":[74],"81,5":[74],"81,6":[74],"81,7":[74],"81,8":[112],"81,9":[74],"82,1":[112],"82,10":[74],"82,11":[74],"82,2":[74,0,0,144,204],"82,3":[112],"82,4":[74],"82,5":[112],"82,6":[74],"82,7":[74],"82,8":[112],"82,9":[74],"83,1":[74],"83,10":[112],"83,11":[112],"83,2":[74],"83,3":[74,0,0,144,205],"83,4":[74],"83,5":[74],"83,6":[74],"83,7":[74],"83,8":[112],"83,9":[112],"84,1":[74],"84,10":[112],"84,11":[74],"84,2":[74],"84,3":[74],"84,4":[112],"84,5":[112],"84,6":[74],"84,7":[74],"84,8":[112],"84,9":[112],"85,1":[112],"85,10":[74],"85,11":[74],"85,2":[112],"85,3":[112],"85,4":[112],"85,5":[112],"85,6":[112],"85,7":[112],"85,8":[112],"85,9":[112],"86,1":[112],"86,10":[74],"86,11":[112],"86,2":[112],"86,3":[74,217,206],"86,4":[74,217,205],"86,5":[74,217,204],"86,6":[74,208],"86,7":[112],"86,8":[112],"86,9":[74]},name:"Placeholder 78,9",start:"78,9"},{data:{"1,23":[74],"1,24":[74],"1,25":[74],"1,26":[112],"1,27":[74],"1,28":[74],"2,23":[74],"2,24":[74,141,206],"2,25":[74,0,0,144,204],"2,26":[112],"2,27":[74],"2,28":[112],"3,23":[74],"3,24":[74],"3,25":[74],"3,26":[214],"3,27":[74],"3,28":[112],"4,23":[74],"4,24":[74],"4,25":[74,0,0,84],"4,26":[112],"4,27":[74,141,204],"4,28":[112],"5,23":[112],"5,24":[112],"5,25":[74,217,204],"5,26":[112],"5,27":[112],"5,28":[112],"6,23":[112],"6,24":[74],"6,25":[74],"6,26":[112],"6,27":[74],"6,28":[74],"7,23":[112],"7,24":[74],"7,25":[74,0,0,144,206],"7,26":[74,217,206],"7,27":[74],"7,28":[74,208],"8,23":[112],"8,24":[74],"8,25":[74],"8,26":[112],"8,27":[112],"8,28":[112],"9,23":[112],"9,24":[112],"9,25":[112],"9,26":[112],"9,27":[74],"9,28":[74]},name:"Placeholder 4,25",start:"4,25"},{data:{"11,23":[112],"11,24":[112],"11,25":[112],"11,26":[112],"11,27":[112],"11,28":[112],"12,23":[74],"12,24":[74],"12,25":[74],"12,26":[74],"12,27":[112],"12,28":[74],"13,23":[74],"13,24":[74,0,0,84],"13,25":[74,0,0,144,203],"13,26":[74,0,0,144,203],"13,27":[74,141,201],"13,28":[74],"14,23":[112],"14,24":[112],"14,25":[74],"14,26":[74],"14,27":[74,141,203],"14,28":[74,141,203],"15,23":[74,208],"15,24":[112],"15,25":[74,217,203],"15,26":[112],"15,27":[112],"15,28":[112],"16,23":[74,217,202],"16,24":[112],"16,25":[74],"16,26":[74],"16,27":[74,141,202],"16,28":[112],"17,23":[74],"17,24":[112],"17,25":[74],"17,26":[74],"17,27":[74,0,0,144,202],"17,28":[74,217,201],"18,23":[74],"18,24":[74,0,0,144,201],"18,25":[74],"18,26":[74],"18,27":[112],"18,28":[112],"19,23":[74],"19,24":[74],"19,25":[74],"19,26":[112],"19,27":[112],"19,28":[112]},name:"Placeholder 13,24",start:"13,24"},{data:{"1,47":[74,208],"1,48":[74,217,200],"1,49":[112],"1,50":[112],"1,51":[112],"2,47":[112],"2,48":[74],"2,49":[74],"2,50":[74],"2,51":[74],"3,47":[112],"3,48":[74],"3,49":[74,141,200],"3,50":[74],"3,51":[74],"4,47":[112],"4,48":[74],"4,49":[74,0,0,144,200],"4,50":[74],"4,51":[74],"5,47":[112],"5,48":[112],"5,49":[112],"5,50":[74,141,200],"5,51":[112],"6,47":[112],"6,48":[74],"6,49":[74,0,0,144,200],"6,50":[74],"6,51":[74,0,0,84],"7,47":[112],"7,48":[74,0,0,216],"7,49":[74],"7,50":[74],"7,51":[112],"8,47":[112],"8,48":[112],"8,49":[112],"8,50":[112],"8,51":[112]},name:"Placeholder 6,51",start:"6,51"},{data:{"11,47":[112],"11,48":[112],"11,49":[112],"11,50":[112],"11,51":[112],"11,52":[112],"12,47":[74,0,0,84],"12,48":[74,141,201,216],"12,49":[74,141,202,216],"12,50":[74,141,203,216],"12,51":[74,141,204,216],"12,52":[74,141,200],"13,47":[112],"13,48":[112],"13,49":[112],"13,50":[112],"13,51":[74,141,205,216],"13,52":[112],"14,47":[74],"14,48":[74],"14,49":[74],"14,50":[112],"14,51":[74,141,206,216],"14,52":[112],"15,47":[74],"15,48":[112],"15,49":[74,141,200,216],"15,50":[74,0,0,144,200],"15,51":[74],"15,52":[112],"16,47":[74],"16,48":[74],"16,49":[74,217,200],"16,50":[112],"16,51":[74],"16,52":[112],"17,47":[74],"17,48":[112],"17,49":[74,208],"17,50":[112],"17,51":[74],"17,52":[112],"18,47":[74],"18,48":[112],"18,49":[112],"18,50":[112],"18,51":[74],"18,52":[112],"19,47":[74],"19,48":[74],"19,49":[74],"19,50":[74],"19,51":[74],"19,52":[112]},name:"Placeholder 12,47",start:"12,47"},{data:{"22,47":[112],"22,48":[112],"22,49":[112],"22,50":[112],"22,51":[112],"22,52":[112],"22,53":[112],"23,47":[74],"23,48":[74,0,0,84],"23,49":[112],"23,50":[74],"23,51":[74],"23,52":[74],"23,53":[112],"24,47":[74],"24,48":[74,0,0,144,203],"24,49":[112],"24,50":[74],"24,51":[112],"24,52":[74],"24,53":[112],"25,47":[74],"25,48":[74,0,0,216],"25,49":[74,141,200,144,200],"25,50":[74],"25,51":[74],"25,52":[74],"25,53":[112],"26,47":[112],"26,48":[112],"26,49":[112],"26,50":[74,0,0,144],"26,51":[112],"26,52":[112],"26,53":[112],"27,47":[74],"27,48":[74],"27,49":[74,141,203,216],"27,50":[74],"27,51":[74],"27,52":[74],"27,53":[112],"28,47":[74],"28,48":[74],"28,49":[74,0,0,216],"28,50":[74],"28,51":[74],"28,52":[74],"28,53":[112],"29,47":[74],"29,48":[74],"29,49":[112],"29,50":[112],"29,51":[74],"29,52":[74,0,0,216],"29,53":[112],"30,47":[74,0,0,216],"30,48":[74,0,0,216],"30,49":[112],"30,50":[112],"30,51":[112],"30,52":[112],"30,53":[112],"31,47":[112],"31,48":[214],"31,49":[74,217,199],"31,50":[74,217,200],"31,51":[74,217,203],"31,52":[74,208],"31,53":[112]},name:"Placeholder 23,48",start:"23,48"},{data:{"1,70":[112],"1,71":[112],"1,72":[112],"1,73":[112],"1,74":[112],"1,75":[112],"2,70":[112],"2,71":[74,208],"2,72":[74],"2,73":[74],"2,74":[74],"2,75":[74],"3,70":[112],"3,71":[74],"3,72":[74],"3,73":[74],"3,74":[74],"3,75":[74],"4,70":[112],
"4,71":[213],"4,72":[74],"4,73":[74],"4,74":[74,216],"4,75":[74,141,203,209],"5,70":[112],"5,71":[74,141,204,211],"5,72":[74],"5,73":[74],"5,74":[74],"5,75":[213],"6,70":[112],"6,71":[74],"6,72":[74],"6,73":[74],"6,74":[74],"6,75":[74],"7,70":[112],"7,71":[74],"7,72":[74],"7,73":[74],"7,74":[74],"7,75":[74],"8,70":[112],"8,71":[74,0,0,84],"8,72":[74],"8,73":[74],"8,74":[74],"8,75":[74,216]},name:"Placeholder 8,71",start:"8,71"},{data:{"11,70":[112],"11,71":[112],"11,72":[112],"11,73":[112],"11,74":[112],"11,75":[214],"11,76":[112],"12,70":[112],"12,71":[74,208],"12,72":[74,217,205],"12,73":[74],"12,74":[74],"12,75":[74],"12,76":[112],"13,70":[112],"13,71":[74,217,205],"13,72":[74],"13,73":[74],"13,74":[74],"13,75":[74,141,205],"13,76":[74],"14,70":[112],"14,71":[74],"14,72":[74],"14,73":[74],"14,74":[74],"14,75":[74],"14,76":[74],"15,70":[112],"15,71":[74],"15,72":[74],"15,73":[74,0,0,185],"15,74":[74],"15,75":[74,0,0,209],"15,76":[74],"16,70":[112],"16,71":[112],"16,72":[214],"16,73":[213],"16,74":[112],"16,75":[112],"16,76":[112],"17,70":[112],"17,71":[74],"17,72":[74],"17,73":[74],"17,74":[74],"17,75":[74],"17,76":[74,0,0,84],"18,70":[112],"18,71":[74],"18,72":[74],"18,73":[112],"18,74":[74],"18,75":[74,0,0,144,205],"18,76":[74]},name:"Placeholder 17,76",start:"17,76"},{data:{"21,70":[74],"21,71":[74,0,0,144,203],"21,72":[74],"21,73":[74],"21,74":[74],"21,75":[112],"22,70":[74],"22,71":[74,0,0,144,203],"22,72":[74],"22,73":[74],"22,74":[74],"22,75":[112],"23,70":[74],"23,71":[74],"23,72":[112],"23,73":[112],"23,74":[74],"23,75":[112],"24,70":[74],"24,71":[74],"24,72":[112],"24,73":[112],"24,74":[74],"24,75":[112],"25,70":[74],"25,71":[74],"25,72":[74],"25,73":[74],"25,74":[74,141,205],"25,75":[112],"26,70":[112],"26,71":[112],"26,72":[112],"26,73":[74],"26,74":[74],"26,75":[112],"27,70":[74,208],"27,71":[74,217,203],"27,72":[112],"27,73":[74],"27,74":[74],"27,75":[112],"28,70":[112],"28,71":[74,0,0,84],"28,72":[74],"28,73":[74],"28,74":[74,141,206,210],"28,75":[112],"29,70":[112],"29,71":[112],"29,72":[112],"29,73":[112],"29,74":[112],"29,75":[112]},name:"Placeholder 28,71",start:"28,71"},{data:{"32,70":[112],"32,71":[74,112],"32,72":[74,112],"32,73":[74,112],"32,74":[74,112],"32,75":[74,112],"33,70":[112],"33,71":[74],"33,72":[74],"33,73":[74],"33,74":[74],"33,75":[74],"34,70":[112],"34,71":[74,0,0,185],"34,72":[74],"34,73":[74],"34,74":[74,141,204],"34,75":[74],"35,70":[112],"35,71":[74],"35,72":[74],"35,73":[74],"35,74":[74,0,0,144,202],"35,75":[74],"36,70":[112],"36,71":[213],"36,72":[112],"36,73":[74],"36,74":[74],"36,75":[112],"37,70":[74,208],"37,71":[74,0,0,144,204],"37,72":[112],"37,73":[74,0,0,84],"37,74":[74,217,204],"37,75":[74,217,202],"38,70":[112],"38,71":[213],"38,72":[112],"38,73":[74],"38,74":[74],"38,75":[112],"39,70":[112],"39,71":[74],"39,72":[74],"39,73":[74],"39,74":[74],"39,75":[74],"40,70":[112],"40,71":[74],"40,72":[74],"40,73":[74],"40,74":[74,0,0,209],"40,75":[74],"41,70":[112],"41,71":[74,0,0,183],"41,72":[74],"41,73":[74],"41,74":[74,141,205],"41,75":[74],"42,70":[112],"42,71":[74],"42,72":[74],"42,73":[74],"42,74":[74],"42,75":[74]},name:"Placeholder 37,73",start:"37,73"},{data:{"44,70":[112],"44,71":[112],"44,72":[112],"44,73":[112],"44,74":[112],"44,75":[112],"44,76":[74],"44,77":[74],"44,78":[112],"45,70":[112],"45,71":[74,0,0,216],"45,72":[74],"45,73":[74],"45,74":[74],"45,75":[74],"45,76":[74],"45,77":[74],"45,78":[74],"46,70":[112],"46,71":[74],"46,72":[74],"46,73":[74,141,205],"46,74":[74],"46,75":[74],"46,76":[74],"46,77":[74],"46,78":[74],"47,70":[112],"47,71":[74],"47,72":[74],"47,73":[74],"47,74":[74],"47,75":[74],"47,76":[74],"47,77":[74,0,0,144,202],"47,78":[74,0,0,84],"48,70":[112],"48,71":[74],"48,72":[74],"48,73":[74],"48,74":[214],"48,75":[74,141,206],"48,76":[112],"48,77":[112],"48,78":[112],"49,70":[112],"49,71":[74,141,204,211],"49,72":[74],"49,73":[74,0,0,144,204],"49,74":[112],"49,75":[74],"49,76":[74],"49,77":[112],"49,78":[74,208],"50,70":[112],"50,71":[74],"50,72":[74],"50,73":[74],"50,74":[112],"50,75":[74],"50,76":[74],"50,77":[112],"50,78":[74,217,206],"51,70":[112],"51,71":[74],"51,72":[74],"51,73":[74],"51,74":[112],"51,75":[74,0,0,144,205],"51,76":[74],"51,77":[112],"51,78":[74,217,202],"52,70":[112],"52,71":[112],"52,72":[74],"52,73":[74],"52,74":[112],"52,75":[214],"52,76":[112],"52,77":[112],"52,78":[74,217,205],"53,70":[112],"53,71":[112],"53,72":[74],"53,73":[74],"53,74":[74,0,0,216],"53,75":[74,0,0,144,206],"53,76":[74],"53,77":[112],"53,78":[74,217,204],"54,70":[74],"54,71":[74],"54,72":[74],"54,73":[74],"54,74":[74,0,0,216],"54,75":[74],"54,76":[74],"54,77":[74],"54,78":[74,0,0,212],"55,70":[112],"55,71":[112],"55,72":[74],"55,73":[74],"55,74":[112],"55,75":[112],"55,76":[112],"55,77":[112],"55,78":[112]},name:"Placeholder 47,78",start:"47,78"},{data:{"57,70":[112],"57,71":[112],"57,72":[112],"57,73":[112],"57,74":[112],"57,75":[112],"57,76":[112],"57,77":[112],"57,78":[112],"57,79":[112],"57,80":[112],"58,70":[112],"58,71":[74],"58,72":[74],"58,73":[74],"58,74":[74],"58,75":[74],"58,76":[74],"58,77":[74],"58,78":[74],"58,79":[74,141,205],"58,80":[74],"59,70":[112],"59,71":[74,217,204],"59,72":[74,0,0,144],"59,73":[74],"59,74":[74],"59,75":[74],"59,76":[74],"59,77":[74,0,0,186],"59,78":[74],"59,79":[74,217,206],"59,80":[74],"60,70":[112],"60,71":[214],"60,72":[213],"60,73":[112],"60,74":[112],"60,75":[74,217],"60,76":[112],"60,77":[112],"60,78":[112],"60,79":[213],"60,80":[214],"61,70":[112],"61,71":[74],"61,72":[74],"61,73":[112],"61,74":[74,0,0,144,200],"61,75":[74],"61,76":[74],"61,77":[74],"61,78":[213],"61,79":[74],"61,80":[74],"62,70":[112],"62,71":[74],"62,72":[74],"62,73":[112],"62,74":[213],"62,75":[74],"62,76":[74],"62,77":[74],"62,78":[112],"62,79":[74],"62,80":[74],"63,70":[214],"63,71":[74],"63,72":[74],"63,73":[112],"63,74":[74],"63,75":[74],"63,76":[74,0,0,185],"63,77":[74],"63,78":[112],"63,79":[74],"63,80":[74],"64,70":[112],"64,71":[74],"64,72":[74,0,0,144,206],"64,73":[112],"64,74":[74],"64,75":[74],"64,76":[74,0,0,210],"64,77":[74],"64,78":[112],"64,79":[74,0,0,144,204],"64,80":[74],"65,70":[112],"65,71":[74],"65,72":[74],"65,73":[213],"65,74":[74],"65,75":[74],"65,76":[74],"65,77":[74],"65,78":[112],"65,79":[74],"65,80":[74],"66,70":[112],"66,71":[74,0,0,185],"66,72":[74],"66,73":[112],"66,74":[74],"66,75":[74],"66,76":[74,0,0,84],"66,77":[74,217,200],"66,78":[112],"66,79":[74],"66,80":[74,0,0,184],"67,70":[112],"67,71":[74],"67,72":[74],"67,73":[112],"67,74":[74],"67,75":[74],"67,76":[74,217,200],"67,77":[74,208],"67,78":[112],"67,79":[74],"67,80":[74],"68,70":[112],"68,71":[112],"68,72":[213],"68,73":[112],"68,74":[74],"68,75":[74],"68,76":[74],"68,77":[74,217,200],"68,78":[112],"68,79":[213],"68,80":[112],"69,70":[74],"69,71":[74],"69,72":[74],"69,73":[74],"69,74":[74],"69,75":[74],"69,76":[74],"69,77":[74],"69,78":[74],"69,79":[74],"69,80":[74],"70,70":[74],"70,71":[74],"70,72":[74,141,206,210],"70,73":[74],"70,74":[74],"70,75":[74],"70,76":[74],"70,77":[74],"70,78":[74],"70,79":[74,141,204],"70,80":[74]},name:"Placeholder 66,76",start:"66,76"},{data:{"72,70":[74],"72,71":[74],"72,72":[74],"72,73":[74],"72,74":[74],"72,75":[74],"72,76":[74],"72,77":[74],"72,78":[74],"72,79":[74],"72,80":[74],"72,81":[74],"73,70":[74],"73,71":[74],"73,72":[74],"73,73":[74],"73,74":[74],"73,75":[74],"73,76":[74],"73,77":[74],"73,78":[74],"73,79":[74],"73,80":[74],"73,81":[74],"74,70":[74],"74,71":[74],"74,72":[74],"74,73":[74],"74,74":[74],"74,75":[74],"74,76":[74],"74,77":[74],"74,78":[74,141,206,212],"74,79":[74],"74,80":[74],"74,81":[74],"75,70":[74],"75,71":[74],"75,72":[74],"75,73":[74],"75,74":[74,0,0,215],"75,75":[74],"75,76":[74],"75,77":[74],"75,78":[74,0,0,144,203],"75,79":[74],"75,80":[74],"75,81":[74],"76,70":[74],"76,71":[74],"76,72":[74,141,206,212],"76,73":[74],"76,74":[112],"76,75":[74],"76,76":[74,141,206,211],"76,77":[74,0,0,144,203],"76,78":[74,141,205,144,203],"76,79":[74,0,0,144,203],"76,80":[74,141,206,209],"76,81":[74],"77,70":[74],"77,71":[74],"77,72":[74],"77,73":[74],"77,74":[213],"77,75":[74],"77,76":[74],"77,77":[74],"77,78":[74,0,0,144,203],"77,79":[74],"77,80":[74],"77,81":[74],"78,70":[74],"78,71":[74],"78,72":[74],"78,73":[74],"78,74":[74],"78,75":[74],"78,76":[74],"78,77":[74],"78,78":[74,141,206,210],"78,79":[74],"78,80":[74],"78,81":[74],"79,70":[74,141,204,185],"79,71":[74],"79,72":[74,0,0,144,202],"79,73":[74],"79,74":[74,0,0,144,202],"79,75":[74],"79,76":[74,141,205,209],"79,77":[74],"79,78":[74],"79,79":[74],"79,80":[74],"79,81":[74],"80,70":[74],"80,71":[74],"80,72":[74],"80,73":[74],"80,74":[74],"80,75":[74],"80,76":[74,0,0,215],"80,77":[74],"80,78":[74],"80,79":[74],"80,80":[74],"80,81":[74],"81,70":[74],"81,71":[74],"81,72":[74],"81,73":[74],"81,74":[74],"81,75":[74],"81,76":[74,141,205,212],"81,77":[74],"81,78":[74],"81,79":[74],"81,80":[74],"81,81":[74],"82,70":[74],"82,71":[74],"82,72":[214],"82,73":[74,84],"82,74":[74,141,206,210],"82,75":[74],"82,76":[74,0,0,144,205],"82,77":[74],"82,78":[74],"82,79":[74],"82,80":[74],"82,81":[74],"83,70":[74],"83,71":[74],"83,72":[74],"83,73":[74],"83,74":[74],"83,75":[74],"83,76":[74],"83,77":[74],"83,78":[74],"83,79":[74],"83,80":[74],"83,81":[74],"84,70":[74],"84,71":[74],"84,72":[74,141,204,211],"84,73":[74],"84,74":[74,0,0,144,204],"84,75":[74],"84,76":[74,0,0,144,202],"84,77":[74],"84,78":[74,141,205,209],"84,79":[74],"84,80":[74],"84,81":[74],"85,70":[74],"85,71":[74],"85,72":[74,216],"85,73":[74,216],"85,74":[74],"85,75":[74],"85,76":[74],"85,77":[74],"85,78":[74],"85,79":[74],"85,80":[74],"85,81":[74],"86,70":[74,0,0,144,204],"86,71":[74,0,0,144,204],"86,72":[74,216],"86,73":[74,216],"86,74":[213],"86,75":[74,141,201],"86,76":[74,141,206],"86,77":[74,0,0,216],"86,78":[74,0,0,216],"86,79":[74],"86,80":[74],"86,81":[74],"87,70":[74],"87,71":[74],"87,72":[74,216],"87,73":[74,208],"87,74":[74,141,200],"87,75":[74,141,202],"87,76":[74,141,205],"87,77":[74,0,0,216],"87,78":[74,0,0,216],"87,79":[74],"87,80":[74],"87,81":[74],"88,70":[74],"88,71":[74],"88,72":[74,216],"88,73":[74,216],"88,74":[214],"88,75":[74,141,203],"88,76":[74,141,204,210],"88,77":[74,0,0,216],"88,78":[74,0,0,216],"88,79":[74],"88,80":[74],"88,81":[74],"89,70":[74,141,204,210],"89,71":[74,141,204],"89,72":[74,216],"89,73":[74,216],"89,74":[74],"89,75":[74],"89,76":[214],"89,77":[74],"89,78":[74],"89,79":[74],"89,80":[74],"89,81":[74],"90,70":[74],"90,71":[74],"90,72":[74],"90,73":[74],"90,74":[74],"90,75":[74],"90,76":[74],"90,77":[74],"90,78":[74],"90,79":[74],"90,80":[74],"90,81":[74]},name:"Placeholder 82,73",start:"82,73"},{data:{"10,123":[112],"10,124":[112],"10,125":[112],"10,126":[112],"10,127":[112],"10,128":[213],"4,123":[112],"4,124":[112],"4,125":[74],"4,126":[74],"4,127":[74],"4,128":[74],"5,123":[74],"5,124":[213],"5,125":[74,141,206,144,203],"5,126":[74,0,0,183],"5,127":[74],"5,128":[74,0,0,209],"6,123":[74],"6,124":[112],"6,125":[74],"6,126":[74],"6,127":[74],"6,128":[74],"7,123":[112],"7,124":[112],"7,125":[74],"7,126":[112],"7,127":[74,0,0,84],"7,128":[74],"8,123":[112],"8,124":[74],"8,125":[74],"8,126":[112],"8,127":[112],"8,128":[112],"9,123":[74,208],"9,124":[74],"9,125":[74],"9,126":[74],"9,127":[74],"9,128":[74,141,205]},name:"Placeholder 7,127",start:"7,127"},{data:{"16,123":[112],"16,124":[112],"16,125":[112],"16,126":[74,0,0,144,202],"16,127":[112],"16,128":[112],"17,123":[112],"17,124":[74,141,204],"17,125":[74,141,205],"17,126":[74,0,0,212],"17,127":[74],"17,128":[112],"18,123":[112],"18,124":[213],"18,125":[213],"18,126":[112],"18,127":[74],"18,128":[74],"19,123":[74],"19,124":[74,0,0,186],"19,125":[74,0,0,84],"19,126":[74],"19,127":[74],"19,128":[74],"20,123":[74],"20,124":[74,208,0,183],"20,125":[74],"20,126":[74],"20,127":[74],"20,128":[74]},name:"Placeholder 19,125",start:"19,125"},{data:{"26,123":[112],"26,124":[112],"26,125":[112],"26,126":[74],"26,127":[112],"26,128":[112],"27,123":[112],"27,124":[74,141,204],"27,125":[74,141,205],"27,126":[74],"27,127":[74],"27,128":[74],"28,123":[74],"28,124":[213],"28,125":[213],"28,126":[74,0,0,144,202],"28,127":[74],"28,128":[74],"29,123":[74],"29,124":[74],"29,125":[74,0,0,84],"29,126":[112],"29,127":[112],"29,128":[74],"30,123":[74],"30,124":[74,0,0,183],"30,125":[74],"30,126":[74,0,0,185],"30,127":[74],"30,128":[74],"31,123":[74],"31,124":[74,0,0,183],"31,125":[74],"31,126":[74,0,0,212],"31,127":[74],"31,128":[74,0,0,184],"32,123":[74,208],"32,124":[74,0,0,186],"32,125":[74],"32,126":[74,0,0,212],"32,127":[74],"32,128":[74]},name:"Placeholder 29,125",start:"29,125"},{data:{"37,123":[74],"37,124":[74],"37,125":[74,141,204],"37,126":[74],"37,127":[74],"37,128":[74],"38,123":[112],"38,124":[112],"38,125":[74,0,0,212],"38,126":[112],"38,127":[74],"38,128":[112],"39,123":[74],"39,124":[112],"39,125":[74,0,0,84],"39,126":[112],"39,127":[74],"39,128":[112],"40,123":[112],"40,124":[112],"40,125":[74],"40,126":[112],"40,127":[74,208],"40,128":[112],"41,123":[112],"41,124":[74],"41,125":[74],"41,126":[74],"41,127":[74],"41,128":[74],"42,123":[112],"42,124":[74],"42,125":[74,0,0,144,204],"42,126":[74],"42,127":[74],"42,128":[74],"43,123":[112],"43,124":[112],"43,125":[112],"43,126":[112],"43,127":[112],"43,128":[112]},name:"Placeholder 39,125",start:"39,125"},{data:{"47,123":[74],"47,124":[74],"47,125":[74],"47,126":[112],"47,127":[112],"48,123":[74,208,0,144,205],"48,124":[74,0,0,144],"48,125":[213],"48,126":[74,141,205,84],"48,127":[112],"49,123":[74],"49,124":[74,0,0,209],"49,125":[74],"49,126":[74],"49,127":[112],"50,123":[74],"50,124":[74],"50,125":[74],"50,126":[74],"50,127":[112],"51,123":[112],"51,124":[112],"51,125":[74],"51,126":[112],"51,127":[112],"52,123":[74],"52,124":[74],"52,125":[74],"52,126":[74],"52,127":[74]},name:"Placeholder 48,126",start:"48,126"},{data:{"56,123":[112],"56,124":[112],"56,125":[112],"56,126":[112],"56,127":[74],"57,123":[74],"57,124":[74,0,0,84],"57,125":[74,208],"57,126":[74],"57,127":[74],"58,123":[112],"58,124":[112],"58,125":[74,141,204,210],"58,126":[112],"58,127":[74],"59,123":[74],"59,124":[112],"59,125":[74,141,206],"59,126":[74],"59,127":[74],"60,123":[74],"60,124":[112],"60,125":[74,0,0,144,201],"60,126":[112],"60,127":[74],"61,123":[112],"61,124":[74],"61,125":[74],"61,126":[112],"61,127":[74],"62,123":[112],"62,124":[74],"62,125":[74],"62,126":[112],"62,127":[74],"63,123":[112],"63,124":[74],"63,125":[74],"63,126":[112],"63,127":[74]},name:"Placeholder 57,124",start:"57,124"},{data:{"67,123":[74],"67,124":[112],"67,125":[112],"67,126":[112],"67,127":[74],"67,128":[112],"67,129":[74],"67,130":[112],"67,131":[112],"67,132":[74],"68,123":[74],"68,124":[74],"68,125":[74],"68,126":[74,0,0,210],"68,127":[74],"68,128":[112],"68,129":[74],"68,130":[112],"68,131":[112],"68,132":[74],"69,123":[74],"69,124":[112],"69,125":[112],"69,126":[112],"69,127":[112],"69,128":[74,208],"69,129":[74,0,0,211],"69,130":[112],"69,131":[112],"69,132":[112],"70,123":[74],"70,124":[74],"70,125":[74],"70,126":[74],"70,127":[74],"70,128":[74],"70,129":[74],"70,130":[74],"70,131":[74,141,206],"70,132":[112],"71,123":[112],"71,124":[112],"71,125":[112],"71,126":[112],"71,127":[112],"71,128":[112],"71,129":[74],"71,130":[213],"71,131":[213],"71,132":[112],"72,123":[74],"72,124":[74],"72,125":[74],"72,126":[74],"72,127":[74],"72,128":[112],"72,129":[74,141,205,144,200],"72,130":[213],"72,131":[74,0,0,84],"72,132":[74],"73,123":[112],"73,124":[112],"73,125":[74],"73,126":[112],"73,127":[74],"73,128":[112],"73,129":[74],"73,130":[213],"73,131":[213],"73,132":[112],"74,123":[74],"74,124":[74],"74,125":[74],"74,126":[74,0,0,212],"74,127":[74],"74,128":[74],"74,129":[74],"74,130":[74],"74,131":[74,141,204],"74,132":[74],"75,123":[112],"75,124":[74],"75,125":[74],"75,126":[112],"75,127":[74],"75,128":[112],"75,129":[74],"75,130":[112],"75,131":[112],"75,132":[112],"76,123":[112],"76,124":[74],"76,125":[74],"76,126":[74],"76,127":[74],"76,128":[112],"76,129":[74],"76,130":[112],"76,131":[112],"76,132":[112],"77,123":[74],"77,124":[74],"77,125":[112],"77,126":[112],"77,127":[112],"77,128":[112],"77,129":[74],"77,130":[74],"77,131":[112],"77,132":[74],"78,123":[74],"78,124":[74],"78,125":[74],"78,126":[74],"78,127":[74],"78,128":[74],"78,129":[74],"78,130":[74],"78,131":[112],"78,132":[74]},name:"Placeholder 72,131",start:"72,131"},{data:{"10,149":[112],"10,150":[112],"10,151":[112],"3,149":[74,141,200],"3,150":[74,141,200],"3,151":[74,0,0,84],"4,149":[74,0,0,144,200],"4,150":[74,0,0,144,200],"4,151":[74],"5,149":[112],"5,150":[74],"5,151":[112],"6,149":[112],"6,150":[74],"6,151":[112],"7,149":[74],"7,150":[74],"7,151":[112],"8,149":[74],"8,150":[74],"8,151":[112],"9,149":[74,208],"9,150":[74],"9,151":[112]},name:"Placeholder 3,151",start:"3,151"},{data:{"14,149":[112],"14,150":[112],"14,151":[74],"14,152":[112],"14,153":[112],"15,149":[74],"15,150":[74,0,0,144,203],"15,151":[74],"15,152":[74,0,0,144,202],"15,153":[74],"16,149":[112],"16,150":[74,141,203],"16,151":[74,141,202],"16,152":[74],"16,153":[74],"17,149":[112],"17,150":[74,208],"17,151":[74,0,0,84],"17,152":[112],"17,153":[112]},name:"Placeholder 17,151",start:"17,151"},{data:{"21,149":[112],"21,150":[74],"21,151":[74],"21,152":[112],"21,153":[112],"21,154":[112],"22,149":[74],"22,150":[74],"22,151":[74],"22,152":[112],"22,153":[112],"22,154":[74,208,0,84],"23,149":[112],"23,150":[74],"23,151":[74],"23,152":[74],"23,153":[112],"23,154":[74],"24,149":[112],"24,150":[74],"24,151":[74,141,200,144,204],"24,152":[74],"24,153":[112],"24,154":[74],"25,149":[112],"25,150":[74],"25,151":[74,141,204,144,200],"25,152":[74],"25,153":[112],"25,154":[74],"26,149":[112],"26,150":[74],"26,151":[112],"26,152":[112],"26,153":[112],"26,154":[74],"27,149":[112],"27,150":[74],"27,151":[74],"27,152":[74],"27,153":[74],"27,154":[74],"28,149":[112],"28,150":[112],"28,151":[112],"28,152":[112],"28,153":[112],"28,154":[112]},name:"Placeholder 22,154",start:"22,154"},{data:{"32,149":[112],"32,150":[74],"32,151":[74],"32,152":[112],"32,153":[112],"32,154":[112],"33,149":[74],"33,150":[74],"33,151":[74],"33,152":[74],"33,153":[74],"33,154":[74,208,0,84],"34,149":[112],"34,150":[74],"34,151":[74,141,200,144,205],"34,152":[74],"34,153":[112],"34,154":[74],"35,149":[112],"35,150":[74],"35,151":[112],"35,152":[74],"35,153":[112],"35,154":[74],"36,149":[74],"36,150":[74],"36,151":[74,141,205,144,200],"36,152":[74],"36,153":[112],"36,154":[74],"37,149":[74],"37,150":[112],"37,151":[112],"37,152":[112],"37,153":[112],"37,154":[74]},name:"Placeholder 33,154",start:"33,154"},{data:{"42,149":[112],"42,150":[112],"42,151":[74],"42,152":[74],"42,153":[112],"42,154":[112],"42,155":[112],"42,156":[74],"42,157":[74],"42,158":[74],"42,159":[74],"42,160":[112],"43,149":[112],"43,150":[74],"43,151":[74],"43,152":[112],"43,153":[112],"43,154":[112],"43,155":[74],"43,156":[74],"43,157":[74],"43,158":[74],"43,159":[112],"43,160":[112],"44,149":[74],"44,150":[74],"44,151":[112],"44,152":[112],"44,153":[112],"44,154":[74],"44,155":[74],"44,156":[74],"44,157":[74],"44,158":[112],"44,159":[74,208,0,84],"44,160":[74],"45,149":[112],"45,150":[112],"45,151":[112],"45,152":[112],"45,153":[74],"45,154":[74],"45,155":[74],"45,156":[74],"45,157":[112],"45,158":[112],"45,159":[112],"45,160":[112],"46,149":[74],"46,150":[74],"46,151":[74],"46,152":[74],"46,153":[74],"46,154":[74],"46,155":[74],"46,156":[112],"46,157":[112],"46,158":[74],"46,159":[74],"46,160":[74],"47,149":[112],"47,150":[112],"47,151":[112],"47,152":[74],"47,153":[74,0,0,144,201],"47,154":[74],"47,155":[112],"47,156":[112],"47,157":[112],"47,158":[74],"47,159":[112],"47,160":[74],"48,149":[112],"48,150":[74,141,205],"48,151":[112],"48,152":[74,0,0,144,205],"48,153":[74],"48,154":[112],"48,155":[112],"48,156":[112],"48,157":[112],"48,158":[74],"48,159":[74],"48,160":[74],"49,149":[112],"49,150":[74,141,201],"49,151":[74],"49,152":[74],"49,153":[112],"49,154":[112],"49,155":[112],"49,156":[74],"49,157":[74],"49,158":[74],"49,159":[112],"49,160":[112],"50,149":[74],"50,150":[74],"50,151":[112],"50,152":[112],"50,153":[112],"50,154":[112],"50,155":[74],"50,156":[74],"50,157":[112],"50,158":[112],"50,159":[112],"50,160":[74],"51,149":[74],"51,150":[74],"51,151":[112],"51,152":[112],"51,153":[112],"51,154":[74],"51,155":[74],"51,156":[112],"51,157":[112],"51,158":[112],"51,159":[74],"51,160":[74],"52,149":[74],"52,150":[112],"52,151":[112],"52,152":[112],"52,153":[74],"52,154":[74],"52,155":[112],"52,156":[112],"52,157":[112],"52,158":[74],"52,159":[74],"52,160":[74],"53,149":[112],"53,150":[112],"53,151":[112],"53,152":[74],"53,153":[74],"53,154":[112],"53,155":[112],"53,156":[112],"53,157":[74],"53,158":[74],"53,159":[74],"53,160":[74]},name:"Placeholder 44,159",start:"44,159"},{data:{"58,149":[112],"58,150":[112],"58,151":[112],"58,152":[112],"58,153":[112],"58,154":[112],"58,155":[112],"58,156":[112],"58,157":[74],"58,158":[74],"58,159":[74],"58,160":[74],"59,149":[112],"59,150":[74,141,205],"59,151":[74,141,200],"59,152":[74],"59,153":[74],"59,154":[74],"59,155":[74],"59,156":[112],"59,157":[112],"59,158":[74],"59,159":[74],"59,160":[74],"60,149":[112],"60,150":[112],"60,151":[112],"60,152":[112],"60,153":[112],"60,154":[74],"60,155":[74],"60,156":[74],"60,157":[112],"60,158":[112],"60,159":[74],"60,160":[74],"61,149":[74],"61,150":[74],"61,151":[74],"61,152":[74],"61,153":[112],"61,154":[74],"61,155":[74],"61,156":[74],"61,157":[74],"61,158":[112],"61,159":[74],"61,160":[74],"62,149":[74],"62,150":[74],"62,151":[74],"62,152":[74],"62,153":[112],"62,154":[112],"62,155":[74],"62,156":[74],"62,157":[74],"62,158":[112],"62,159":[112],"62,160":[112],"63,149":[74],"63,150":[74],"63,151":[74],"63,152":[74],"63,153":[74],"63,154":[112],"63,155":[112],"63,156":[74],"63,157":[74],"63,158":[74,0,0,144,206],"63,159":[74],"63,160":[112],"64,149":[74],"64,150":[74],"64,151":[74],"64,152":[74],"64,153":[74],"64,154":[74],"64,155":[112],"64,156":[74],"64,157":[74,0,0,144,200],"64,158":[74,0,0,144,205],"64,159":[74,208],"64,160":[112],"65,149":[112],"65,150":[112],"65,151":[74],"65,152":[74],"65,153":[74],"65,154":[112],"65,155":[112],"65,156":[74],"65,157":[74],"65,158":[74,0,0,144,204],"65,159":[74],"65,160":[112],"66,149":[74],"66,150":[112],"66,151":[112],"66,152":[74],"66,153":[112],"66,154":[112],"66,155":[74],"66,156":[74],"66,157":[74],"66,158":[112],"66,159":[74],"66,160":[74],"67,149":[74],"67,150":[74],"67,151":[112],"67,152":[74],"67,153":[112],"67,154":[74],"67,155":[74],"67,156":[74],"67,157":[74],"67,158":[112],"67,159":[112],"67,160":[112],"68,149":[112],"68,150":[74],"68,151":[112],"68,152":[112],"68,153":[112],"68,154":[74],"68,155":[74],"68,156":[74],"68,157":[112],"68,158":[112],"68,159":[74],"68,160":[112],"69,149":[112],"69,150":[74,141,204],"69,151":[74,141,206],"69,152":[74,0,0,84],"69,153":[74],"69,154":[74],"69,155":[74],"69,156":[112],"69,157":[112],"69,158":[74],"69,159":[74],"69,160":[74]},name:"Placeholder 69,152",start:"69,152"},{data:{"73,149":[74],"73,150":[74],"73,151":[112],"73,152":[74],"73,153":[74],"73,154":[112],"73,155":[74],"74,149":[74],"74,150":[74,208],"74,151":[74],"74,152":[74,0,0,144,203],"74,153":[74,0,0,84],"74,154":[112],"74,155":[74],"75,149":[74],"75,150":[112],"75,151":[74],"75,152":[74,0,0,144,205],"75,153":[74],"75,154":[112],"75,155":[112],"76,149":[74],"76,150":[112],"76,151":[74],"76,152":[74,141,206,144,202],"76,153":[74],"76,154":[112],"76,155":[112],"77,149":[74],"77,150":[112],"77,151":[74],"77,152":[74,141,201,144,204],"77,153":[74],"77,154":[112],"77,155":[112],"78,149":[74],"78,150":[112],"78,151":[74],"78,152":[74,141,204,144,201],"78,153":[74],"78,154":[112],"78,155":[112],"79,149":[74],"79,150":[74],"79,151":[74],"79,152":[74,141,202,144,206],"79,153":[74],"79,154":[74],"79,155":[74],"80,149":[74],"80,150":[112],"80,151":[112],"80,152":[74,141,205],"80,153":[112],"80,154":[112],"80,155":[74],"81,149":[112],"81,150":[74],"81,151":[112],"81,152":[74,141,203],"81,153":[112],"81,154":[74],"81,155":[112],"82,149":[112],"82,150":[112],"82,151":[112],"82,152":[112],"82,153":[112],"82,154":[112],"82,155":[112]},name:"Placeholder 74,153",start:"74,153"},{data:{"1,175":[112],"1,176":[112],"1,177":[74],"1,178":[74],"1,179":[112],"2,175":[74],"2,176":[74],"2,177":[74,141,200],"2,178":[74],"2,179":[112],"3,175":[74],"3,176":[74],"3,177":[112],"3,178":[112],"3,179":[112],"4,175":[112],"4,176":[74],"4,177":[112],"4,178":[74,208],"4,179":[112],"5,175":[112],"5,176":[74,141,200,144],"5,177":[112],"5,178":[74],"5,179":[112],"6,175":[112],"6,176":[74,0,0,84],"6,177":[112],"6,178":[74],"6,179":[112]},name:"Placeholder 6,176",start:"6,176"},{data:{"11,175":[112],"11,176":[112],"11,177":[112],"11,178":[112],"12,175":[74],"12,176":[74],"12,177":[74],"12,178":[112],"13,175":[74],"13,176":[74,0,0,144,202],"13,177":[74,208],"13,178":[112],"14,175":[74],"14,176":[112],"14,177":[112],"14,178":[74],"15,175":[74],"15,176":[74,141,202,144],"15,177":[74,0,0,84],"15,178":[74]},name:"Placeholder 15,177",start:"15,177"},{data:{"19,175":[74,141,200],"19,176":[74],"19,177":[74,0,0,84],"20,175":[74,208],"20,176":[74,0,0,144],"20,177":[112],"21,175":[112],"21,176":[74],"21,177":[112],"22,175":[74,0,0,144,200],"22,176":[74],"22,177":[74],"23,175":[74,141,206],"23,176":[74],"23,177":[74,141,206],"24,175":[112],"24,176":[112],"24,177":[112]},name:"Placeholder 19,177",start:"19,177"},{data:{"28,175":[112],"28,176":[74],"28,177":[74,0,0,84],"28,178":[112],"29,175":[112],"29,176":[74],"29,177":[74,141,200],"29,178":[74],"30,175":[112],"30,176":[74],"30,177":[74,0,0,144,200],"30,178":[74],"31,175":[112],"31,176":[74],"31,177":[112],"31,178":[112],"32,175":[112],"32,176":[74],"32,177":[112],"32,178":[74],"33,175":[112],"33,176":[74,141,200,144],"33,177":[112],"33,178":[74],"34,175":[112],"34,176":[74,208],"34,177":[112],"34,178":[112],"35,175":[112],"35,176":[74],"35,177":[74],"35,178":[112]},name:"Placeholder 28,177",start:"28,177"},{data:{"40,175":[112],"40,176":[112],"40,177":[112],"40,178":[112],"41,175":[112],"41,176":[74],"41,177":[74],"41,178":[112],"42,175":[112],"42,176":[74],"42,177":[74,0,0,144,203],"42,178":[74],"43,175":[112],"43,176":[74,141,203],"43,177":[74],"43,178":[74],"44,175":[112],"44,176":[74,141,200],"44,177":[112],"44,178":[112],"45,175":[112],"45,176":[74],"45,177":[74],"45,178":[112],"46,175":[74],"46,176":[74],"46,177":[74,0,0,144,200],"46,178":[74,208],"47,175":[74],"47,176":[74,0,0,144],"47,177":[74,0,0,84],"47,178":[112]},name:"Placeholder 47,177",start:"47,177"},{data:{"52,175":[112],"52,176":[74,141,206],"52,177":[74,0,0,84],"53,175":[112],"53,176":[74],"53,177":[74],"54,175":[74,0,0,144,200],"54,176":[74,0,0,144],"54,177":[74,141,200,144,206],"55,175":[74],"55,176":[74,208],"55,177":[74],"56,175":[112],"56,176":[112],"56,177":[74],"57,175":[112],"57,176":[112],"57,177":[74]},name:"Placeholder 52,177",start:"52,177"},{data:{"62,175":[112],"62,176":[112],"62,177":[112],"62,178":[112],"63,175":[112],"63,176":[74,141,200],"63,177":[112],"63,178":[112],"64,175":[74],"64,176":[74,141,203,144,200],"64,177":[74,208],"64,178":[112],"65,175":[74],"65,176":[74,141,206,144,206],"65,177":[74],"65,178":[112],"66,175":[74],"66,176":[74,0,0,144],"66,177":[74],"66,178":[112],"67,175":[74],"67,176":[74,0,0,144,203],"67,177":[74,0,0,84],"67,178":[74],"68,175":[112],"68,176":[74],"68,177":[74],"68,178":[112]},name:"Placeholder 67,177",start:"67,177"},{data:{"73,175":[112],"73,176":[112],"73,177":[74],"73,178":[112],"74,175":[74],"74,176":[74],"74,177":[74],"74,178":[74],"75,175":[74],"75,176":[74,0,0,144,204],"75,177":[74,0,0,84],"75,178":[74],"76,175":[74,0,0,144,205],"76,176":[112],"76,177":[74,0,0,144,206],"76,178":[112],"77,175":[74],"77,176":[74],"77,177":[74],"77,178":[112],"78,175":[112],"78,176":[74],"78,177":[112],"78,178":[112],"79,175":[112],"79,176":[74],"79,177":[112],"79,178":[74],"80,175":[112],"80,176":[74],"80,177":[112],"80,178":[74],"81,175":[112],"81,176":[74],"81,177":[112],"81,178":[74],"82,175":[112],"82,176":[74],"82,177":[112],"82,178":[112],"83,175":[74],"83,176":[74],"83,177":[74],"83,178":[74],"84,175":[74],"84,176":[74],"84,177":[74],"84,178":[74],"85,175":[74,141,205,144],"85,176":[112],"85,177":[74,141,206],"85,178":[112],"86,175":[74,208],"86,176":[74,141,204],"86,177":[112],"86,178":[112],"87,175":[74],"87,176":[74],"87,177":[74],"87,178":[74],"88,175":[74],"88,176":[74],"88,177":[74],"88,178":[112]},name:"Placeholder 75,177",start:"75,177"},{data:{"100,175":[112],"100,176":[74,208],"100,177":[74,141,200],"100,178":[112],"100,179":[74,141,200],"100,180":[74,141,200],"100,181":[74,141,200],"101,175":[112],"101,176":[112],"101,177":[74,141,200],"101,178":[112],"101,179":[74],"101,180":[74],"101,181":[74,0,0,84],"92,175":[112],"92,176":[112],"92,177":[74,141,200],"92,178":[112],"92,179":[112],"92,180":[112],"92,181":[112],"93,175":[112],"93,176":[74,141,200],"93,177":[74,141,200],"93,178":[74,141,200],"93,179":[112],"93,180":[74,141,200],"93,181":[74,141,200],"94,175":[112],"94,176":[74,141,200],"94,177":[74],"94,178":[74,141,200],"94,179":[74,141,200,144],"94,180":[74,141,200],"94,181":[74],"95,175":[112],"95,176":[112],"95,177":[112],"95,178":[112],"95,179":[112],"95,180":[74,141,200],"95,181":[74,141,200],"96,175":[112],"96,176":[74,141,200],"96,177":[74,141,200],"96,178":[112],"96,179":[74,141,206],"96,180":[74,141,200],"96,181":[112],"97,175":[112],"97,176":[74,141,200],"97,177":[74,141,200,144,206],"97,178":[112],"97,179":[74,141,200],"97,180":[74,141,200],"97,181":[112],"98,175":[112],"98,176":[74,141,200],"98,177":[74,141,200],"98,178":[112],"98,179":[74,141,200],"98,180":[74,141,200],"98,181":[74,141,200],"99,175":[112],"99,176":[112],"99,177":[74,141,200],"99,178":[74,141,200,144],"99,179":[74,141,200,144],"99,180":[74,141,200,144],"99,181":[74,141,200,144]},name:"Placeholder 101,181",start:"101,181"}],Is={block_goal:"144",block_mirror_bd:"211",block_mirror_bl:"210",block_mirror_br:"212",block_mirror_bu:"209",block_mirror_dl:"183",block_mirror_dr:"185",block_mirror_ul:"186",block_mirror_ul_dr:"182",block_mirror_ur:"184",block_mirror_ur_dl:"181",color:"199",color_b:"204",color_g:"205",color_gb:"202",color_r:"206",color_rb:"201",color_rg:"203",color_rgb:"200",floor:"74",floor_laser:"141",heart:"216",level_goal:"208",level_start:"84",offset_placeholder_negative:"198",offset_placeholder_positive:"197",post_up:"217",time_immune_changer:"215",wall:"112",wall_laser:"213",wall_player:"214"},Ls={height:32,width:32},Es={idToName:Ps,levels:Os,nameToId:Is,tileSize:Ls},js={solved:{},current:0},zs=function(){function e(){Ht(this,e),this.load(),this.totalLevels=Es.levels.length}return Vt(e,[{key:"load",value:function(){var e=localStorage.getItem("torobanSaveDataV1")||btoa(JSON.stringify(js));this.store=JSON.parse(atob(e))}},{key:"save",value:function(){localStorage.setItem("torobanSaveDataV1",btoa(JSON.stringify(this.store)))}},{key:"solved",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.store.current;this.store.solved[e]={dateLastSolved:new Date},this.save()}},{key:"findNext",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.store.current,t=e;t in this.store.solved&&t<this.totalLevels;)++t;return t>this.totalLevels-1?this.totalLevels-1:t}},{key:"findPrevious",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.store.current,t=e;t in this.store.solved&&t>0;)--t;return 0===t&&t in this.store.solved?this.store.current:Math.max(t,0)}},{key:"setLevel",value:function(e){this.store.current=e,this.save()}},{key:"currentLevel",get:function(){return this.store.current}},{key:"solvedLevels",get:function(){return Object.keys(this.store.solved).length}}]),e}(),Cs=function(){function e(){Ht(this,e),this.actions=[]}return Vt(e,[{key:"push",value:function(e){var t=new Ms(e);return t.execute()?(this.actions.push(t),!0):(t.rollback(),!1)}},{key:"pushToLast",value:function(e){if(this.actions.length>0){if(this.actions.top().addChild(e))return!0;this.actions.top().rollbackLast()}return!1}},{key:"pop",value:function(){if(this.actions.length>0){
for(var e=!0;e&&this.actions.length>0;)e=!this.actions.top().undo(),this.actions.pop();return!0}return!1}},{key:"reset",value:function(){this.actions=[]}}]),e}(),Ms=function(){function e(t){Ht(this,e),this.children=[],this.action=t}return Vt(e,[{key:"execute",value:function(){var e=dt(this.action,"execute",this);return this.addChildren(e)}},{key:"rollback",value:function(){for(;this.children.length>0;)this.children.top().rollback(),this.children.pop();dt(this.action,"rollback",this)}},{key:"rollbackLast",value:function(){this.children.length>0&&(this.children.top().rollback(),this.children.pop())}},{key:"rollbackIfOptional",value:function(){return!!this.action.optional&&(this.rollback(),!0)}},{key:"undo",value:function(){for(var e=!1,t=this.children.length-1;t>=0;--t){this.children[t].undo()&&(e=!0)}var n=dt(this.action,"undo",this);return e||n}},{key:"addChild",value:function(t){var n=new e(t);return this.children.push(n),n.execute()}},{key:"addChildren",value:function(e){if(!1===e)return this.rollbackIfOptional();if("object"===(void 0===e?"undefined":qt(e))&&void 0===e.length&&(e=[e]),e&&e.length>0){var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(!this.addChild(a))return this.rollbackIfOptional()}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}return!0}}]),e}(),Ds=new bn,Bs=new PIXI.Application(window.innerWidth,window.innerHeight,{backgroundColor:0}),Rs=(Bs.stage.addChild(new PIXI.Container),Bs.stage.addChild(new PIXI.Container)),Fs=Bs.stage.addChild(new PIXI.Container),Ns=new xs,Gs=new ks,qs=new ws,Hs=new Ts(Ns,Bs,Rs),Vs=new zs,Xs=new Cs;Ds.component("position",function(){function e(){Ht(this,e)}return Vt(e,[{key:"onCreate",value:function(e){this.entity=e;for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.set.apply(this,n)}},{key:"onRemove",value:function(){Gs.remove(this.entity)}},{key:"zeroNaN",value:function(e){return isNaN(e)?0:e}},{key:"getDiff",value:function(e,t){return{x:this.zeroNaN(e-this._x),y:this.zeroNaN(t-this._y)}}},{key:"update",value:function(e){var t=Gs.update(this.entity);this.entity.has("positionChanged")?this.entity.remove("positionChanged"):this.entity.set("positionChanged",{diff:e,wrapped:t})}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this._x!==e||this._y!==t){var n=this.getDiff(e,t);this._x=e,this._y=t,this.update(n)}}},{key:"x",set:function(e){if(this._x!==e){var t=this.getDiff(e,void 0);this._x=e,this.update(t)}},get:function(){return this._x}},{key:"y",set:function(e){if(this._y!==e){var t=this.getDiff(void 0,e);this._y=e,this.update(t)}},get:function(){return this._y}}]),e}()),Ds.component("sprite",function(){function e(){Ht(this,e)}return Vt(e,[{key:"onCreate",value:function(e,t,n,r,i){this.entity=e,this.container=t,this.create(n,r,i)}},{key:"create",value:function(e,t,n){e?(e=this.getTIName(e),this.sprite=new PIXI.Sprite(PIXI.utils.TextureCache[e+".png"]),this.name=e):this.sprite=new PIXI.Sprite,this.name=this.getTIName(e),this.sprite=kt(this.name),this.sprite.anchor.set(.5),this.sprite.zIndex=t||0,n&&(this.sprite.position.x=n.x,this.sprite.position.y=n.y),this.onCreated()}},{key:"update",value:function(){this.container.toUpdate.add(this.sprite.zIndex)}},{key:"onRemove",value:function(){this.update(),this.container.removeChild(this.sprite)}},{key:"onCreated",value:function(){this.update(),this.container.addChild(this.sprite)}},{key:"set",value:function(e){return(e=this.getTIName(e))!==this.name&&(this.sprite.texture=PIXI.utils.TextureCache[e+".png"],this.name=e,this.update(),!0)}},{key:"updateTimeImmune",value:function(){this.set(this.name)}},{key:"getTIName",value:function(e){if(e){e.endsWith("_ti")&&(e=e.slice(0,-"_ti".length));var t=e+"_ti";return this.entity.has("timeImmune")&&PIXI.utils.TextureCache[t+".png"]&&(e=t),e}}},{key:"zIndex",set:function(e){this.onRemove(),this.sprite.zIndex=e,this.onCreated()},get:function(){return this.sprite.zIndex}}]),e}()),Ds.component("inputMovement",function(){function e(){Ht(this,e)}return Vt(e,[{key:"onCreate",value:function(e,t){this.currentDirection={x:0,y:0},this.lastDirection={x:0,y:0},this.enable=t}}]),e}()),Ds.component("cameraFollows",function(){function e(){Ht(this,e)}return Vt(e,[{key:"onCreate",value:function(e){this.update()}},{key:"update",value:function(){this.center=!0;var e=Hs.scale;this.borderSize={x:ms.gameSize.width/e*.33,y:ms.gameSize.height/e*.33},this.deadzone=new PIXI.Rectangle(this.borderSize.x,this.borderSize.y,ms.gameSize.width/e-2*this.borderSize.x,ms.gameSize.height/e-2*this.borderSize.y)}}]),e}()),Ds.component("logicAction",function(){function e(){Ht(this,e)}return Vt(e,[{key:"onCreate",value:function(e,t){this.action=t}}]),e}()),Ds.component("logic",function(){function e(){Ht(this,e)}return Vt(e,[{key:"onCreate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var n in t)this[n]=t[n]}}]),e}()),Ds.component("partOfLayer",function(){function e(){Ht(this,e)}return Vt(e,[{key:"onCreate",value:function(e,t){this.layer=t}}]),e}()),Ds.component("levelGoal",function(){function e(){Ht(this,e)}return Vt(e,[{key:"onCreate",value:function(e,t){this.completed=t||!1}}]),e}()),Ds.component("goal",function(){function e(){Ht(this,e)}return Vt(e,[{key:"onCreate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.solved=t}}]),e}()),Ds.component("tween",function(){function e(){Ht(this,e)}return Vt(e,[{key:"onCreate",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;if(this.entity=e,this.target=n,this.time=r,this.total=0,t)this.start=t;else{var i=this.entity.get("sprite").sprite;this.start={x:i.x,y:i.y}}}},{key:"update",value:function(e,t){this.total+=e;var n=Math.min(1,this.total/this.time),r=pt(this.start,this.target,n),i=this.entity.get("sprite");i.sprite.x=r.x,i.sprite.y=r.y,i.container.toUpdate.add(i.sprite.zIndex),1===n&&(this.entity.remove("tween"),ft(t))}}]),e}()),Ds.component("timeImmune",function(){function e(){Ht(this,e)}return Vt(e,[{key:"onCreate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.entity=e,this.permanent=t,this.updateSprite()}},{key:"onRemove",value:function(){this.updateSprite()}},{key:"updateSprite",value:function(){var e=this.entity.get("sprite");e&&e.updateTimeImmune()}}]),e}());var Ws={primary:function(e){var t=e.sprite,n=e.tint;return t.sprite.tint=n},secondary:function(e){var t=e.sprite,n=e.tint,r=!0,i=!1,o=void 0;try{for(var a,s=t.sprite.children[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){a.value.tint=n}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}};Ds.component("color",function(){function e(){Ht(this,e)}return Vt(e,[{key:"onCreate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.tinters=Xt({},Ws,n),this.entity=e,this.colors={};for(var r in t)this.set(r,t[r])}},{key:"toRgb",value:function(e){return xt(this.get(e))}},{key:"get",value:function(e){return this.colors[e]||0}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("string"==typeof t&&(t=At(t)),this.colors[e]!==t){this.colors[e]=t;var n=this.entity.get("sprite");if(n){var r=this.toRgb(e),i=this.tinters[e];"function"==typeof i?i({entity:this.entity,sprite:n,tint:r}):(n.sprite.tint=r,console.warn("Fallback tinter triggered in color component")),n.update()}}}}]),e}()),Ds.component("receivingLaser",function(){function e(){Ht(this,e)}return Vt(e,[{key:"onCreate",value:function(){this.color3=0}},{key:"addColor3",value:function(e){this.color3|=e}}]),e}()),Ds.component("life",function(){function e(){Ht(this,e)}return Vt(e,[{key:"onCreate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.points=t}},{key:"points",set:function(e){this._points=Math.max(0,e),this.max=Math.max(this._points,this.max||0)},get:function(){return this._points}}]),e}()),Ds.system(function(){function e(){Ht(this,e)}return Vt(e,[{key:"initialize",value:function(){qs.setData(Es),qs.register(["level_start"],function(e){return e.destroy()}),Ss.send("loadLevel")}},{key:"pre",value:function(){Ss.process("restart",function(){Ss.send("loadLevel")}),Ss.process("nextLevel",function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Vs.store.current+1,n=e?Vs.findNext(t):Math.min(t,Vs.totalLevels-1);Ss.send("loadLevel",n)}),Ss.process("previousLevel",function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Vs.store.current-1,n=e?Vs.findPrevious(t):Math.max(t,0);Ss.send("loadLevel",n)}),Ss.process("solveLevel",function(){Vs.solved(),Ss.send("loadLevel",Vs.findNext())}),Ss.clear("loaded"),Ss.process("loadLevel",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vs.store.current;qs.loadTiles(e),Vs.setLevel(e),Ss.send("resetPlayer",{position:lt(qs.level.start)}),Ss.send("loaded")})}}]),e}());var Us=r(function(e,t){!function(t){e.exports=function(){return function e(t,r,i){function o(s,u){if(!r[s]){if(!t[s]){var l="function"==typeof n&&n;if(!u&&l)return l(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=r[s]={exports:{}};t[s][0].call(d.exports,function(e){var n=t[s][1][e];return o(n||e)},d,d.exports,e,t,r,i)}return r[s].exports}for(var a="function"==typeof n&&n,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(){}var o="function"!=typeof Object.create&&"~";i.prototype._events=void 0,i.prototype.listeners=function(e,t){var n=o?o+e:e,r=this._events&&this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,s=new Array(a);i<a;i++)s[i]=r[i].fn;return s},i.prototype.emit=function(e,t,n,r,i,a){var s=o?o+e:e;if(!this._events||!this._events[s])return!1;var u,l,c=this._events[s],d=arguments.length;if("function"==typeof c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,i),!0;case 6:return c.fn.call(c.context,t,n,r,i,a),!0}for(l=1,u=new Array(d-1);l<d;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var f,h=c.length;for(l=0;l<h;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,n);break;default:if(!u)for(f=1,u=new Array(d-1);f<d;f++)u[f-1]=arguments[f];c[l].fn.apply(c[l].context,u)}}return!0},i.prototype.on=function(e,t,n){var i=new r(t,n||this),a=o?o+e:e;return this._events||(this._events=o?{}:Object.create(null)),this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],i]:this._events[a].push(i):this._events[a]=i,this},i.prototype.once=function(e,t,n){var i=new r(t,n||this,!0),a=o?o+e:e;return this._events||(this._events=o?{}:Object.create(null)),this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],i]:this._events[a].push(i):this._events[a]=i,this},i.prototype.removeListener=function(e,t,n,r){var i=o?o+e:e;if(!this._events||!this._events[i])return this;var a=this._events[i],s=[];if(t)if(a.fn)(a.fn!==t||r&&!a.once||n&&a.context!==n)&&s.push(a);else for(var u=0,l=a.length;u<l;u++)(a[u].fn!==t||r&&!a[u].once||n&&a[u].context!==n)&&s.push(a[u]);return s.length?this._events[i]=1===s.length?s[0]:s:delete this._events[i],this},i.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[o?o+e:e]:this._events=o?{}:Object.create(null),this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=o,void 0!==t&&(t.exports=i)},{}],2:[function(e,t,n){n.__esModule=!0;var r=e("./lib/input.js"),i=function(e){return e&&e.__esModule?e:{default:e}}(r);n.default=i.default,t.exports=n.default},{"./lib/input.js":3}],3:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":qt(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}n.__esModule=!0;var a=e("eventemitter3"),s=r(a);e("./polyfill.js");var u=e("./touch.js"),l=r(u),c="ontouchstart"in window,d=c?{touchstart:"start",touchmove:"move",touchend:"end",touchcancel:"end"}:{mousedown:"start",mousemove:"move",mouseup:"end"},f=Object.keys(d),h=function(e){function t(){i(this,t),e.call(this),this.touches=new Set,this.actives=new Map,this.tickBound=this.tick.bind(this),this.tickInterval=0,this.pooledTouches=[]}return o(t,e),t.prototype.attach=function(){var e=this;this.attached||(this.attached=!0,this.tickInterval=window.requestAnimationFrame(this.tickBound),f.forEach(function(t){return window.addEventListener(t,e,!1)}))},t.prototype.detach=function(){var e=this;this.attached&&(this.attached=!1,window.cancelAnimationFrame(this.tickInterval),f.forEach(function(t){return window.removeEventListener(t,e,!1)}))},t.prototype.handleEvent=function(e){e.preventDefault();for(var t=d[e.type],n=c?e.changedTouches:[e],r=0,i=n.length;r<i;r++){var o=n[r];if("start"!==t){var a=o.identifier||0;if(this.actives.has(a)){var s=this.actives.get(a);"end"!==t?s.move(o):(s.end(),this.actives.delete(s.id))}}else{var u=this.pooledTouches.pop()||new l.default(this);u.fromTouch(o),this.actives.set(u.id,u),this.touches.add(u)}}},t.prototype.tick=function(){var e=this;this.tickInterval=window.requestAnimationFrame(this.tickBound),this.touches.forEach(function(t){if(t.isFinal)return t.delete(),e.touches.delete(t),void e.pooledTouches.push(t);t.tick()})},t}(s.default);n.default=new h,t.exports=n.default},{"./polyfill.js":4,"./touch.js":5,eventemitter3:1}],4:[function(e,t,n){"performance"in window||(window.performance=window.webkitPerformance||{}),"now"in performance||(performance.now=function(){return Date.now()})},{}],5:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":qt(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}n.__esModule=!0;var a,s,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("eventemitter3"),c=r(l),d=e("./vec2d.js"),f=r(d),h={BEGAN:"began",MOVED:"moved",STATIONARY:"stationary",ENDED:"ended",CANCELED:"canceled",BEGIN:"willBegin",END:"willEnd"},p=(a={},a[h.BEGIN]=h.BEGAN,a[h.BEGAN]=h.STATIONARY,a[h.END]=h.ENDED,a),v=(s={},s[h.BEGAN]="touchBegan",s[h.STATIONARY]="touchStationary",s[h.MOVED]="touchMoved",s[h.ENDED]="touchEnded",s.deleted="touchDeleted",s),_=function(e){function t(n){i(this,t),e.call(this),this.input=n,this.id=0,this.phase="",this.time=0,this.startTime=0,this.previousTime=0,this.position=f.default.create(0,0),this.startPosition=f.default.create(0,0),this.previousPosition=f.default.create(0,0),this.positions=new Set,this.didUpdate=!1,this.details=null}return o(t,e),t.prototype.fromTouch=function(e){this.id=e.identifier||0,this.startTime=performance.now(),this.time=this.startTime,this.startPosition[0]=e.pageX,this.startPosition[1]=e.pageY,this.position.set(this.startPosition),this.previousPosition.set(this.startPosition),this.phase=h.BEGIN},t.prototype.tick=function(){this.previousTime=this.time,this.time=performance.now();var e=!1;p[this.phase]?(this.phase=p[this.phase],e=!0):this.didMove&&(e=!0,this.phase!==h.MOVED&&(this.phase=h.MOVED)),e&&this.emit(this.phase),this.didUpdate=!1,this.didMove=!1},t.prototype.move=function(e){this.markUpdated(),this.didMove=!0,this.position[0]=e.pageX,this.position[1]=e.pageY,this.positions.add(f.default.create(this.position[0],this.position[1]))},t.prototype.end=function(){this.markUpdated(),this.phase=h.END},t.prototype.markUpdated=function(){this.didUpdate||(this.didUpdate=!0,f.default.freeAll(this.positions),this.previousPosition.set(this.position))},t.prototype.emit=function(t){var n={touch:this};e.prototype.emit.call(this,t,n),this.input.emit(v[t],n)},t.prototype.delete=function(){this.emit("deleted"),this.removeAllListeners(),f.default.freeAll(this.positions),this.details=null},u(t,[{key:"deltaTime",get:function(){return this.time-this.previousTime}},{key:"isFinal",get:function(){return this.phase===h.ENDED}}]),t}(c.default);n.default=_,t.exports=n.default},{"./vec2d.js":6,eventemitter3:1}],6:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var i=function(){function e(){r(this,e),this.pool=[]}return e.prototype.create=function(e,t){var n=this.pool.pop()||new Uint32Array(2);return n[0]=e,n[1]=t,n},e.prototype.free=function(e){this.pool.push(e)},e.prototype.freeAll=function(e){e.forEach(this.free,this),e.clear()},e}();n.default=new i,t.exports=n.default},{}]},{},[2])(2)}()}()}),Ks=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(Us),$s=r(function(e,t){(function(){var e,n,r,i,o,a,s,u,l,c,d,f,h,p,v,_,y,m,g,b={}.hasOwnProperty,k=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};a={is_unordered:!1,is_counting:!1,is_exclusive:!1,is_solitary:!1,prevent_default:!1,prevent_repeat:!1,normalize_caps_lock:!1},m="meta alt option ctrl shift cmd".split(" "),_="ctrl",e={debug:!1};var w=function(e){var t,n;for(t in e)b.call(e,t)&&!1!==(n=e[t])&&(this[t]=n);this.keys=this.keys||[],this.count=this.count||0};w.prototype.allows_key_repeat=function(){return!this.prevent_repeat&&"function"==typeof this.on_keydown},w.prototype.reset=function(){return this.count=0,this.keyup_fired=null};var x=function(e,t){var n,r;"undefined"!=typeof jQuery&&null!==jQuery&&e instanceof jQuery&&(1!==e.length&&v("Warning: your jQuery selector should have exactly one object."),e=e[0]),this.should_force_event_defaults=this.should_suppress_event_defaults=!1,this.sequence_delay=800,this._registered_combos=[],this._keys_down=[],this._active_combos=[],this._sequence=[],this._sequence_timer=null,this._prevent_capture=!1,this._defaults=t||{};for(n in a)b.call(a,n)&&(r=a[n],this._defaults[n]=this._defaults[n]||r);this.element=e||document.body,n=function(e,t,n){return e.addEventListener?e.addEventListener(t,n):e.attachEvent&&e.attachEvent("on"+t,n),n};var i=this;this.keydown_event=n(this.element,"keydown",function(e){return e=e||window.event,i._receive_input(e,!0),i._bug_catcher(e)});var o=this;this.keyup_event=n(this.element,"keyup",function(e){return e=e||window.event,o._receive_input(e,!1)});var s=this;this.blur_event=n(window,"blur",function(){var e,t,n,r;for(r=s._keys_down,t=0,n=r.length;t<n;t++)e=r[t],s._key_up(e,{});return s._keys_down=[]})};x.prototype.destroy=function(){var e;return e=function(e,t,n){return null!=e.removeEventListener?e.removeEventListener(t,n):null!=e.removeEvent?e.removeEvent("on"+t,n):void 0},e(this.element,"keydown",this.keydown_event),e(this.element,"keyup",this.keyup_event),e(window,"blur",this.blur_event)},x.prototype._bug_catcher=function(e){var t,n;if("cmd"===_&&0<=k.call(this._keys_down,"cmd")&&"cmd"!==(t=i(null!=(n=e.keyCode)?n:e.key))&&"shift"!==t&&"alt"!==t&&"caps"!==t&&"tab"!==t)return this._receive_input(e,!1)},x.prototype._cmd_bug_check=function(e){return!("cmd"===_&&0<=k.call(this._keys_down,"cmd")&&0>k.call(e,"cmd"))},x.prototype._prevent_default=function(e,t){if((t||this.should_suppress_event_defaults)&&!this.should_force_event_defaults&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation))return e.stopPropagation()},x.prototype._get_active_combos=function(e){var t,n;return t=[],n=s(this._keys_down,function(t){return t!==e}),n.push(e),this._match_combo_arrays(n,function(e){return function(n){if(e._cmd_bug_check(n.keys))return t.push(n)}}(this)),this._fuzzy_match_combo_arrays(n,function(e){return function(n){if(!(0<=k.call(t,n))&&!n.is_solitary&&e._cmd_bug_check(n.keys))return t.push(n)}}(this)),t},x.prototype._get_potential_combos=function(e){var t,n,r,i,o;for(n=[],o=this._registered_combos,r=0,i=o.length;r<i;r++)t=o[r],t.is_sequence||0<=k.call(t.keys,e)&&this._cmd_bug_check(t.keys)&&n.push(t);return n},x.prototype._add_to_active_combos=function(e){var t,n,r,i,o,a,s,u,l,c,d;if(a=!1,o=!0,r=!1,0<=k.call(this._active_combos,e))return!0;if(this._active_combos.length)for(i=s=0,c=this._active_combos.length;0<=c?s<c:s>c;i=0<=c?++s:--s)if((t=this._active_combos[i])&&t.is_exclusive&&e.is_exclusive){if(t=t.keys,!a)for(u=0,l=t.length;u<l;u++)if(n=t[u],a=!0,0>k.call(e.keys,n)){a=!1;break}if(o&&!a)for(d=e.keys,u=0,l=d.length;u<l;u++)if(n=d[u],o=!1,0>k.call(t,n)){o=!0;break}a&&(r?null!=(t=this._active_combos.splice(i,1)[0])&&t.reset():(t=this._active_combos.splice(i,1,e)[0],null!=t&&t.reset(),r=!0),o=!1)}return o&&this._active_combos.unshift(e),a||o},x.prototype._remove_from_active_combos=function(e){var t,n,r;for(t=n=0,r=this._active_combos.length;0<=r?n<r:n>r;t=0<=r?++n:--n)if(this._active_combos[t]===e){e=this._active_combos.splice(t,1)[0],e.reset();break}},x.prototype._get_possible_sequences=function(){var e,t,n,r,i,o,a,u,l,c,d,f;for(r=[],c=this._registered_combos,o=0,l=c.length;o<l;o++)for(e=c[o],t=a=1,d=this._sequence.length;1<=d?a<=d:a>=d;t=1<=d?++a:--a)if(i=this._sequence.slice(-t),e.is_sequence){if(0>k.call(e.keys,"shift")&&(i=s(i,function(e){return"shift"!==e}),!i.length))continue;for(t=u=0,f=i.length;0<=f?u<f:u>f;t=0<=f?++u:--u){if(e.keys[t]!==i[t]){n=!1;break}n=!0}n&&r.push(e)}return r},x.prototype._add_key_to_sequence=function(e,t){var n,r,i,o;if(this._sequence.push(e),r=this._get_possible_sequences(),r.length){for(i=0,o=r.length;i<o;i++)n=r[i],this._prevent_default(t,n.prevent_default);if(this._sequence_timer&&clearTimeout(this._sequence_timer),-1<this.sequence_delay){var a=this;this._sequence_timer=setTimeout(function(){return a._sequence=[]},this.sequence_delay)}}else this._sequence=[]},x.prototype._get_sequence=function(e){var t,n,r,i,o,a,u,l,c,d,f,h;for(d=this._registered_combos,a=0,c=d.length;a<c;a++)if(t=d[a],t.is_sequence){for(n=u=1,f=this._sequence.length;1<=f?u<=f:u>=f;n=1<=f?++u:--u)if(o=s(this._sequence,function(e){return 0<=k.call(t.keys,"shift")||"shift"!==e}).slice(-n),t.keys.length===o.length)for(n=l=0,h=o.length;0<=h?l<h:l>h;n=0<=h?++l:--l)if(i=o[n],!(0>k.call(t.keys,"shift")&&"shift"===i||"shift"===e&&0>k.call(t.keys,"shift"))){if(t.keys[n]!==i){r=!1;break}r=!0}if(r)return t.is_exclusive&&(this._sequence=[]),t}return!1},x.prototype._receive_input=function(e,t){var n,r;if(this._prevent_capture)this._keys_down.length&&(this._keys_down=[]);else if(n=i(null!=(r=e.keyCode)?r:e.key),(t||this._keys_down.length||!("alt"===n||n===_))&&n)return t?this._key_down(n,e):this._key_up(n,e)},x.prototype._fire=function(e,t,n,r){if("function"==typeof t["on_"+e]&&this._prevent_default(n,!0!==t["on_"+e].call(t.this,n,t.count,r)),"release"===e&&(t.count=0),"keyup"===e)return t.keyup_fired=!0},x.prototype._match_combo_arrays=function(e,t){var i,o,a,s,u;for(u=this._registered_combos,a=0,s=u.length;a<s;a++)o=u[a],i=e.slice(0),o.normalize_caps_lock&&0<=k.call(i,"caps")&&i.splice(i.indexOf("caps"),1),(!o.is_unordered&&r(i,o.keys)||o.is_unordered&&n(i,o.keys))&&t(o)},x.prototype._fuzzy_match_combo_arrays=function(e,t){var n,r,i,o;for(o=this._registered_combos,r=0,i=o.length;r<i;r++)n=o[r],(!n.is_unordered&&c(n.keys,e)||n.is_unordered&&l(n.keys,e))&&t(n)},x.prototype._keys_remain=function(e){var t,n,r,i;for(i=e.keys,n=0,r=i.length;n<r;n++)if(e=i[n],0<=k.call(this._keys_down,e)){t=!0;break}return t},x.prototype._key_down=function(e,t){var n,r,i,a,s;(n=o(e,t))&&(e=n),this._add_key_to_sequence(e,t),(n=this._get_sequence(e))&&this._fire("keydown",n,t);for(i in y)n=y[i],t[n]&&(i===e||0<=k.call(this._keys_down,i)||this._keys_down.push(i));for(i in y)if(n=y[i],i!==e&&0<=k.call(this._keys_down,i)&&!t[n]&&!("cmd"===i&&"cmd"!==_))for(n=r=0,a=this._keys_down.length;0<=a?r<a:r>a;n=0<=a?++r:--r)this._keys_down[n]===i&&this._keys_down.splice(n,1);for(r=this._get_active_combos(e),i=this._get_potential_combos(e),a=0,s=r.length;a<s;a++)n=r[a],this._handle_combo_down(n,i,e,t);if(i.length)for(r=0,a=i.length;r<a;r++)n=i[r],this._prevent_default(t,n.prevent_default);0>k.call(this._keys_down,e)&&this._keys_down.push(e)},x.prototype._handle_combo_down=function(e,t,n,r){var i,o,a,s,u;if(0>k.call(e.keys,n))return!1;if(this._prevent_default(r,e&&e.prevent_default),i=!1,0<=k.call(this._keys_down,n)&&(i=!0,!e.allows_key_repeat()))return!1;if(a=this._add_to_active_combos(e,n),n=e.keyup_fired=!1,e.is_exclusive)for(s=0,u=t.length;s<u;s++)if(o=t[s],o.is_exclusive&&o.keys.length>e.keys.length){n=!0;break}return!n&&(e.is_counting&&"function"==typeof e.on_keydown&&(e.count+=1),a)?this._fire("keydown",e,r,i):void 0},x.prototype._key_up=function(e,t){var n,r,i,a,s,u;if(n=e,(i=o(e,t))&&(e=i),i=p[n],t.shiftKey?i&&0<=k.call(this._keys_down,i)||(e=n):n&&0<=k.call(this._keys_down,n)||(e=i),(a=this._get_sequence(e))&&this._fire("keyup",a,t),0>k.call(this._keys_down,e))return!1;for(a=s=0,u=this._keys_down.length;0<=u?s<u:s>u;a=0<=u?++s:--s)if((r=this._keys_down[a])===e||r===i||r===n){this._keys_down.splice(a,1);break}for(r=this._active_combos.length,i=[],u=this._active_combos,a=0,s=u.length;a<s;a++)n=u[a],0<=k.call(n.keys,e)&&i.push(n);for(a=0,s=i.length;a<s;a++)n=i[a],this._handle_combo_up(n,t,e);if(1<r)for(s=this._active_combos,r=0,a=s.length;r<a;r++)void 0===(n=s[r])||0<=k.call(i,n)||this._keys_remain(n)||this._remove_from_active_combos(n)},x.prototype._handle_combo_up=function(e,t,r){var i,o;this._prevent_default(t,e&&e.prevent_default),o=this._keys_remain(e),e.keyup_fired||(i=this._keys_down.slice(),i.push(r),e.is_solitary&&!n(i,e.keys))||(this._fire("keyup",e,t),e.is_counting&&"function"==typeof e.on_keyup&&"function"!=typeof e.on_keydown&&(e.count+=1)),o||(this._fire("release",e,t),this._remove_from_active_combos(e))},x.prototype.simple_combo=function(e,t){return this.register_combo({keys:e,on_keydown:t})},x.prototype.counting_combo=function(e,t){return this.register_combo({keys:e,is_counting:!0,is_unordered:!1,on_keydown:t})},x.prototype.sequence_combo=function(e,t){return this.register_combo({keys:e,on_keydown:t,is_sequence:!0,is_exclusive:!0})},x.prototype.register_combo=function(e){var t,n,r;"string"==typeof e.keys&&(e.keys=e.keys.split(" ")),r=this._defaults;for(t in r)b.call(r,t)&&(n=r[t],void 0===e[t]&&(e[t]=n));if(e=new w(e),g(e))return this._registered_combos.push(e),e},x.prototype.register_many=function(e){var t,n,r,i;for(i=[],n=0,r=e.length;n<r;n++)t=e[n],i.push(this.register_combo(t));return i},x.prototype.unregister_combo=function(e){var t,i,o,a,s,u;if(!e)return!1;var l=this;if(i=function(e){var t,n,r,i;for(i=[],t=n=0,r=l._registered_combos.length;0<=r?n<r:n>r;t=0<=r?++n:--n){if(e===l._registered_combos[t]){l._registered_combos.splice(t,1);break}i.push(void 0)}return i},e instanceof w)return i(e);for("string"==typeof e&&(e=e.split(" ")),s=this._registered_combos,u=[],o=0,a=s.length;o<a;o++)null!=(t=s[o])&&(t.is_unordered&&n(e,t.keys)||!t.is_unordered&&r(e,t.keys)?u.push(i(t)):u.push(void 0));return u},x.prototype.unregister_many=function(e){var t,n,r,i;for(i=[],n=0,r=e.length;n<r;n++)t=e[n],i.push(this.unregister_combo(t));return i},x.prototype.get_registered_combos=function(){return this._registered_combos},x.prototype.reset=function(){return this._registered_combos=[]},x.prototype.listen=function(){return this._prevent_capture=!1},x.prototype.stop_listening=function(){return this._prevent_capture=!0},x.prototype.get_meta_key=function(){return _},e.Listener=x,i=function(e){return h[e]},s=function(e,t){var n;if(e.filter)return e.filter(t);var r,i,o;for(o=[],r=0,i=e.length;r<i;r++)n=e[r],t(n)&&o.push(n);return o},n=function(e,t){var n,r,i;if(e.length!==t.length)return!1;for(r=0,i=e.length;r<i;r++)if(n=e[r],!(0<=k.call(t,n)))return!1;return!0},r=function(e,t){var n,r,i;if(e.length!==t.length)return!1;for(n=r=0,i=e.length;0<=i?r<i:r>i;n=0<=i?++r:--r)if(e[n]!==t[n])return!1;return!0},l=function(e,t){var n,r,i;for(r=0,i=e.length;r<i;r++)if(n=e[r],0>k.call(t,n))return!1;return!0},u=Array.prototype.indexOf||function(e,t){var n,r,i;for(n=r=0,i=e.length;0<=i?r<=i:r>=i;n=0<=i?++r:--r)if(e[n]===t)return n;return-1},c=function(e,t){var n,r,i,o;for(i=r=0,o=e.length;i<o;i++){if(n=e[i],!((n=u.call(t,n))>=r))return!1;r=n}return!0},v=function(){if(e.debug)return console.log.apply(console,arguments)},d=function(e){var t,n,r;t=!1;for(r in h)if(n=h[r],e===n){t=!0;break}if(!t)for(r in p)if(n=p[r],e===n){t=!0;break}return t},g=function(e){var t,n,r,i,o,s,l;for(o=!0,e.keys.length||v("You're trying to bind a combo with no keys:",e),n=s=0,l=e.keys.length;0<=l?s<l:s>l;n=0<=l?++s:--s)r=e.keys[n],(t=f[r])&&(r=e.keys[n]=t),"meta"===r&&e.keys.splice(n,1,_),"cmd"===r&&v('Warning: use the "meta" key rather than "cmd" for Windows compatibility');for(l=e.keys,t=0,s=l.length;t<s;t++)r=l[t],d(r)||(v('Do not recognize the key "'+r+'"'),o=!1);if(0<=k.call(e.keys,"meta")||0<=k.call(e.keys,"cmd")){for(t=e.keys.slice(),s=0,l=m.length;s<l;s++)r=m[s],-1<(n=u.call(t,r))&&t.splice(n,1);1<t.length&&(v("META and CMD key combos cannot have more than 1 non-modifier keys",e,t),o=!1)}for(i in e)"undefined"===a[i]&&v("The property "+i+" is not a valid combo property. Your combo has still been registered.");return o},o=function(e,t){var n;return!!t.shiftKey&&(null!=(n=p[e])&&n)},y={cmd:"metaKey",ctrl:"ctrlKey",shift:"shiftKey",alt:"altKey"},f={escape:"esc",control:"ctrl",command:"cmd",break:"pause",windows:"cmd",option:"alt",caps_lock:"caps",apostrophe:"'",semicolon:";",tilde:"~",accent:"`",scroll_lock:"scroll",num_lock:"num"},p={"/":"?",".":">",",":"<","'":'"',";":":","[":"{","]":"}","\\":"|","`":"~","=":"+","-":"_",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")"},h={0:"\\",8:"backspace",9:"tab",12:"num",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"print",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"cmd",92:"cmd",93:"cmd",96:"num_0",97:"num_1",98:"num_2",99:"num_3",100:"num_4",101:"num_5",102:"num_6",103:"num_7",104:"num_8",105:"num_9",106:"num_multiply",107:"num_add",108:"num_enter",109:"num_subtract",110:"num_decimal",111:"num_divide",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",124:"print",144:"num",145:"scroll",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"`",224:"cmd",225:"alt",57392:"ctrl",63289:"num",59:";",61:"=",173:"-"},e._keycode_dictionary=h,e._is_array_in_array_sorted=c,-1!==navigator.userAgent.indexOf("Mac OS X")&&(_="cmd"),-1!==navigator.userAgent.indexOf("Opera")&&(h[17]="cmd"),null!==t?t.keypress=e:window.keypress=e}).call(this)}),Ys=function(){function e(t,n){var r=this;Ht(this,e),this.keys={},n.forEach(function(e){r.keys[e]=!1,
t.register_combo({keys:e,on_keydown:function(){r.keys[e]=!0},on_keyup:function(){r.keys[e]=!1},prevent_repeat:!0})})}return Vt(e,[{key:"pressed",value:function(e){return e in this.keys&&this.keys[e]}}]),e}(),Qs=function(){function e(t,n,r){Ht(this,e),this.keys=t,this.delays=[0,n,r],this.timers={}}return Vt(e,[{key:"setInitialDelay",value:function(e){this.delays[1]=e}},{key:"setDelay",value:function(e){this.delays[2]=e}},{key:"update",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.keys.forEach(function(i){i in t.timers||(t.timers[i]={state:0,time:0});var o=t.timers[i];if(i in n&&n[i]){var a=t.delays[o.state];o.time+=1e3*e,o.time>=a&&(o.time-=a,o.state>=1&&o.time>a&&(o.time=0),o.state=Math.min(2,o.state+1),"function"==typeof r&&r(i))}else o.state=0,o.time=0})}}]),e}(),Js=60,Zs=250,eu=2,tu=new $s.keypress.Listener,nu=function(){return!1},ru=!1;Ds.system(function(){function e(){var t=this;Ht(this,e),this.buttons={},this.keys=new Ys(tu,["z"]),this.undoTimer=new Qs(["z"],Zs,Js),tu.simple_combo("t",function(){Ss.send("previousLevel")}),tu.simple_combo("g",function(){Ss.send("previousLevel",!1)}),tu.simple_combo("y",function(){Ss.send("nextLevel")}),tu.simple_combo("h",function(){Ss.send("nextLevel",!1)}),tu.simple_combo("r",function(){Ss.send("restart")}),nu=function(){return t.keys.pressed("z")||t.buttons.ui_rewind.down}}return Vt(e,[{key:"getTexture",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return PIXI.utils.TextureCache[e+(t?"_down":"")+".png"]}},{key:"createButton",value:function(e,t){var n=this,r=new PIXI.Sprite(this.getTexture(e));this.buttons[e]={sprite:r,down:!1},r.buttonMode=!0,r.interactive=!0,r.anchor.set(.5),r.x=80,r.y=80;var i=function(i){return function(){n.buttons[e].down=i,r.texture=n.getTexture(e,i),i&&"function"==typeof t&&t(),ru=i}};r.on("pointerdown",i(!0)),r.on("pointerup",i(!1)),r.on("pointerupoutside",i(!1)),Fs.addChild(r)}},{key:"initialize",value:function(){this.createButton("ui_rewind"),this.createButton("ui_previous",function(){return Ss.send("previousLevel")}),this.createButton("ui_restart",function(){return Ss.send("restart")}),this.createButton("ui_next",function(){return Ss.send("nextLevel")}),this.windowResized();var e=new PIXI.Text("DEMO version from ayebear.com",{fontFamily:"Arial",fontSize:32,fill:16777215,align:"center"});e.alpha=.75,Fs.addChild(e)}},{key:"windowResized",value:function(){this.buttons.ui_previous.sprite.x=Bs.renderer.width-416,this.buttons.ui_restart.sprite.x=Bs.renderer.width-256,this.buttons.ui_next.sprite.x=Bs.renderer.width-96}},{key:"pre",value:function(e){this.undoTimer.update(e,{z:nu()},function(e){Ss.send("undo"),Ss.replace("animationTime",Js)}),Ss.exists("windowResized")&&this.windowResized()}}]),e}()),Ds.system(function(){function e(){Ht(this,e),this.keys=new Ys(tu,["i","o"]),tu.simple_combo("u",function(){Hs.scale=eu}),tu.simple_combo("p",function(){Hs.scale=1})}return Vt(e,[{key:"initialize",value:function(){Hs.scale=eu}},{key:"pre",value:function(e){this.keys.pressed("i")&&(Hs.scale*=1+1*e),this.keys.pressed("o")&&(Hs.scale*=1-1*e)}}]),e}()),Ds.system(["inputMovement"],function(){function e(){Ht(this,e),this.currentKey=void 0,this.moveDelta={x:0,y:0},this.lastMoveDelta={x:0,y:0},this.keys={},this.touching=!1,this.id=0,this.initKeyboardInput(),this.initTouchInput()}return Vt(e,[{key:"pre",value:function(){var e=this;if(Ss.process("resetKeys",function(){e.resetKeys()}),!this.touching){var t=0;if(this.moveDelta={x:0,y:0},this.currentKey=void 0,!nu())for(var n in this.keys){var r=this.keys[n];r.down&&r.lastId>t&&(this.moveDelta.x=r.delta.x,this.moveDelta.y=r.delta.y,this.currentKey=n,t=r.lastId)}0==t&&(this.id=0)}0===this.moveDelta.x&&0===this.moveDelta.y||(this.lastMoveDelta.x=this.moveDelta.x,this.lastMoveDelta.y=this.moveDelta.y)}},{key:"every",value:function(e,t,n){var r=this;if(e.currentDirection.x=0,e.currentDirection.y=0,!e.enable||e.enable()){var i={};this.currentKey&&(i[this.currentKey]=!0),this.moveTimer.update(n,i,function(n){e.currentDirection.x=r.moveDelta.x,e.currentDirection.y=r.moveDelta.y,Ss.replace("animationTime",r.moveTimer.delays[2]),t.set("direction",{x:r.moveDelta.x,y:r.moveDelta.y})}),e.lastDirection.x=this.lastMoveDelta.x,e.lastDirection.y=this.lastMoveDelta.y}}},{key:"makeKey",value:function(e,t){return{delta:{x:e,y:t},down:!1,lastId:0}}},{key:"resetKeys",value:function(){for(var e in this.keys)this.keys[e].down=!1}},{key:"bindKey",value:function(e){var t=this;tu.register_combo({keys:e,on_keydown:function(){t.keys[e].down=!0,t.keys[e].lastId=++t.id},on_keyup:function(){t.keys[e].down=!1},prevent_repeat:!0})}},{key:"initKeyboardInput",value:function(){var e=this;this.keys={w:this.makeKey(0,-1),a:this.makeKey(-1,0),s:this.makeKey(0,1),d:this.makeKey(1,0),up:this.makeKey(0,-1),left:this.makeKey(-1,0),down:this.makeKey(0,1),right:this.makeKey(1,0)};for(var t in this.keys)this.bindKey(t);this.moveTimer=new Qs(Object.keys(this.keys),Zs,150,function(t){return e.handleMove(t)}),tu.register_combo({keys:"shift",on_keydown:function(){e.moveTimer.setDelay(Js),Ss.replace("animationTime",Js)},on_keyup:function(){e.moveTimer.setDelay(150),Ss.replace("animationTime",150)},prevent_repeat:!0})}},{key:"initTouchInput",value:function(){var e=this,t=[{key:"right",x:1,y:0},{key:"down",x:0,y:1},{key:"left",x:-1,y:0},{key:"up",x:0,y:-1}],n=function(n){if(!ru){var r={x:ms.gameSize.width/2,y:ms.gameSize.height/2},i=180*Math.atan2(n[1]-r.y,n[0]-r.x)/Math.PI,o=t[ht(Math.round(ht(i/90,4)),4)];e.touching=!0,e.moveDelta={x:o.x,y:o.y},e.currentKey=o.key}};Ks.attach(),Ks.on("touchBegan",function(t){n(t.touch.position),t.touch.on("moved",function(e){n(e.touch.position)}),t.touch.on("ended",function(){e.touching=!1})})}}]),e}());var iu=["data/audio.ogg","data/audio.m4a"],ou={block_activated_reversed:[0,280.1587301587302],block_activated:[2e3,280.15873015873007],block_deactivated_reversed:[4e3,320.27210884353786],block_deactivated:[6e3,320.27210884353786],block_slide_reversed:[8e3,243.80952380952436],block_slide:[1e4,243.80952380952436],heal_reversed:[12e3,254.30839002267547],heal:[14e3,254.30839002267547],"hurt.0":[16e3,173.53741496598474],"hurt.1":[18e3,172.92517006802655],"hurt_reversed.0":[2e4,173.53741496598474],"hurt_reversed.1":[22e3,172.92517006802655],level_solved_reversed:[24e3,285.7142857142847],level_solved:[26e3,285.7142857142847],"walk.0":[28e3,239.13832199546547],"walk.10":[3e4,349.7052154195011],"walk.11":[32e3,334.64852607709616],"walk.12":[34e3,295.3514739228993],"walk.13":[36e3,383.7414965986383],"walk.14":[38e3,357.2335600907053],"walk.15":[4e4,312.35827664399096],"walk.16":[42e3,314.33106575963876],"walk.17":[44e3,377.64172335600676],"walk.1":[46e3,254.3310657596365],"walk.2":[48e3,369.99999999999744],"walk.3":[5e4,346.4399092970538],"walk.4":[52e3,362.1315192743779],"walk.5":[54e3,341.836734693878],"walk.6":[56e3,354.9433106575961],"walk.7":[58e3,368.02721088435675],"walk.8":[6e4,327.4149659863923],"walk.9":[62e3,327.4149659863923],"walk_reversed.0":[64e3,239.13832199546903],"walk_reversed.10":[66e3,349.7052154195046],"walk_reversed.11":[68e3,334.64852607710327],"walk_reversed.12":[7e4,295.3514739229064],"walk_reversed.13":[72e3,383.7414965986454],"walk_reversed.14":[74e3,357.2335600907053],"walk_reversed.15":[76e3,312.35827664399096],"walk_reversed.16":[78e3,314.33106575963166],"walk_reversed.17":[8e4,377.64172335600676],"walk_reversed.1":[82e3,254.3310657596436],"walk_reversed.2":[84e3,370.00000000000455],"walk_reversed.3":[86e3,346.4399092970467],"walk_reversed.4":[88e3,362.1315192743708],"walk_reversed.5":[9e4,341.8367346938709],"walk_reversed.6":[92e3,354.9433106576032],"walk_reversed.7":[94e3,368.02721088434964],"walk_reversed.8":[96e3,327.4149659863923],"walk_reversed.9":[98e3,327.4149659863923]},au={src:iu,sprite:ou},su=r(function(e,t){!function(){var e=function(){this.init()};e.prototype={init:function(){var e=this||n;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||n;if(e=parseFloat(e),t.ctx||c(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,n.ctx.currentTime);for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var i=t._howls[r]._getSoundIds(),o=0;o<i.length;o++){var a=t._howls[r]._soundById(i[o]);a&&a._node&&(a._node.volume=a._volume*e)}return t}return t._volume},mute:function(e){var t=this||n;t.ctx||c(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,n.ctx.currentTime);for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var i=t._howls[r]._getSoundIds(),o=0;o<i.length;o++){var a=t._howls[r]._soundById(i[o]);a&&a._node&&(a._node.muted=!!e||a._muted)}return t},unload:function(){for(var e=this||n,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,c()),e},codecs:function(e){return(this||n)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||n;if(e.state=e.ctx?e.ctx.state||"suspended":"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{var t=new Audio;void 0===t.oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{var t=new Audio;t.muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||n,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var r=t.canPlayType("audio/mpeg;").replace(/^no$/,""),i=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),o=i&&parseInt(i[0].split("/")[1],10)<33;return e._codecs={mp3:!(o||!r&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!r,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||n,t=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi|Chrome|Safari/i.test(e._navigator&&e._navigator.userAgent);if(!e._audioUnlocked&&e.ctx&&t){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var r=function t(n){for(var r=0;r<e.html5PoolSize;r++){var i=new Audio;i._unlocked=!0,e._releaseHtml5Audio(i)}for(var r=0;r<e._howls.length;r++)if(!e._howls[r]._webAudio)for(var o=e._howls[r]._getSoundIds(),a=0;a<o.length;a++){var s=e._howls[r]._soundById(o[a]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}e._autoResume();var u=e.ctx.createBufferSource();u.buffer=e._scratchBuffer,u.connect(e.ctx.destination),void 0===u.start?u.noteOn(0):u.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),u.onended=function(){u.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",r,!0),document.addEventListener("touchend",r,!0),document.addEventListener("click",r,!0),e}},_obtainHtml5Audio:function(){var e=this||n;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var t=this||n;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&n.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var r=0;r<e._howls[t]._sounds.length;r++)if(!e._howls[t]._sounds[r]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&n.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var n=new e,r=function(e){var t=this;if(!e.src||0===e.src.length)return void console.error("An array of source files must be passed with any new Howl.");t.init(e)};r.prototype={init:function(e){var t=this;return n.ctx||c(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhrWithCredentials=e.xhrWithCredentials||!1,t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=n.usingWebAudio&&!t._html5,void 0!==n.ctx&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&t.load(),t},load:function(){var e=this,t=null;if(n.noAudio)return void e._emit("loaderror",null,"No audio support.");"string"==typeof e._src&&(e._src=[e._src]);for(var r=0;r<e._src.length;r++){var o,s;if(e._format&&e._format[r])o=e._format[r];else{if("string"!=typeof(s=e._src[r])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}o=/^data:audio\/([^;,]+);/i.exec(s),o||(o=/\.([^.]+)$/.exec(s.split("?",1)[0])),o&&(o=o[1].toLowerCase())}if(o||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),o&&n.codecs(o)){t=e._src[r];break}}return t?(e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new i(e),e._webAudio&&a(e),e):void e._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(e,t){var r=this,i=null;if("number"==typeof e)i=e,e=null;else{if("string"==typeof e&&"loaded"===r._state&&!r._sprite[e])return null;if(void 0===e&&(e="__default",!r._playLock)){for(var o=0,a=0;a<r._sounds.length;a++)r._sounds[a]._paused&&!r._sounds[a]._ended&&(o++,i=r._sounds[a]._id);1===o?e=null:i=null}}var s=i?r._soundById(i):r._inactiveSound();if(!s)return null;if(i&&!e&&(e=s._sprite||"__default"),"loaded"!==r._state){s._sprite=e,s._ended=!1;var u=s._id;return r._queue.push({event:"play",action:function(){r.play(u)}}),u}if(i&&!s._paused)return t||r._loadQueue("play"),s._id;r._webAudio&&n._autoResume();var l=Math.max(0,s._seek>0?s._seek:r._sprite[e][0]/1e3),c=Math.max(0,(r._sprite[e][0]+r._sprite[e][1])/1e3-l),d=1e3*c/Math.abs(s._rate),f=r._sprite[e][0]/1e3,h=(r._sprite[e][0]+r._sprite[e][1])/1e3,p=!(!s._loop&&!r._sprite[e][2]);s._sprite=e,s._ended=!1;var v=function(){s._paused=!1,s._seek=l,s._start=f,s._stop=h,s._loop=p};if(l>=h)return void r._ended(s);var _=s._node;if(r._webAudio){var y=function(){r._playLock=!1,v(),r._refreshBuffer(s);var e=s._muted||r._muted?0:s._volume;_.gain.setValueAtTime(e,n.ctx.currentTime),s._playStart=n.ctx.currentTime,void 0===_.bufferSource.start?s._loop?_.bufferSource.noteGrainOn(0,l,86400):_.bufferSource.noteGrainOn(0,l,c):s._loop?_.bufferSource.start(0,l,86400):_.bufferSource.start(0,l,c),d!==1/0&&(r._endTimers[s._id]=setTimeout(r._ended.bind(r,s),d)),t||setTimeout(function(){r._emit("play",s._id),r._loadQueue()},0)};"running"===n.state?y():(r._playLock=!0,r.once("resume",y),r._clearTimer(s._id))}else{var m=function(){_.currentTime=l,_.muted=s._muted||r._muted||n._muted||_.muted,_.volume=s._volume*n.volume(),_.playbackRate=s._rate;try{var i=_.play();if(i&&"undefined"!=typeof Promise&&(i instanceof Promise||"function"==typeof i.then)?(r._playLock=!0,v(),i.then(function(){r._playLock=!1,_._unlocked=!0,t||(r._emit("play",s._id),r._loadQueue())}).catch(function(){r._playLock=!1,r._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0})):t||(r._playLock=!1,v(),r._emit("play",s._id),r._loadQueue()),_.playbackRate=s._rate,_.paused)return void r._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||s._loop?r._endTimers[s._id]=setTimeout(r._ended.bind(r,s),d):(r._endTimers[s._id]=function(){r._ended(s),_.removeEventListener("ended",r._endTimers[s._id],!1)},_.addEventListener("ended",r._endTimers[s._id],!1))}catch(e){r._emit("playerror",s._id,e)}},g=window&&window.ejecta||!_.readyState&&n._navigator.isCocoonJS;if(_.readyState>=3||g)m();else{r._playLock=!0;var b=function e(){m(),_.removeEventListener(n._canPlayEvent,e,!1)};_.addEventListener(n._canPlayEvent,b,!1),r._clearTimer(s._id)}}return s._id},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),r=0;r<n.length;r++){t._clearTimer(n[r]);var i=t._soundById(n[r]);if(i&&!i._paused&&(i._seek=t.seek(n[r]),i._rateSeek=0,i._paused=!0,t._stopFade(n[r]),i._node))if(t._webAudio){if(!i._node.bufferSource)continue;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),t._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||t._emit("pause",i?i._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var r=n._getSoundIds(e),i=0;i<r.length;i++){n._clearTimer(r[i]);var o=n._soundById(r[i]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(r[i]),o._node&&(n._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause())),t||n._emit("stop",o._id))}return n},mute:function(e,t){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"mute",action:function(){r.mute(e,t)}}),r;if(void 0===t){if("boolean"!=typeof e)return r._muted;r._muted=e}for(var i=r._getSoundIds(t),o=0;o<i.length;o++){var a=r._soundById(i[o]);a&&(a._muted=e,a._interval&&r._stopFade(a._id),r._webAudio&&a._node?a._node.gain.setValueAtTime(e?0:a._volume,n.ctx.currentTime):a._node&&(a._node.muted=!!n._muted||e),r._emit("mute",a._id))}return r},volume:function(){var e,t,r=this,i=arguments;if(0===i.length)return r._volume;if(1===i.length||2===i.length&&void 0===i[1]){r._getSoundIds().indexOf(i[0])>=0?t=parseInt(i[0],10):e=parseFloat(i[0])}else i.length>=2&&(e=parseFloat(i[0]),t=parseInt(i[1],10));var o;if(!(void 0!==e&&e>=0&&e<=1))return o=t?r._soundById(t):r._sounds[0],o?o._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,i)}}),r;void 0===t&&(r._volume=e),t=r._getSoundIds(t);for(var a=0;a<t.length;a++)(o=r._soundById(t[a]))&&(o._volume=e,i[2]||r._stopFade(t[a]),r._webAudio&&o._node&&!o._muted?o._node.gain.setValueAtTime(e,n.ctx.currentTime):o._node&&!o._muted&&(o._node.volume=e*n.volume()),r._emit("volume",o._id));return r},fade:function(e,t,r,i){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"fade",action:function(){o.fade(e,t,r,i)}}),o;e=parseFloat(e),t=parseFloat(t),r=parseFloat(r),o.volume(e,i);for(var a=o._getSoundIds(i),s=0;s<a.length;s++){var u=o._soundById(a[s]);if(u){if(i||o._stopFade(a[s]),o._webAudio&&!u._muted){var l=n.ctx.currentTime,c=l+r/1e3;u._volume=e,u._node.gain.setValueAtTime(e,l),u._node.gain.linearRampToValueAtTime(t,c)}o._startFadeInterval(u,e,t,r,a[s],void 0===i)}}return o},_startFadeInterval:function(e,t,n,r,i,o){var a=this,s=t,u=n-t,l=Math.abs(u/.01),c=Math.max(4,l>0?r/l:r),d=Date.now();e._fadeTo=n,e._interval=setInterval(function(){var i=(Date.now()-d)/r;d=Date.now(),s+=u*i,s=Math.max(0,s),s=Math.min(1,s),s=Math.round(100*s)/100,a._webAudio?e._volume=s:a.volume(s,e._id,!0),o&&(a._volume=s),(n<t&&s<=n||n>t&&s>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,a.volume(n,e._id),a._emit("fade",e._id))},c)},_stopFade:function(e){var t=this,r=t._soundById(e);return r&&r._interval&&(t._webAudio&&r._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(r._interval),r._interval=null,t.volume(r._fadeTo,e),r._fadeTo=null,t._emit("fade",e)),t},loop:function(){var e,t,n,r=this,i=arguments;if(0===i.length)return r._loop;if(1===i.length){if("boolean"!=typeof i[0])return!!(n=r._soundById(parseInt(i[0],10)))&&n._loop;e=i[0],r._loop=e}else 2===i.length&&(e=i[0],t=parseInt(i[1],10));for(var o=r._getSoundIds(t),a=0;a<o.length;a++)(n=r._soundById(o[a]))&&(n._loop=e,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return r},rate:function(){var e,t,r=this,i=arguments;if(0===i.length)t=r._sounds[0]._id;else if(1===i.length){var o=r._getSoundIds(),a=o.indexOf(i[0]);a>=0?t=parseInt(i[0],10):e=parseFloat(i[0])}else 2===i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10));var s;if("number"!=typeof e)return s=r._soundById(t),s?s._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,i)}}),r;void 0===t&&(r._rate=e),t=r._getSoundIds(t);for(var u=0;u<t.length;u++)if(s=r._soundById(t[u])){r.playing(t[u])&&(s._rateSeek=r.seek(t[u]),s._playStart=r._webAudio?n.ctx.currentTime:s._playStart),s._rate=e,r._webAudio&&s._node&&s._node.bufferSource?s._node.bufferSource.playbackRate.setValueAtTime(e,n.ctx.currentTime):s._node&&(s._node.playbackRate=e);var l=r.seek(t[u]),c=(r._sprite[s._sprite][0]+r._sprite[s._sprite][1])/1e3-l,d=1e3*c/Math.abs(s._rate);!r._endTimers[t[u]]&&s._paused||(r._clearTimer(t[u]),r._endTimers[t[u]]=setTimeout(r._ended.bind(r,s),d)),r._emit("rate",s._id)}return r},seek:function(){var e,t,r=this,i=arguments;if(0===i.length)t=r._sounds[0]._id;else if(1===i.length){var o=r._getSoundIds(),a=o.indexOf(i[0]);a>=0?t=parseInt(i[0],10):r._sounds.length&&(t=r._sounds[0]._id,e=parseFloat(i[0]))}else 2===i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if(void 0===t)return r;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"seek",action:function(){r.seek.apply(r,i)}}),r;var s=r._soundById(t);if(s){if(!("number"==typeof e&&e>=0)){if(r._webAudio){var u=r.playing(t)?n.ctx.currentTime-s._playStart:0,l=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(l+u*Math.abs(s._rate))}return s._node.currentTime}var c=r.playing(t);c&&r.pause(t,!0),s._seek=e,s._ended=!1,r._clearTimer(t),r._webAudio||!s._node||isNaN(s._node.duration)||(s._node.currentTime=e);var d=function(){r._emit("seek",t),c&&r.play(t,!0)};if(c&&!r._webAudio){var f=function e(){r._playLock?setTimeout(e,0):d()};setTimeout(f,0)}else d()}return r},playing:function(e){var t=this;if("number"==typeof e){var n=t._soundById(e);return!!n&&!n._paused}for(var r=0;r<t._sounds.length;r++)if(!t._sounds[r]._paused)return!0;return!1},duration:function(e){var t=this,n=t._duration,r=t._soundById(e);return r&&(n=t._sprite[r._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,r=0;r<t.length;r++){if(t[r]._paused||e.stop(t[r]._id),!e._webAudio){/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent)||(t[r]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),t[r]._node.removeEventListener("error",t[r]._errorFn,!1),t[r]._node.removeEventListener(n._canPlayEvent,t[r]._loadFn,!1),n._releaseHtml5Audio(t[r]._node)}delete t[r]._node,e._clearTimer(t[r]._id)}var i=n._howls.indexOf(e);i>=0&&n._howls.splice(i,1);var a=!0;for(r=0;r<n._howls.length;r++)if(n._howls[r]._src===e._src||e._src.indexOf(n._howls[r]._src)>=0){a=!1;break}return o&&a&&delete o[e._src],n.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,r){var i=this,o=i["_on"+e];return"function"==typeof t&&o.push(r?{id:n,fn:t,once:r}:{id:n,fn:t}),i},off:function(e,t,n){var r=this,i=r["_on"+e],o=0;if("number"==typeof t&&(n=t,t=null),t||n)for(o=0;o<i.length;o++){var a=n===i[o].id;if(t===i[o].fn&&a||!t&&a){i.splice(o,1);break}}else if(e)r["_on"+e]=[];else{var s=Object.keys(r);for(o=0;o<s.length;o++)0===s[o].indexOf("_on")&&Array.isArray(r[s[o]])&&(r[s[o]]=[])}return r},once:function(e,t,n){var r=this;return r.on(e,t,n,1),r},_emit:function(e,t,n){for(var r=this,i=r["_on"+e],o=i.length-1;o>=0;o--)i[o].id&&i[o].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(r,i[o].fn),0),i[o].once&&r.off(e,i[o].fn,i[o].id));return r._loadQueue(e),r},_loadQueue:function(e){var t=this;if(t._queue.length>0){var n=t._queue[0];n.event===e&&(t._queue.shift(),t._loadQueue()),e||n.action()}return t},_ended:function(e){var t=this,r=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var i=!(!e._loop&&!t._sprite[r][2]);if(t._emit("end",e._id),!t._webAudio&&i&&t.stop(e._id,!0).play(e._id),t._webAudio&&i){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=n.ctx.currentTime;var o=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),o)}return t._webAudio&&!i&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),n._autoSuspend()),t._webAudio||i||t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var n=t._soundById(e);n&&n._node&&n._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,n=0;n<t._sounds.length;n++)if(e===t._sounds[n]._id)return t._sounds[n];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new i(e)},_drain:function(){var e=this,t=e._pool,n=0,r=0;if(!(e._sounds.length<t)){for(r=0;r<e._sounds.length;r++)e._sounds[r]._ended&&n++;for(r=e._sounds.length-1;r>=0;r--){if(n<=t)return;e._sounds[r]._ended&&(e._webAudio&&e._sounds[r]._node&&e._sounds[r]._node.disconnect(0),e._sounds.splice(r,1),n--)}}},_getSoundIds:function(e){var t=this;if(void 0===e){for(var n=[],r=0;r<t._sounds.length;r++)n.push(t._sounds[r]._id);return n}return[e]},_refreshBuffer:function(e){var t=this;return e._node.bufferSource=n.ctx.createBufferSource(),e._node.bufferSource.buffer=o[t._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,n.ctx.currentTime),t},_cleanBuffer:function(e){var t=this,r=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(n._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),r))try{e.bufferSource.buffer=n._scratchBuffer}catch(e){}return e.bufferSource=null,t}};var i=function(e){this._parent=e,this.init()};i.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++n._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,r=n._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=void 0===n.ctx.createGain?n.ctx.createGainNode():n.ctx.createGain(),e._node.gain.setValueAtTime(r,n.ctx.currentTime),e._node.paused=!0,e._node.connect(n.masterGain)):(e._node=n._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(n._canPlayEvent,e._loadFn,!1),e._node.src=t._src,e._node.preload="auto",e._node.volume=r*n.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++n._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(n._canPlayEvent,e._loadFn,!1)}};var o={},a=function(e){var t=e._src;if(o[t])return e._duration=o[t].duration,void l(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);u(r.buffer,e)}else{var a=new XMLHttpRequest;a.open("GET",t,!0),a.withCredentials=e._xhrWithCredentials,a.responseType="arraybuffer",a.onload=function(){var t=(a.status+"")[0];if("0"!==t&&"2"!==t&&"3"!==t)return void e._emit("loaderror",null,"Failed loading audio file with status: "+a.status+".");u(a.response,e)},a.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete o[t],e.load())},s(a)}},s=function(e){try{e.send()}catch(t){e.onerror()}},u=function(e,t){var r=function(){t._emit("loaderror",null,"Decoding audio data failed.")},i=function(e){e&&t._sounds.length>0?(o[t._src]=e,l(t,e)):r()};"undefined"!=typeof Promise&&1===n.ctx.decodeAudioData.length?n.ctx.decodeAudioData(e).then(i).catch(r):n.ctx.decodeAudioData(e,i,r)},l=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",
e._emit("load"),e._loadQueue())},c=function(){if(n.usingWebAudio){try{"undefined"!=typeof AudioContext?n.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch(e){n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),t=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),r=t?parseInt(t[1],10):null;if(e&&r&&r<9){var i=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());(n._navigator&&n._navigator.standalone&&!i||n._navigator&&!n._navigator.standalone&&!i)&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=void 0===n.ctx.createGain?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:1,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};t.Howler=n,t.Howl=r,"undefined"!=typeof window?(window.HowlerGlobal=e,window.Howler=n,window.Howl=r,window.Sound=i):"undefined"!=typeof global&&(global.HowlerGlobal=e,global.Howler=n,global.Howl=r,global.Sound=i)}(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var n=t._howls.length-1;n>=0;n--)t._howls[n].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,n){var r=this;return r.ctx&&r.ctx.listener?(t="number"!=typeof t?r._pos[1]:t,n="number"!=typeof n?r._pos[2]:n,"number"!=typeof e?r._pos:(r._pos=[e,t,n],void 0!==r.ctx.listener.positionX?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]),r)):r},HowlerGlobal.prototype.orientation=function(e,t,n,r,i,o){var a=this;if(!a.ctx||!a.ctx.listener)return a;var s=a._orientation;return t="number"!=typeof t?s[1]:t,n="number"!=typeof n?s[2]:n,r="number"!=typeof r?s[3]:r,i="number"!=typeof i?s[4]:i,o="number"!=typeof o?s[5]:o,"number"!=typeof e?s:(a._orientation=[e,t,n,r,i,o],void 0!==a.ctx.listener.forwardX?(a.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),a.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),a.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),a.ctx.listener.upX.setTargetAtTime(e,Howler.ctx.currentTime,.1),a.ctx.listener.upY.setTargetAtTime(t,Howler.ctx.currentTime,.1),a.ctx.listener.upZ.setTargetAtTime(n,Howler.ctx.currentTime,.1)):a.ctx.listener.setOrientation(e,t,n,r,i,o),a)},Howl.prototype.init=function(e){return function(t){var n=this;return n._orientation=t.orientation||[1,0,0],n._stereo=t.stereo||null,n._pos=t.pos||null,n._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},n._onstereo=t.onstereo?[{fn:t.onstereo}]:[],n._onpos=t.onpos?[{fn:t.onpos}]:[],n._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(t,n)}}),r;var i=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof t)return r._stereo;r._stereo=t,r._pos=[t,0,0]}for(var o=r._getSoundIds(n),a=0;a<o.length;a++){var s=r._soundById(o[a]);if(s){if("number"!=typeof t)return s._stereo;s._stereo=t,s._pos=[t,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||e(s,i),"spatial"===i?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(t,0,0):s._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),r._emit("stereo",s._id)}}return r},Howl.prototype.pos=function(t,n,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function(){o.pos(t,n,r,i)}}),o;if(n="number"!=typeof n?0:n,r="number"!=typeof r?-.5:r,void 0===i){if("number"!=typeof t)return o._pos;o._pos=[t,n,r]}for(var a=o._getSoundIds(i),s=0;s<a.length;s++){var u=o._soundById(a[s]);if(u){if("number"!=typeof t)return u._pos;u._pos=[t,n,r],u._node&&(u._panner&&!u._panner.pan||e(u,"spatial"),void 0!==u._panner.positionX?(u._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):u._panner.setPosition(t,n,r)),o._emit("pos",u._id)}}return o},Howl.prototype.orientation=function(t,n,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function(){o.orientation(t,n,r,i)}}),o;if(n="number"!=typeof n?o._orientation[1]:n,r="number"!=typeof r?o._orientation[2]:r,void 0===i){if("number"!=typeof t)return o._orientation;o._orientation=[t,n,r]}for(var a=o._getSoundIds(i),s=0;s<a.length;s++){var u=o._soundById(a[s]);if(u){if("number"!=typeof t)return u._orientation;u._orientation=[t,n,r],u._node&&(u._panner||(u._pos||(u._pos=o._pos||[0,0,-.5]),e(u,"spatial")),void 0!==u._panner.orientationX?(u._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):u._panner.setOrientation(t,n,r)),o._emit("orientation",u._id)}}return o},Howl.prototype.pannerAttr=function(){var t,n,r,i=this,o=arguments;if(!i._webAudio)return i;if(0===o.length)return i._pannerAttr;if(1===o.length){if("object"!==qt(o[0]))return r=i._soundById(parseInt(o[0],10)),r?r._pannerAttr:i._pannerAttr;t=o[0],void 0===n&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),i._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:i._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:i._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:i._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:i._panningModel})}else 2===o.length&&(t=o[0],n=parseInt(o[1],10));for(var a=i._getSoundIds(n),s=0;s<a.length;s++)if(r=i._soundById(a[s])){var u=r._pannerAttr;u={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:u.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:u.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:u.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:u.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:u.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:u.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:u.panningModel};var l=r._panner;l?(l.coneInnerAngle=u.coneInnerAngle,l.coneOuterAngle=u.coneOuterAngle,l.coneOuterGain=u.coneOuterGain,l.distanceModel=u.distanceModel,l.maxDistance=u.maxDistance,l.refDistance=u.refDistance,l.rolloffFactor=u.rolloffFactor,l.panningModel=u.panningModel):(r._pos||(r._pos=i._pos||[0,0,-.5]),e(r,"spatial"))}return i},Sound.prototype.init=function(e){return function(){var t=this,n=t._parent;t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,e.call(this),t._stereo?n.stereo(t._stereo):t._pos&&n.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,n=t._parent;return t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,t._stereo?n.stereo(t._stereo):t._pos?n.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,n._refreshBuffer(t)),e.call(this)}}(Sound.prototype.reset);var e=function(e,t){t=t||"spatial","spatial"===t?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()}),uu=function(){function e(){Ht(this,e),this.variations=this.findVariations(au)}return Vt(e,[{key:"findVariations",value:function(){var e={};for(var t in au.sprite){var n=t.split(".");if(n.length>=2){var r=n.pop(),i=n.join(".");e[i]?e[i].push(r):e[i]=[r]}else e[t]=[]}return e}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.variations[e+(t?"_reversed":"")];if(n&&n.length>0)return mt(n)}},{key:"name",value:function(e,t){return e+(arguments.length>2&&void 0!==arguments[2]&&arguments[2]?"_reversed":"")+(t?"."+t:"")}}]),e}(),lu=function(){function e(){Ht(this,e),this.variations=new uu,this.howler=new su.Howl(au),this.queue=[],this.frameId=0}return Vt(e,[{key:"play",value:function(){++this.frameId;var e=!0,t=!1,n=void 0;try{for(var r,i=this.queue[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;o&&this.howler.play(o)}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}this.queue=[]}},{key:"add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t=t||this.variations.get(e,n),this.queue.push(this.variations.name(e,t,n)),!n)return this.createReversedSoundCallback(e,t,this.frameId,this.queue.length-1)}},{key:"createReversedSoundCallback",value:function(e,t,n,r){var i=this;return function(){i.frameId===n?delete i.queue[r]:i.add(e,t,!0)}}}]),e}(),cu=new lu,du=function(){function e(t,n){Ht(this,e),this.entity=t,this.timeEntity=n||t,this.timeImmune=Ot(this.timeEntity)}return Vt(e,[{key:"undo",value:function(){return!this.timeImmune&&!Ot(this.timeEntity)&&Boolean(dt(this,"rollback"))}},{key:"redo",value:function(){this.timeImmune||Ot(this.timeEntity)||dt(this,"execute")}}]),e}(),fu=function(e){function t(e){Ht(this,t);var n=Ut(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.entity));return n.event=e,n}return Wt(t,e),Vt(t,[{key:"invokeLogicType",value:function(e,t,n,r,i){var o=Object.assign({},this.event,{baseEntity:r}),a=new e(o);if(i)return!!t.addChild(a)||(t.rollbackLast(),!1);n.push(a)}},{key:"invokeLogicComponent",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!r||n.id!==r.id){var o=n.get("logic");if(o&&this.event.type in o){var a=o[this.event.type];if("function"==typeof a)return this.invokeLogicType(a,e,t,n,i);if(Array.isArray(a)){var s=!0,u=!1,l=void 0;try{for(var c,d=a[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var f=c.value;if(!1===this.invokeLogicType(f,e,t,n,i))return!1}}catch(e){u=!0,l=e}finally{try{!s&&d.return&&d.return()}finally{if(u)throw l}}}}}return!0}},{key:"execute",value:function(e){var t=[],n=this.event.entity;if(this.event.position){var r=Gs.getSorted(this.event.position),i=!0,o=!1,a=void 0;try{for(var s,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;this.invokeLogicComponent(e,t,l,n)}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}}else this.invokeLogicComponent(e,t,this.event.entity,void 0);return t}}]),t}(du),hu=function(e){function t(e){Ht(this,t);var n=Ut(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.entity));return n.event=e,n.entity=e.entity,n.direction=e.direction,n}return Wt(t,e),Vt(t,[{key:"execute",value:function(){var e=this.entity.get("position"),t=this.entity.get("direction");return this.oldPosition={x:e.x,y:e.y},t&&(this.oldDirection={x:t.x,y:t.y}),e.set(e.x+this.direction.x,e.y+this.direction.y),t&&(t.x=this.direction.x,t.y=this.direction.y,this.entity.set("toRender")),!(Gs.get(e).size<=1)&&(this.event.suppressEvents||this.event.entity.has("suppressEvents")?void 0:[new fu({type:"exit",position:this.oldPosition,newPosition:{x:e.x,y:e.y},direction:this.direction,entity:this.entity}),new fu({type:"moved",from:this.oldPosition,to:{x:e.x,y:e.y},direction:this.direction,entity:this.entity,movedBy:this.event.movedBy}),new fu({type:"enter",position:{x:e.x,y:e.y},oldPosition:this.oldPosition,direction:this.direction,entity:this.entity})])}},{key:"rollback",value:function(){var e=this.entity.get("position"),t=this.entity.get("direction");return e&&e.set(e.x-this.direction.x,e.y-this.direction.y),t&&(t.x=this.oldDirection.x,t.y=this.oldDirection.y,this.entity.set("toRender")),!0}}]),t}(du),pu=function(e){function t(e,n){Ht(this,t);var r=Ut(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.entity=e,r}return Wt(t,e),Vt(t,[{key:"execute",value:function(){Gs.remove(this.entity),this.entity.has("sprite")&&this.entity.get("sprite").onRemove(),this.entity.detach()}},{key:"rollback",value:function(){return this.entity.attach(Ds),this.entity.has("sprite")&&this.entity.get("sprite").onCreated(),Gs.update(this.entity),!0}}]),t}(du),vu=(function(e){function t(e,n){Ht(this,t);var r=Ut(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,void 0,n));return r.event=e,r}Wt(t,e),Vt(t,[{key:"execute",value:function(){var e={name:this.event.create,position:{x:this.event.at.x,y:this.event.at.y},spritePosition:qs.getVisualPosition(this.event.at),layer:5};this.entity=qs.createEntity(e,this.event.zIndex||10),Kt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"entity",this.entity,this),dt(this.event,"thenCall",this.entity)}},{key:"rollback",value:function(){return this.entity.destroy(),!0}}])}(du),function(){function e(t){Ht(this,e),this.event=t}Vt(e,[{key:"execute",value:function(){var e=[],t=Gs.find.apply(Gs,[this.event.position,void 0].concat(Qt(this.event.has)));return t&&e.push(new pu(t)),e}}])}(),function(e){function t(e){Ht(this,t);var n=Ut(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.baseEntity));return n.event=e,n}return Wt(t,e),Vt(t,[{key:"move",value:function(e){var t=new hu({entity:this.event.baseEntity,direction:this.event.direction,movedBy:this.event.entity});return t.optional=e,t}},{key:"getFutureBlockPosition",value:function(){return Gs.getWrapped({x:this.event.position.x+this.event.direction.x,y:this.event.position.y+this.event.direction.y})}},{key:"execute",value:function(){var e=this.event.baseEntity.get("axis");return(!e||0!==this.event.direction[e])&&(!!this.event.entity.has("pushes")&&this.move(this.event.baseEntity.has("enterable")))}}]),t}(du)),_u=function(e){function t(e){Ht(this,t);var n=Ut(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.baseEntity));return n.event=e,n}return Wt(t,e),Vt(t,[{key:"execute",value:function(){return new mu("block_slide",this.event.baseEntity)}}]),t}(du),yu=function(e){function t(e){Ht(this,t);var n=Ut(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.baseEntity));return n.event=e,n}return Wt(t,e),Vt(t,[{key:"execute",value:function(){return!1}}]),t}(du),mu=(function(e){function t(e,n,r,i,o){Ht(this,t);var a=Ut(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o));return a.component=n,a.property=r,a.value=i,a.previous=r?e.get(n)[r]:e.get(n),a}Wt(t,e),Vt(t,[{key:"execute",value:function(){this.property?this.entity.get(this.component)[this.property]=this.value:this.entity.set(this.component,this.value),It(this.entity)}},{key:"rollback",value:function(){return this.property?this.entity.get(this.component)[this.property]=this.previous:this.previous?this.entity.set(this.component,this.previous):this.entity.remove(this.component),It(this.entity),!0}}])}(du),function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments[4];Ht(this,t);var a=Ut(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o));return a.component=n,a.methodExecute=r,a.methodRollback=i,a}Wt(t,e),Vt(t,[{key:"execute",value:function(){var e=Yt(this.methodExecute),t=e[0],n=e.slice(1);if(t&&"function"==typeof this.component[t]){var r;(r=this.component)[t].apply(r,Qt(n)),It(this.entity)}}},{key:"rollback",value:function(){var e=Yt(this.methodRollback),t=e[0],n=e.slice(1);if(t&&"function"==typeof this.component[t]){var r;(r=this.component)[t].apply(r,Qt(n)),It(this.entity)}return!0}}])}(du),function(e){function t(e,n,r){Ht(this,t);var i=Ut(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));i.name=n;var o=e.get("sprite");return o&&(i.previous=o.name),i}Wt(t,e),Vt(t,[{key:"callOrGet",value:function(e){return"function"==typeof e?e(this.entity):e}},{key:"execute",value:function(){var e=this.entity.get("sprite");e&&e.set(this.callOrGet(this.name))}},{key:"rollback",value:function(){var e=this.entity.get("sprite");if(e)return e.set(this.previous)}}])}(du),function(e){function t(e){var n;Ht(this,t);for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=Ut(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(i)));return a.sound=e,a}return Wt(t,e),Vt(t,[{key:"execute",value:function(){this.playReversed=cu.add(this.sound)}},{key:"rollback",value:function(){return this.playReversed(),!0}}]),t}(du)),gu=function(e){function t(e,n){Ht(this,t);var r=Ut(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.entity=e,r.component=n;for(var i=arguments.length,o=Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];return r.args=o,r}return Wt(t,e),Vt(t,[{key:"execute",value:function(){if(this.entity&&this.component){var e;(e=this.entity).set.apply(e,[this.component].concat(Qt(this.args))),It(this.entity)}}},{key:"rollback",value:function(){if(this.entity&&this.component)return this.entity.remove(this.component),It(this.entity),!0}}]),t}(du),bu=(function(e){function t(e,n){var r;Ht(this,t);for(var i=arguments.length,o=Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];var s=Ut(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(o)));return s.entity=e,s.component=n,s}Wt(t,e),Vt(t,[{key:"execute",value:function(){this.entity&&(this.previous=this.entity.get(this.component),this.entity.remove(this.component),It(this.entity))}},{key:"rollback",value:function(){if(this.entity)return this.entity.update(this.component,this.previous),It(this.entity),!0}}])}(du),function(e){function t(e){return Ht(this,t),Ut(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.baseEntity))}return Wt(t,e),Vt(t,[{key:"execute",value:function(){return!1}}]),t}(du)),ku=function(e){function t(e){Ht(this,t);var n=Ut(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.baseEntity));return n.event=e,n}return Wt(t,e),Vt(t,[{key:"execute",value:function(){return this.event.entity.has("player")}}]),t}(du);Ds.system(function(){function e(){Ht(this,e)}return Vt(e,[{key:"move",value:function(e,t,n){var r=void 0;return 0===t.x&&0===t.y||(r=Xs[n](new hu({entity:e,direction:{x:t.x,y:t.y}}))),r&&Ss.send("stateChanged",!0),r}},{key:"pre",value:function(){var e=this;Ss.clear("stateChanged"),Ss.loop("loaded",function(e){Xs.reset(),Ss.send("stateChanged",!1)});var t=Ss.exists("undo");Ss.process("undo",function(){Xs.pop()&&Ss.send("stateChanged",!1)}),t||Ds.every(["position","inputMovement"],function(t,n,r){e.move(r,n.currentDirection,"push")})}}]),e}()),Ds.system(function(){function e(){Ht(this,e)}return Vt(e,[{key:"initialize",value:function(){this.indicator=new PIXI.Text(this.getText(),{fontFamily:"Arial",fontSize:64,fill:16777215}),this.indicator.alpha=.9,this.indicator.x=160,this.indicator.y=48,Fs.addChild(this.indicator)}},{key:"getText",value:function(){return"#"+(Vs.currentLevel+1)+" - "+Vs.solvedLevels+"/"+Vs.totalLevels}},{key:"updateText",value:function(){this.indicator.text=this.getText()}},{key:"pre",value:function(){Ss.exists("loaded")&&this.updateText()}}]),e}());var wu={default:"down","0,1":"down","1,0":"right","0,-1":"up","-1,0":"left"},xu=function(e){function t(e){Ht(this,t);var n=Ut(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.baseEntity));return n.event=e,n}return Wt(t,e),Vt(t,[{key:"execute",value:function(){return new mu("walk",this.event.baseEntity)}}]),t}(du);Ds.system(function(){function e(){Ht(this,e)}return Vt(e,[{key:"pre",value:function(){var e=this;Ss.process("resetPlayer",function(t){e.player&&e.player.destroy(),e.player=e.createPlayer(t.position)})}},{key:"createPlayer",value:function(e){var t=qs.getVisualPosition(e),n=Ds.entity();return n.set("player").set("inputMovement",function(){return Tt(n)}).set("position",e.x,e.y).set("sprite",Ns,"player_down",30,t).set("cameraFollows").set("pushes").set("solvesLevels").set("life").set("direction",{x:0,y:1}).set("logic",{moved:xu}).set("render",Lt),n}}]),e}()),Ds.system(function(){function e(){Ht(this,e)}return Vt(e,[{key:"initialize",value:function(){qs.middleware(function(e){var t=e.entity,n=e.tile;if(n.name.startsWith("color")){var r=t.get("sprite").zIndex;t.remove("sprite");var i=At(n.name.split("_")[1]);i&&t.set("applyColor",{color3:i,zIndex:r-1})}})}},{key:"pre",value:function(){Ss.exists("loaded")&&Ds.every(["position","applyColor"],function(e,t,n){var r=0;Gs.every(e,["colorable"],function(e,n){if(t.zIndex===gt(n)){n.access("color").set(e||"primary",t.color3),++r}}),1!==r&&console.warn("Applied "+r+" color changes from entity "+n.id+" at zIndex "+t.zIndex+"."),n.destroy()})}}]),e}()),Ds.system(["computeWallShape"],function(){function e(){Ht(this,e)}return Vt(e,[{key:"initialize",value:function(){var e=this;qs.register(["wall"],function(t){e.createWallEntity(t).set("blocksLaser")}),qs.register(["wall_laser"],function(t){e.createWallEntity(t)}),qs.register(["wall_player"],function(t){e.createWallEntity(t,ku).set("blocksLaser")})}},{key:"createWallEntity",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bu;return e.set("wall").set("logic",{enter:t})}}]),e}()),Ds.system(function(){function e(){Ht(this,e)}return Vt(e,[{key:"initialize",value:function(){qs.register(["floor"],function(e){e.set("terrain","floor")})}}]),e}());var Au=function(){function e(t){Ht(this,e),this.event=t}return Vt(e,[{key:"execute",value:function(){return!this.event.entity.has("timeImmune")&&(this.event.entity.set("timeImmune"),this.event.baseEntity.destroy(),!0)}}]),e}();Ds.system(function(){function e(){Ht(this,e)}return Vt(e,[{key:"initialize",value:function(){qs.middleware(function(e){var t=e.entity,n=e.tile;n.name.endsWith("_ti")&&(t.set("timeImmune",!0),n.name=n.name.slice(0,-"_ti".length))}),qs.register(["time_immune_changer"],function(e,t){e.set("timeImmuneChanger"),e.set("logic",{enter:Au})})}}]),e}());var Su=["d","r","b","l","u"],Tu={d:{x:0,y:1},r:{x:1,y:0},u:{x:0,y:-1},l:{x:-1,y:0},b:{x:0,y:0}};Ds.system(function(){function e(){Ht(this,e)}return Vt(e,[{key:"initialize",value:function(){qs.register(["floor_laser"],function(e,t){e.set("floorLaser"),e.set("colorable","secondary"),e.set("emitsLaser",Tu.b),e.set("color",{secondary:0}),wt(e,"floor_laser_overlay")}),qs.middleware(function(e){var t=e.entity,n=e.tile;if(n.name.startsWith("block_mirror_")){var r={},i=n.name.split("_").slice(2),o="b"===i[0][0];i.forEach(function(e){r[e[0]]=e[1],o||(r[e[1]]=e[0])}),t.set("block"),t.set("redirectsLaser",r),t.set("logic",{enter:vu,moved:_u,exit:yu}),o&&(wt(t,"block_mirror_"+i.join("_")+"_overlay"),t.set("color",{secondary:0}),t.set("absorbsLaser",{blocks:!1,direction:Tu.b}))}}),qs.register(["laser_beam_mask","laser_beam_mask_inner","laser_beam_mask_outer"],function(e,t){var n=t.name.split("_")[3];e.set("laser"),wt(e,"laser_beam_overlay"+(n?"_"+n:""))}),qs.middleware(function(e){var t=e.entity,n=e.tile;if(n.name.startsWith("block_laser_")){t.set("block"),t.set("blocksLaser"),t.set("logic",{enter:vu,moved:_u,exit:yu}),t.set("colorable","secondary");var r=n.name.split("_"),i=r[2];t.set("emitsLaser",Tu[i]),t.get("sprite").set("block_laser"),wt(t,n.name+"_mask"),t.set("color",{secondary:0})}})}}]),e}()),Ds.system(["block","redirectsLaser","receivingLaser","color"],function(){function e(){Ht(this,e),this.pipeline=[this.handleReceive,this.handleRedirection,this.handleDamage,this.createLaser,this.getNextPosition]}return Vt(e,[{key:"pre",value:function(){var e=this,t=null;if(Ss.loop("stateChanged",function(e){return t=e}),null!==t){Ds.every(["laser"],function(e,t){return t.destroy()}),Ds.every(["receivingLaser"],function(e,t){return t.set("receivingLaser")});var n=new Set;Ds.every(["emitsLaser","position","color"],function(r,i,o,a){var s=o.get("primary")||o.get("secondary");s&&e.emit({direction:r,position:i,color:s,source:a.id,skipOne:!0,more:n,forward:t})});for(;n.size>0;)!function(){var r=n.values().next().value;n.delete(r);var i=lt(r),o=jt(i);Gs.every(i,["laser"],function(r){e.emit(Xt({},r,{color:o,more:n,update:!0,forward:t}))})}()}}},{key:"every",value:function(e,t,n,r,i){r.set("secondary",n.color3)}},{key:"emit",value:function(e){var t=e.direction,n=e.position,r=e.color,i=e.source,o=e.update,a=e.more,s=e.skipOne,u=e.forward,l={x:t.x,y:t.y},c={x:n.x,y:n.y};s&&(c=Gs.getWrapped({x:n.x+l.x,y:n.y+l.y}));for(var d={},f={};c&&!0!==d.blocked&&!this.blocksLaser(c);){d={};var h=!0,p=!1,v=void 0;try{for(var _,y=this.pipeline[Symbol.iterator]();!(h=(_=y.next()).done);h=!0){if(d=(0,_.value)(Xt({position:c,direction:l,color:r,source:i,more:a,overrides:f,update:o,forward:u,previous:d},f))||{},!0===d.blocked)break}}catch(e){p=!0,v=e}finally{try{!h&&y.return&&y.return()}finally{if(p)throw v}}}}},{key:"blocksLaser",value:function(e){return Gs.has(e,"blocksLaser")}},{key:"handleReceive",value:function(e){var t=e.position,n=e.color,r=e.direction,i=e.more,o=e.overrides,a=Gs.find(t,void 0,"absorbsLaser");if(a){var s=a.get("absorbsLaser");if(!s.direction||s.direction.x===r.x&&s.direction.y===r.y){var u=a.access("receivingLaser"),l=u.color3;u.addColor3(n),l!==u.color3&&(o.color=u.color3,i.add(ut(t)))}return{blocked:s.blocks}}}},{key:"handleRedirection",value:function(e){var t=e.position,n=e.direction,r={},i=Gs.find(t,void 0,"redirectsLaser");if(i){var o=i.get("redirectsLaser"),a=Et(n),s=o[a];if(s){var u=Tu[s];n.x=u.x,n.y=u.y,r.redirected={symbol:a,redirectedSymbol:s}}else r.blocked=!0}return r}},{key:"handleDamage",value:function(e){var t=e.position,n=e.previous,r=e.direction;return e.forward&&Gs.every(t,["life"],function(e,t){t.set("hurt")}),0===r.x&&0===r.y?{blocked:!0}:n}},{key:"createLaser",value:function(e){var t=e.position,n=e.source,r=e.direction,i=e.color,o=e.previous,a=e.update,s=e.overrides;if(a)return void Gs.every(t,["laserSource","color"],function(e,t){var r=t.get("primary");if(e===n&&r!==i){var o=r|i;t.set("primary",o),s.color=o}});var u="";if(o.redirected){var l=Tu[o.redirected.symbol];if(0===l.x&&0===l.y)return;u=St(l,r)?"_inner":"_outer"}var c={name:"laser_beam_mask"+u,position:t,spritePosition:qs.getVisualPosition(t),layer:5};qs.loadTile(c,50).set("laserSource",n).set("laser",{direction:{x:r.x,y:r.y},position:{x:t.x,y:t.y},color:i,source:n}).set("color",{primary:i}).get("sprite").sprite.rotation=Math.atan2(r.y,r.x)}},{key:"getNextPosition",value:function(e){var t=e.position,n=e.direction,r=Gs.getWrapped({x:t.x+n.x,y:t.y+n.y});if(!r)return{blocked:!0};t.x=r.x,t.y=r.y}}]),e}()),Ds.system(["receivingLaser","block","goal","color"],function(){function e(){Ht(this,e)}return Vt(e,[{key:"initialize",value:function(){qs.register(["block_goal"],function(e,t){e.set("block").set("goal").set("colorable","primary").set("absorbsLaser",{blocks:!1}).set("logic",{enter:vu,moved:_u,exit:yu}),wt(e,"block_goal_mask"),e.set("color",{primary:0,secondary:0})})}},{key:"pre",value:function(){var e=this;Ss.exists("loaded")&&Ds.every(["block","goal","color"],function(e,t,n){t.solved=zt(n)}),this.forward=!1,Ss.loop("stateChanged",function(t){return e.forward=t}),this.played=new Set}},{key:"every",value:function(e,t,n,r,i){if(r.get("secondary")!==e.color3){var o=zt(r);r.set("secondary",e.color3),n.solved=zt(r);var a=n.solved===this.forward?"block_activated":"block_deactivated";Ss.exists("loaded")||o===n.solved||this.played.has(a)||(this.played.add(a),cu.add(a,void 0,!this.forward))}}}]),e}()),Ds.component("colorPost",function(){function e(){Ht(this,e)}return Vt(e,[{key:"onCreate",value:function(e){this.down=!1}}]),e}());var Pu=function(e){function t(e){Ht(this,t);var n=Ut(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.baseEntity));return n.event=e,n}return Wt(t,e),Vt(t,[{key:"execute",value:function(){return this.event.baseEntity.get("colorPost").down}}]),t}(du),Ou=function(e){function t(e){Ht(this,t);var n=Ut(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.baseEntity));return n.event=e,n}return Wt(t,e),Vt(t,[{key:"execute",value:function(){return this.event.baseEntity.get("colorPost").down}}]),t}(du);Ds.system(function(){function e(){Ht(this,e)}return Vt(e,[{key:"initialize",value:function(){qs.middleware(function(e){var t=e.entity;e.tile.name.startsWith("post_")&&(t.set("colorPost").set("colorable","secondary").set("toRender").set("render",Ct).set("logic",{enter:Pu,exit:Ou}),wt(t,"post_mask"),t.set("color",{secondary:0}))})}},{key:"pre",value:function(){var e=this;if(Ss.exists("stateChanged")){this.forward=!1,Ss.loop("stateChanged",function(t){return e.forward=t});var t=new Set;Ds.every(["goal","color"],function(e,n){if(!e.solved){var r=n.get("primary");t.add(r)}}),console.log(t),Ds.every(["colorPost","color"],function(e,n,r){e.down=!t.has(n.get("secondary")),r.set("toRender")})}}}]),e}());var Iu=function(e){function t(e){Ht(this,t);var n=Ut(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.event=e,n}return Wt(t,e),Vt(t,[{key:"adjustOffset",value:function(e){var t=this.event.baseEntity.get("axis");if(t){var n={x:this.event.direction.x,y:-this.event.direction.y};bs["offset"+t.toUpperCase()]+=e*n[t]}}},{key:"execute",value:function(){this.adjustOffset(1)}},{key:"rollback",value:function(){this.adjustOffset(-1)}}]),t}(_u);Ds.system(function(){function e(){Ht(this,e)}return Vt(e,[{key:"initialize",value:function(){var e=this;qs.middleware(function(t){var n=t.entity,r=t.tile;if(r.name.startsWith("block_offset_")){e.createOffsetBlockEntity(n);var i=r.name.split("_").slice(2),o=$t(i,1),a=o[0];n.set("axis",a)}}),
this.offsetEntity=null,this.multiplier=1,qs.register(["offset_placeholder_positive","offset_placeholder_negative"],function(t,n){t.remove("sprite"),e.offsetEntity=t,e.multiplier="offset_placeholder_negative"===n.name?-1:1})}},{key:"getInitialOffset",value:function(){if(!this.offsetEntity)return{x:0,y:0};var e=ms.getZeroPosition(this.offsetEntity.get("position")),t={x:e.x*this.multiplier,y:-e.y*this.multiplier};return this.offsetEntity.destroy(),this.offsetEntity=null,t}},{key:"pre",value:function(){Ss.exists("loaded")&&(bs.offset=this.getInitialOffset())}},{key:"createOffsetBlockEntity",value:function(e){e.set("block").set("blocksLaser").set("offsetBlock").set("toRender"),e.set("logic",{enter:vu,moved:[_u,Iu],exit:yu}),e.set("render",Dt)}}]),e}());var Lu=function(e){function t(e,n){Ht(this,t);var r=Ut(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.entity=e,r.amount=n,r.amountMax=0,r}return Wt(t,e),Vt(t,[{key:"execute",value:function(){var e=this.entity.get("life");if(e){var t=e.max;e.points+=this.amount,this.amountMax=e.max-t;var n=this.amount>0?"heal":"hurt";return[new mu(n,this.entity)]}}},{key:"rollback",value:function(){var e=this.entity.get("life");if(e)return e.points-=this.amount,e.max-=this.amountMax,!0}}]),t}(du),Eu=function(e){function t(e){Ht(this,t);var n=Ut(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.baseEntity));return n.event=e,n}return Wt(t,e),Vt(t,[{key:"execute",value:function(){return!!this.event.entity.get("life")&&[new Lu(this.event.entity,1),new pu(this.event.baseEntity,this.event.entity)]}}]),t}(du);Ds.system(function(){function e(){Ht(this,e)}return Vt(e,[{key:"initialize",value:function(){qs.register(["heart"],function(e){e.set("logic",{enter:Eu})})}},{key:"handleChangers",value:function(e,t){Ds.every(["life",e],function(n,r,i){i.remove(e),Xs.pushToLast(new Lu(i,t))})}},{key:"pre",value:function(){this.handleChangers("heal",1),this.handleChangers("hurt",-1)}}]),e}()),Ds.system(function(){function e(){Ht(this,e)}return Vt(e,[{key:"initialize",value:function(){this.lifePointsContainer=new PIXI.Container,Fs.addChild(this.lifePointsContainer)}},{key:"pre",value:function(){this.updateLifePoints(Ss.exists("windowResized"))}},{key:"renderLifePoints",value:function(e,t,n){e.removeChildren();for(var r=0;r<n;++r){var i=r<t?"ui_heart.png":"ui_heart_empty.png",o=new PIXI.Sprite(PIXI.utils.TextureCache[i]);o.anchor.set(.5),o.y=Bs.renderer.height-64,o.x=64+64*r,o.width=64,o.height=64,e.addChild(o)}}},{key:"updateLifePoints",value:function(e){var t=0,n=0;Ds.every(["life"],function(e){t+=e.points,n+=e.max}),(e||t!==this.previousPoints||n!==this.previousMax)&&this.renderLifePoints(this.lifePointsContainer,t,n),this.previousPoints=t,this.previousMax=n}}]),e}());var ju=function(e){function t(e){Ht(this,t);var n=Ut(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.baseEntity));return n.event=e,n}return Wt(t,e),Vt(t,[{key:"execute",value:function(){if(this.event.entity.has("solvesLevels"))return new gu(this.event.baseEntity,"attemptSolve",this.event.entity)}}]),t}(du);Ds.system(["levelGoal","attemptSolve"],function(){function e(){Ht(this,e)}return Vt(e,[{key:"initialize",value:function(){qs.register(["level_goal"],function(e,t){e.set("levelGoal").set("logic",{enter:ju})})}},{key:"every",value:function(e,t,n){if(n.remove("attemptSolve"),Tt(t))return t.remove("inputMovement"),cu.add("level_solved"),setTimeout(function(){return Ss.send("solveLevel")},300),!1}}]),e}()),Ds.system(function(){function e(){Ht(this,e)}return Vt(e,[{key:"pre",value:function(){cu.play()}}]),e}()),Ds.system(["sprite","position","positionChanged"],function(){function e(){Ht(this,e)}return Vt(e,[{key:"calculateStartPosition",value:function(e,t){var n=t.diff;if(t.wrapped&&(0!==n.x||0!==n.y))return qs.getVisualPosition({x:e.x-n.x,y:e.y-n.y})}},{key:"every",value:function(e,t,n,r){var i=qs.getVisualPosition(t),o=this.calculateStartPosition(t,n);r.set("tween",o,i,Ss.first("animationTime",150)),r.remove("positionChanged")}}]),e}()),Ds.system(["tween"],function(){function e(){Ht(this,e)}return Vt(e,[{key:"every",value:function(e,t,n){e.update(1e3*n)}}]),e}());Ds.system(function(){function e(){Ht(this,e)}return Vt(e,[{key:"initialize",value:function(){window.onresize=function(e){ms.bounds&&Ss.send("resizeWindow")}}},{key:"pre",value:function(){Ss.exists("loaded")&&this.scaleLevel(),Ss.clear("windowResized"),Ss.exists("resizeWindow")&&(Ss.clear("resizeWindow"),this.handleResize())}},{key:"handleResize",value:function(){ms.update(),Bs.renderer.resize(ms.gameSize.width,ms.gameSize.height),this.scaleLevel(),Ss.send("updateCamera"),Ss.send("windowResized")}},{key:"scaleLevel",value:function(){ms.update();var e=ms.levelSize,t=ms.gameSize,n=t.width/t.height,r=e.width/e.height;Hs.scale=n<r?t.width/e.width*.75:t.height/e.height*.75}}]),e}()),Ds.system(["toRender","render"],function(){function e(){Ht(this,e)}return Vt(e,[{key:"every",value:function(e,t,n){var r=t(n);if(r&&"string"==typeof r){var i=n.get("sprite");i&&i.set(r)}n.remove("toRender")}}]),e}()),Ds.system(function(){function e(){Ht(this,e)}return Vt(e,[{key:"pre",value:function(){!Ss.exists("loaded")&&this.bounds||(this.bounds=Ns.getBucket(1).getBounds()),Ss.exists("loaded")&&(Hs.fullUpdate=!0),Hs.update(this.bounds)}}]),e}()),Ds.system(["cameraFollows","sprite"],function(){function e(){Ht(this,e)}return Vt(e,[{key:"every",value:function(e,t,n){var r=t.sprite.position;Ss.exists("updateCamera")&&(e.update(),Ss.clear("updateCamera")),this.centerCamera(r,e),e.center=!1,r.x>e.deadzone.x+e.deadzone.width&&(e.deadzone.x=r.x-e.deadzone.width),r.x<e.deadzone.x&&(e.deadzone.x=r.x),r.y>e.deadzone.y+e.deadzone.height&&(e.deadzone.y=r.y-e.deadzone.height),r.y<e.deadzone.y&&(e.deadzone.y=r.y),Hs.bounds&&(Rs.x=(-e.deadzone.x+e.borderSize.x+Hs.bounds.x)*Rs.scale.x,Rs.y=(-e.deadzone.y+e.borderSize.y+Hs.bounds.y)*Rs.scale.y)}},{key:"centerCamera",value:function(e,t){t.deadzone.x=e.x-t.deadzone.width/2,t.deadzone.y=e.y-t.deadzone.height/2}}]),e}()),window.onload=Bt}();
